"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var c=require("react"),p=e(c),y=e(require("timestamp-utils")),s=e(require("lodash.times"));function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){h(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(o){var c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=u(o);return t=c?(e=u(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!=typeof r&&"function"!=typeof r?d(n):r}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||e.length<t)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=[31,null,31,30,31,30,31,31,30,31,30,31],b=function(e){e=e||(new Date).getTime();var t,n=v(y.decompose(e),3),r=n[0],a=n[1],o=O(y.addDays(e,1-n[2])),c=m[a-1]||((t=r)%4==0&&t%100!=0||t%400==0?29:28),i=y.addDays(o,c-1),s=y.getWeekDay(o);return{firstMonthDay:o,lastMonthDay:i,firstDayToDisplay:y.addDays(o,-s),month:a,year:r}},g=function(e,t){return{startDate:t?e?Math.min(e,t):null:e,endDate:t&&t!==e?Math.max(e,t):null}},D=function(t,e){var n=y.getWeekDay(e);return s((e-t)/864e5+(6===n?0:6-n)+1,function(e){return y.addDays(t,e)})},O=function(e){var t=v(y.decompose(e),7);return y.add(e,{hours:-t[3],minutes:-t[4],seconds:-t[5],milliseconds:-t[6]})},E=function(e,t,n){return t<e&&e<n},C=function(e,t,n){return e<t||n<e},w=function(e){return"0".concat(e).slice(-2)},N=function(){i(a,c.Component);var r=f(a);function a(){var i;l(this,a);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h(d(i=r.call.apply(r,[this].concat(t))),"onHoursChange",function(e){var t=i.props;(0,t.onTimeChange)(y.setHours(t.date,parseInt(e.target.value,10)))}),h(d(i),"onMinutesChange",function(e){var t=i.props;(0,t.onTimeChange)(y.setMinutes(t.date,parseInt(e.target.value,10)))}),h(d(i),"render",function(){var e=i.props,t=e.date,n=e.displayTime,r=e.dayLabels,a=e.monthLabels,o=y.getHours(t),c=y.getMinutes(t);return p.createElement("div",{className:"rlc-date-details-wrapper"},p.createElement("div",{className:"rlc-date-details"},p.createElement("div",{className:"rlc-date-number"},y.getDay(t)),p.createElement("div",{className:"rlc-date-day-month-year"},p.createElement("div",{className:"rlc-detail-day"},r[y.getWeekDay(t)]),p.createElement("div",{className:"rlc-detail-month-year"},a[y.getMonth(t)-1]," ",p.createElement("span",{className:"rlc-detail-year"},y.getYear(t))))),n&&p.createElement("div",{className:"rlc-date-time-selects"},p.createElement("select",{onChange:i.onHoursChange,value:o},s(24).map(function(e){return p.createElement("option",{value:w(e),key:e},w(e))})),p.createElement("span",{className:"rlc-time-separator"},":"),p.createElement("select",{onChange:i.onMinutesChange,value:c},s(60).map(function(e){return p.createElement("option",{value:w(e),key:e},w(e))}))))}),i}return a}(),j=function(){i(o,c.Component);var r=f(o);function o(){var a;l(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h(d(a=r.call.apply(r,[this].concat(t))),"prevYear",function(){return a.props.onChange({yearOffset:-1})}),h(d(a),"prevMonth",function(){return a.props.onChange({monthOffset:-1})}),h(d(a),"nextYear",function(){return a.props.onChange({yearOffset:1})}),h(d(a),"nextMonth",function(){return a.props.onChange({monthOffset:1})}),h(d(a),"render",function(){var e=a.props,t=e.monthLabels,n=e.month,r=e.year;return p.createElement("div",{className:"rlc-month-and-year-wrapper"},p.createElement("div",{className:"rlc-navigation-button-wrapper rlc-prevs"},p.createElement("div",{className:"rlc-navigation-button rlc-prev-year",onClick:a.prevYear},"<<"),p.createElement("div",{className:"rlc-navigation-button rlc-prev-month",onClick:a.prevMonth},"<")),p.createElement("div",{className:"rlc-month-and-year"},t[n-1]," ",p.createElement("span",null,r)),p.createElement("div",{className:"rlc-navigation-button-wrapper rlc-nexts"},p.createElement("div",{className:"rlc-navigation-button rlc-next-month",onClick:a.nextMonth},">"),p.createElement("div",{className:"rlc-navigation-button rlc-next-year",onClick:a.nextYear},">>")))}),a}return o}(),t=function(){i(n,c.Component);var t=f(n);function n(e){var m;return l(this,n),h(d(m=t.call(this,e)),"componentDidUpdate",function(e){var t=m.props,n=t.timezone,r=t.startDate,a=t.endDate;n!==e.timezone&&y.setTimezone(n),r===e.startDate&&a===e.endDate||m.setState(m.getInitialState(m.props))}),h(d(m),"getInitialState",function(e){var t=e.startDate,n=e.endDate;return a(a({},b(t)),g(t,n))}),h(d(m),"onClickDay",function(e){var t=m.state,n=t.startDate;m.update(n?n&&!t.endDate?g(n,e):{startDate:e,endDate:null}:{startDate:e})}),h(d(m),"changeMonth",function(e){var t=e.yearOffset,n=e.monthOffset,r=y.add(m.state.firstMonthDay,{months:void 0===n?0:n,years:void 0===t?0:t});m.setState(b(r))}),h(d(m),"update",function(e){var t=e.startDate,n=e.endDate;m.props.onChange(void 0===t?m.props.startDate:t,void 0===n?m.props.endDate:n)}),h(d(m),"getClassNames",function(e){var t,n=m.state,r=n.firstMonthDay,a=n.lastMonthDay,o=n.endDate,c=m.props,i=c.disableDates,s=c.markedDays,l=O(n.startDate),u=O(o),d="function"==typeof s?s(e):!!Array.isArray(s)&&s.map(O).includes(e),f=(h(t={"rlc-day-disabled":i(e),"rlc-day-today":e===O((new Date).getTime()),"rlc-day-inside-selection":E(e,l,u),"rlc-day-out-of-month":C(e,r,a),"rlc-day-selected":!o&&l===e,"rlc-day-start-selection":o&&l===e,"rlc-day-end-selection":o&&u===e},"rlc-day-".concat(e),!0),h(t,"rlc-day-marked",d),t);return Object.entries(f).reduce(function(e,t){var n=v(t,2),r=n[0];return n[1]?"".concat(e," ").concat(r):e},"")}),h(d(m),"render",function(){var e=m.state,t=e.firstDayToDisplay,n=e.startDate,r=e.endDate,a=e.month,o=e.year,c=e.lastMonthDay,i=m.props,s=i.disableDates,l=i.displayTime,u=i.dayLabels,d=i.monthLabels,f=i.onClickDate;return p.createElement("div",{className:"rlc-calendar"},p.createElement("div",{className:"rlc-details"},!!n&&p.createElement(N,{dayLabels:u,monthLabels:d,date:n,displayTime:l,onTimeChange:function(e){return m.update({startDate:e})}}),!!r&&p.createElement(N,{dayLabels:u,monthLabels:d,date:r,displayTime:l,onTimeChange:function(e){return m.update({endDate:e})}})),p.createElement(j,{monthLabels:d,month:a,year:o,onChange:m.changeMonth}),p.createElement("div",{className:"rlc-days-label"},u.map(function(e){return p.createElement("div",{className:"rlc-day-label",key:e.toLowerCase()},e.slice(0,2))})),p.createElement("div",{className:"rlc-days"},D(t,c).map(function(e){return p.createElement("div",{className:"rlc-day ".concat(m.getClassNames(e)),key:e,onClick:function(){f(e),s(e)||m.onClickDay(e)}},parseInt(y.getDay(e),10))})))}),y.setTimezone(e.timezone),m.state=m.getInitialState(e),m}return n}();t.defaultProps={startDate:null,endDate:null,onChange:function(){},disableDates:function(){return!1},displayTime:!1,dayLabels:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],monthLabels:["January","February","March","April","May","June","July","August","September","October","November","December"],timezone:"UTC",markedDays:function(){return!1},onClickDate:function(){}},module.exports=t;
