{"ast":null,"code":"import { ChartData } from '../utils/get-data';\nimport { getTransform, firstToLowerCase } from '../../common/utils/helper';\nimport { dragStart, drag, dragEnd } from '../../common/model/constants';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * `DataEditing` module handles data editing\n */\n\nvar DataEditing =\n/** @class */\nfunction () {\n  /**\n   * Constructor for DataEditing module.\n   * @private.\n   */\n  function DataEditing(chart) {\n    /**\n     * @private\n     * It is used to identify point is dragging for data editing in other modules.\n     */\n    this.isPointDragging = false;\n    this.chart = chart;\n  }\n  /**\n   * Point drag start here\n   */\n\n\n  DataEditing.prototype.pointMouseDown = function () {\n    var chart = this.chart;\n    var series;\n    var data = new ChartData(chart);\n    var pointData = data.getData();\n\n    if (pointData.point && (data.insideRegion || !pointData.series.isRectSeries)) {\n      this.seriesIndex = pointData.series.index;\n      this.pointIndex = pointData.point.index;\n      series = chart.series[this.seriesIndex];\n\n      if (series.dragSettings.enable && !chart.zoomModule) {\n        chart.trigger(dragStart, {\n          series: pointData.series,\n          seriesIndex: this.seriesIndex,\n          pointIndex: this.pointIndex,\n          point: pointData.point,\n          oldValue: chart.visibleSeries[this.seriesIndex].yData[this.pointIndex],\n          newValue: chart.visibleSeries[this.seriesIndex].points[this.pointIndex].yValue\n        });\n        chart.isPointMouseDown = true;\n        chart.zoomSettings.enableDeferredZooming = false;\n      }\n    }\n  };\n  /**\n   * Point dragging\n   */\n\n\n  DataEditing.prototype.pointMouseMove = function (event) {\n    var chart = this.chart;\n    var series;\n\n    if (event.type === 'touchmove' && event.preventDefault) {\n      event.preventDefault();\n    }\n\n    var data = new ChartData(chart);\n    var pointData = data.getData();\n\n    if (pointData.series.dragSettings.enable && pointData.point && (data.insideRegion || !pointData.series.isRectSeries)) {\n      this.getCursorStyle(pointData);\n    } else {\n      chart.svgObject.setAttribute('style', 'cursor: null');\n    }\n\n    if (chart.isPointMouseDown) {\n      series = chart.series[this.seriesIndex];\n\n      if (series.type.indexOf('Spline') > -1) {\n        chart[firstToLowerCase(series.type) + 'SeriesModule'].findSplinePoint(series);\n      }\n\n      this.pointDragging(this.seriesIndex, this.pointIndex);\n    }\n  };\n  /**\n   * Get cursor style\n   */\n\n\n  DataEditing.prototype.getCursorStyle = function (pointData) {\n    var chart = this.chart;\n\n    if (pointData.series.type === 'Bar' && chart.isTransposed) {\n      chart.svgObject.setAttribute('style', 'cursor:ns-resize');\n    } else if (chart.isTransposed || pointData.series.type === 'Bar') {\n      chart.svgObject.setAttribute('style', 'cursor:ew-resize');\n    } else {\n      chart.svgObject.setAttribute('style', 'cursor:ns-resize');\n    }\n  };\n  /**\n   * Dragging calculation\n   */\n\n\n  DataEditing.prototype.pointDragging = function (si, pi) {\n    var chart = this.chart;\n    var yValueArray = [];\n    var y;\n    var ySize;\n    var yValue;\n    var series = chart.visibleSeries[si];\n    var pointDrag = series.dragSettings;\n    var xAxis = series.xAxis;\n    var yAxis = series.yAxis;\n    var minRange;\n    var maxRange; // To get drag region for column and bar series\n\n    var extra = series.isRectSeries ? 1 : 0;\n    var axis = getTransform(xAxis, yAxis, chart.requireInvertedAxis);\n\n    if (series.type === 'Bar') {\n      y = chart.isTransposed ? axis.y + axis.height - chart.mouseY : chart.mouseX - axis.x;\n      ySize = chart.isTransposed ? axis.height : axis.width;\n    } else {\n      y = chart.isTransposed ? chart.mouseX - axis.x : axis.y + axis.height - chart.mouseY;\n      ySize = chart.isTransposed ? axis.width : axis.height;\n    }\n\n    yValue = yAxis.isInversed ? 1 - y / ySize : y / ySize;\n    yValue = yValue * yAxis.visibleRange.delta + yAxis.visibleRange.min;\n    minRange = yAxis.minimum !== null ? yAxis.visibleRange.min + extra : isNullOrUndefined(pointDrag.minY) ? yValue : pointDrag.minY;\n    maxRange = yAxis.maximum !== null ? yAxis.visibleRange.max + extra : isNullOrUndefined(pointDrag.maxY) ? yValue : pointDrag.maxY;\n\n    if (maxRange >= yValue && minRange <= yValue) {\n      series.points[pi].yValue = series.points[pi].y = chart.dragY = yAxis.valueType === 'Logarithmic' ? Math.pow(yAxis.logBase, yValue) : parseFloat(yValue.toFixed(2));\n      series.points[pi].interior = pointDrag.fill;\n\n      for (var i = 0; i < series.points.length; i++) {\n        yValueArray[i] = series.points[i].yValue;\n      }\n\n      series.yMin = Math.min.apply(null, yValueArray);\n      series.yMax = Math.max.apply(null, yValueArray);\n      this.isPointDragging = true;\n      chart.refreshBound();\n      chart.trigger(drag, {\n        seriesIndex: si,\n        pointIndex: pi,\n        series: series,\n        point: series.points[pi],\n        oldValue: chart.visibleSeries[this.seriesIndex].yData[this.pointIndex],\n        newValue: series.points[pi].yValue\n      });\n    }\n  };\n  /**\n   * Point drag ends here\n   */\n\n\n  DataEditing.prototype.pointMouseUp = function () {\n    var chart = this.chart;\n\n    if (chart.isPointMouseDown) {\n      if (chart.series[this.seriesIndex].dragSettings.enable) {\n        chart.trigger(dragEnd, {\n          series: chart.series[this.seriesIndex],\n          point: chart.visibleSeries[this.seriesIndex].points[this.pointIndex],\n          seriesIndex: this.seriesIndex,\n          pointIndex: this.pointIndex,\n          oldValue: chart.visibleSeries[this.seriesIndex].yData[this.pointIndex],\n          newValue: chart.visibleSeries[this.seriesIndex].points[this.pointIndex].yValue\n        });\n        chart.visibleSeries[this.seriesIndex].points[this.pointIndex].y = chart.visibleSeries[this.seriesIndex].points[this.pointIndex].yValue;\n        chart.isPointMouseDown = false;\n        this.isPointDragging = false;\n        this.seriesIndex = this.pointIndex = undefined;\n      }\n    }\n  };\n  /**\n   * Get module name.\n   */\n\n\n  DataEditing.prototype.getModuleName = function () {\n    // Returns te module name\n    return 'DataEditing';\n  };\n  /**\n   * To destroy the DataEditing.\n   * @return {void}\n   * @private\n   */\n\n\n  DataEditing.prototype.destroy = function (chart) {// Destroy method performed here\n  };\n\n  return DataEditing;\n}();\n\nexport { DataEditing };","map":{"version":3,"sources":["C:/Users/Power GSM/Desktop/React-Fito-v1.0-9-April-2021V/React-Fito-v1.0-9-April-2021V/react-fito/node_modules/@syncfusion/ej2-charts/src/chart/user-interaction/data-editing.js"],"names":["ChartData","getTransform","firstToLowerCase","dragStart","drag","dragEnd","isNullOrUndefined","DataEditing","chart","isPointDragging","prototype","pointMouseDown","series","data","pointData","getData","point","insideRegion","isRectSeries","seriesIndex","index","pointIndex","dragSettings","enable","zoomModule","trigger","oldValue","visibleSeries","yData","newValue","points","yValue","isPointMouseDown","zoomSettings","enableDeferredZooming","pointMouseMove","event","type","preventDefault","getCursorStyle","svgObject","setAttribute","indexOf","findSplinePoint","pointDragging","isTransposed","si","pi","yValueArray","y","ySize","pointDrag","xAxis","yAxis","minRange","maxRange","extra","axis","requireInvertedAxis","height","mouseY","mouseX","x","width","isInversed","visibleRange","delta","min","minimum","minY","maximum","max","maxY","dragY","valueType","Math","pow","logBase","parseFloat","toFixed","interior","fill","i","length","yMin","apply","yMax","refreshBound","pointMouseUp","undefined","getModuleName","destroy"],"mappings":"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","sourcesContent":["import { ChartData, } from '../utils/get-data';\nimport { getTransform, firstToLowerCase } from '../../common/utils/helper';\nimport { dragStart, drag, dragEnd } from '../../common/model/constants';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * `DataEditing` module handles data editing\n */\nvar DataEditing = /** @class */ (function () {\n    /**\n     * Constructor for DataEditing module.\n     * @private.\n     */\n    function DataEditing(chart) {\n        /**\n         * @private\n         * It is used to identify point is dragging for data editing in other modules.\n         */\n        this.isPointDragging = false;\n        this.chart = chart;\n    }\n    /**\n     * Point drag start here\n     */\n    DataEditing.prototype.pointMouseDown = function () {\n        var chart = this.chart;\n        var series;\n        var data = new ChartData(chart);\n        var pointData = data.getData();\n        if (pointData.point && (data.insideRegion || !pointData.series.isRectSeries)) {\n            this.seriesIndex = pointData.series.index;\n            this.pointIndex = pointData.point.index;\n            series = chart.series[this.seriesIndex];\n            if (series.dragSettings.enable && !chart.zoomModule) {\n                chart.trigger(dragStart, {\n                    series: pointData.series, seriesIndex: this.seriesIndex, pointIndex: this.pointIndex, point: pointData.point,\n                    oldValue: chart.visibleSeries[this.seriesIndex].yData[this.pointIndex],\n                    newValue: chart.visibleSeries[this.seriesIndex].points[this.pointIndex].yValue\n                });\n                chart.isPointMouseDown = true;\n                chart.zoomSettings.enableDeferredZooming = false;\n            }\n        }\n    };\n    /**\n     * Point dragging\n     */\n    DataEditing.prototype.pointMouseMove = function (event) {\n        var chart = this.chart;\n        var series;\n        if (event.type === 'touchmove' && event.preventDefault) {\n            event.preventDefault();\n        }\n        var data = new ChartData(chart);\n        var pointData = data.getData();\n        if (pointData.series.dragSettings.enable && pointData.point && (data.insideRegion || !pointData.series.isRectSeries)) {\n            this.getCursorStyle(pointData);\n        }\n        else {\n            chart.svgObject.setAttribute('style', 'cursor: null');\n        }\n        if (chart.isPointMouseDown) {\n            series = chart.series[this.seriesIndex];\n            if (series.type.indexOf('Spline') > -1) {\n                chart[firstToLowerCase(series.type) + 'SeriesModule'].findSplinePoint(series);\n            }\n            this.pointDragging(this.seriesIndex, this.pointIndex);\n        }\n    };\n    /**\n     * Get cursor style\n     */\n    DataEditing.prototype.getCursorStyle = function (pointData) {\n        var chart = this.chart;\n        if (pointData.series.type === 'Bar' && chart.isTransposed) {\n            chart.svgObject.setAttribute('style', 'cursor:ns-resize');\n        }\n        else if (chart.isTransposed || pointData.series.type === 'Bar') {\n            chart.svgObject.setAttribute('style', 'cursor:ew-resize');\n        }\n        else {\n            chart.svgObject.setAttribute('style', 'cursor:ns-resize');\n        }\n    };\n    /**\n     * Dragging calculation\n     */\n    DataEditing.prototype.pointDragging = function (si, pi) {\n        var chart = this.chart;\n        var yValueArray = [];\n        var y;\n        var ySize;\n        var yValue;\n        var series = chart.visibleSeries[si];\n        var pointDrag = series.dragSettings;\n        var xAxis = series.xAxis;\n        var yAxis = series.yAxis;\n        var minRange;\n        var maxRange;\n        // To get drag region for column and bar series\n        var extra = series.isRectSeries ? 1 : 0;\n        var axis = getTransform(xAxis, yAxis, chart.requireInvertedAxis);\n        if (series.type === 'Bar') {\n            y = chart.isTransposed ? (axis.y + axis.height) - chart.mouseY : chart.mouseX - axis.x;\n            ySize = chart.isTransposed ? axis.height : axis.width;\n        }\n        else {\n            y = chart.isTransposed ? chart.mouseX - axis.x : (axis.y + axis.height) - chart.mouseY;\n            ySize = chart.isTransposed ? axis.width : axis.height;\n        }\n        yValue = yAxis.isInversed ? (1 - (y / ySize)) : (y / ySize);\n        yValue = (yValue * yAxis.visibleRange.delta) + yAxis.visibleRange.min;\n        minRange = yAxis.minimum !== null ? yAxis.visibleRange.min + extra : (isNullOrUndefined(pointDrag.minY) ?\n            (yValue) : pointDrag.minY);\n        maxRange = yAxis.maximum !== null ? yAxis.visibleRange.max + extra : (isNullOrUndefined(pointDrag.maxY) ?\n            (yValue) : pointDrag.maxY);\n        if (maxRange >= yValue && minRange <= yValue) {\n            series.points[pi].yValue = series.points[pi].y = chart.dragY = (yAxis.valueType === 'Logarithmic') ?\n                Math.pow(yAxis.logBase, yValue) : parseFloat(yValue.toFixed(2));\n            series.points[pi].interior = pointDrag.fill;\n            for (var i = 0; i < series.points.length; i++) {\n                yValueArray[i] = series.points[i].yValue;\n            }\n            series.yMin = Math.min.apply(null, yValueArray);\n            series.yMax = Math.max.apply(null, yValueArray);\n            this.isPointDragging = true;\n            chart.refreshBound();\n            chart.trigger(drag, {\n                seriesIndex: si, pointIndex: pi, series: series, point: series.points[pi],\n                oldValue: chart.visibleSeries[this.seriesIndex].yData[this.pointIndex], newValue: series.points[pi].yValue\n            });\n        }\n    };\n    /**\n     * Point drag ends here\n     */\n    DataEditing.prototype.pointMouseUp = function () {\n        var chart = this.chart;\n        if (chart.isPointMouseDown) {\n            if (chart.series[this.seriesIndex].dragSettings.enable) {\n                chart.trigger(dragEnd, {\n                    series: chart.series[this.seriesIndex], point: chart.visibleSeries[this.seriesIndex].points[this.pointIndex],\n                    seriesIndex: this.seriesIndex,\n                    pointIndex: this.pointIndex, oldValue: chart.visibleSeries[this.seriesIndex].yData[this.pointIndex],\n                    newValue: chart.visibleSeries[this.seriesIndex].points[this.pointIndex].yValue\n                });\n                chart.visibleSeries[this.seriesIndex].points[this.pointIndex].y =\n                    chart.visibleSeries[this.seriesIndex].points[this.pointIndex].yValue;\n                chart.isPointMouseDown = false;\n                this.isPointDragging = false;\n                this.seriesIndex = this.pointIndex = undefined;\n            }\n        }\n    };\n    /**\n     * Get module name.\n     */\n    DataEditing.prototype.getModuleName = function () {\n        // Returns te module name\n        return 'DataEditing';\n    };\n    /**\n     * To destroy the DataEditing.\n     * @return {void}\n     * @private\n     */\n    DataEditing.prototype.destroy = function (chart) {\n        // Destroy method performed here\n    };\n    return DataEditing;\n}());\nexport { DataEditing };\n"]},"metadata":{},"sourceType":"module"}