{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { logBase } from '../../common/utils/helper';\nimport { PathOption, drawPath, drawRectangle, RectOption, Rect, CircleOption, drawCircle } from '../utils/helper';\nimport { measureText, renderTextElement, TextOption } from '../utils/helper';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\n/**\n * Sparkline rendering calculation file\n */\n\nvar SparklineRenderer =\n/** @class */\nfunction () {\n  /**\n   * Sparkline data calculations\n   * @param sparkline\n   */\n  function SparklineRenderer(sparkline) {\n    this.sparkline = sparkline;\n  }\n  /**\n   * To process the sparkline data\n   */\n\n\n  SparklineRenderer.prototype.processData = function () {\n    var data = this.sparkline.dataSource;\n\n    if (isNullOrUndefined(data) || !data.length) {\n      return;\n    } else if (!isNaN(this.sparkline.dataSource[0]) || this.sparkline.valueType === 'Numeric') {\n      data = this.sparkline.enableRtl ? data.reverse() : data;\n      this.sparkline.sparklineData = data; // extend([], data) as Object[];\n    } else {\n      this['process' + this.sparkline.valueType]();\n    }\n\n    this.axisCalculation();\n  };\n  /* tslint:disable:no-string-literal */\n\n  /* tslint:disable:no-eval */\n\n\n  SparklineRenderer.prototype.processDataManager = function () {\n    var _this = this;\n\n    var dataModule;\n    var queryModule;\n\n    if (this.sparkline.dataSource instanceof DataManager) {\n      dataModule = this.sparkline.dataSource;\n      queryModule = this.sparkline.query instanceof Query ? this.sparkline.query : new Query();\n      var dataManager = dataModule.executeQuery(queryModule);\n      dataManager.then(function (e) {\n        _this.sparkline.setProperties({\n          dataSource: e['result']\n        }, true);\n\n        _this.sparkline.sparklineData = _this.sparkline.dataSource;\n\n        _this.sparkline.processSparklineData();\n      });\n    } else {\n      this.sparkline.processSparklineData();\n    }\n  };\n  /**\n   * To process sparkline category data.\n   */\n\n\n  SparklineRenderer.prototype.processCategory = function (data, x, y) {\n    var _this = this;\n\n    if (data === void 0) {\n      data = this.sparkline.dataSource;\n    }\n\n    if (x === void 0) {\n      x = this.sparkline.xName;\n    }\n\n    if (y === void 0) {\n      y = this.sparkline.yName;\n    }\n\n    var temp = [];\n    var xValues = [];\n    data.forEach(function (value, index) {\n      if (xValues.indexOf(value[x]) === -1) {\n        xValues.push(value[x]);\n      }\n\n      var currentData = {};\n      currentData[_this.sparkline.xName] = xValues.indexOf(value[x]);\n      currentData[_this.sparkline.yName] = value[y];\n      temp.push(currentData);\n    });\n    this.sparkline.sparklineData = temp;\n  };\n  /**\n   * To process sparkline DateTime data.\n   */\n\n\n  SparklineRenderer.prototype.processDateTime = function (data, x, y) {\n    if (data === void 0) {\n      data = this.sparkline.dataSource;\n    }\n\n    if (x === void 0) {\n      x = this.sparkline.xName;\n    }\n\n    if (y === void 0) {\n      y = this.sparkline.yName;\n    }\n\n    var temp = [];\n    data.forEach(function (value, index) {\n      var currentData = {};\n      currentData[x] = value[x].getTime();\n      currentData[y] = value[y];\n      temp.push(currentData);\n    });\n    this.sparkline.sparklineData = temp;\n  };\n  /**\n   * To render sparkline series.\n   * @private\n   */\n\n\n  SparklineRenderer.prototype.renderSeries = function () {\n    var _this = this;\n\n    var spark = this.sparkline;\n    this.clipId = spark.element.id + '_sparkline_clip_path';\n    this.drawAxis();\n    var argsData = {\n      name: 'seriesRendering',\n      cancel: false,\n      lineWidth: spark.lineWidth,\n      border: spark.border,\n      fill: spark.fill,\n      sparkline: !this.sparkline.isBlazor ? spark : null\n    };\n\n    var seriesRenderingSuccess = function (args) {\n      if (!_this.visiblePoints || args.cancel) {\n        return;\n      }\n\n      if (spark.type !== 'Pie' && spark.type !== 'WinLoss' && spark.rangeBandSettings.length) {\n        var group = _this.sparkline.renderer.createGroup({\n          id: _this.sparkline.element.id + '_sparkline_rangeband_g'\n        });\n\n        for (var i = 0; i < spark.rangeBandSettings.length; i++) {\n          if (spark.axisSettings.minY <= spark.rangeBandSettings[i].startRange || spark.axisSettings.maxY >= spark.rangeBandSettings[i].endRange) {\n            _this.rangeBand(spark.rangeBandSettings[i], group, i);\n          }\n        }\n\n        _this.sparkline.svgObject.appendChild(group);\n      }\n\n      _this['render' + spark.type](_this.visiblePoints, args);\n\n      _this.renderMarker(_this.visiblePoints);\n\n      _this.renderLabel(_this.visiblePoints);\n    };\n\n    seriesRenderingSuccess.bind(this);\n    spark.trigger('seriesRendering', argsData, seriesRenderingSuccess);\n  };\n  /**\n   * To render a range band\n   */\n\n\n  SparklineRenderer.prototype.rangeBand = function (rangeBandSettings, group, index) {\n    var model = this.sparkline;\n    var height = model.availableSize.height - model.padding.top * 2;\n    var width = model.availableSize.width - model.padding.left * 2;\n    var stValue = rangeBandSettings.startRange;\n    var edValue = rangeBandSettings.endRange;\n    var stHeight = height - height / this.unitY * (stValue - this.min) + model.padding.top;\n    var edHeight = height - height / this.unitY * (edValue - this.min) + model.padding.top;\n    var color = rangeBandSettings.color || this.sparkline.sparkTheme.rangeBandColor;\n\n    if (edHeight > height + model.padding.top) {\n      edHeight = height + model.padding.top;\n    } else if (edHeight < 0 + model.padding.top) {\n      edHeight = 0 + model.padding.top;\n    }\n\n    if (stHeight > height + model.padding.top) {\n      stHeight = height + model.padding.top;\n    } else if (stHeight < 0 + model.padding.top) {\n      stHeight = 0 + model.padding.top;\n    }\n\n    var path = 'M ' + model.padding.left + ' ' + stHeight + ' L ' + (width + model.padding.left) + ' ' + stHeight + ' L ' + (width + model.padding.left) + ' ' + edHeight + ' L ' + model.padding.left + ' ' + edHeight + ' Z ';\n    var pathOption = {\n      'id': model.element.id + '_rangeBand_' + index,\n      'fill': color,\n      'opacity': rangeBandSettings.opacity,\n      'stroke': 'transparent',\n      'stroke-width': model.lineWidth,\n      'd': path,\n      'stroke-dasharray': ''\n    };\n    drawPath(this.sparkline, pathOption, group);\n  };\n  /**\n   * To render line series\n   */\n\n\n  SparklineRenderer.prototype.renderLine = function (points, args) {\n    var spark = this.sparkline;\n    var g = this.sparkline.renderer.createGroup({\n      id: spark.element.id + '_sparkline_g',\n      'clip-path': 'url(#' + this.clipId + ')'\n    });\n    var color = this.sparkline.fill;\n    color = this.sparkline.fill === '#00bdae' && this.sparkline.theme === 'Bootstrap4' ? this.sparkline.sparkTheme.axisLineColor : color;\n    var pathOption = new PathOption(spark.element.id + '_sparkline_line', 'transparent', args.lineWidth, color, spark.opacity);\n    var d = '';\n\n    for (var i = 0, len = points.length; i < len; i++) {\n      if (i === 0) {\n        d = 'M ' + points[0].x + ' ' + points[i].y + ' ';\n      }\n\n      d += 'L ' + points[i].x + ' ' + points[i].y + ' ';\n    }\n\n    pathOption.d = d;\n    drawPath(this.sparkline, pathOption, g);\n    this.sparkline.svgObject.appendChild(g);\n  };\n  /**\n   * To render pie series\n   */\n\n  /* tslint:disable:no-string-literal */\n\n\n  SparklineRenderer.prototype.renderPie = function (points, args) {\n    var spark = this.sparkline;\n    var height = spark.availableSize.height - (spark.padding.top + spark.padding.bottom);\n    var width = spark.availableSize.width - (spark.padding.left + spark.padding.right);\n    var area = height <= width ? height / 2 : width / 2;\n    var X = spark.availableSize.width / 2; // center position of x\n\n    var Y = spark.availableSize.height / 2; // center position of y\n\n    var deg = 0;\n    var stRad;\n    var edRad;\n    var stroke = args.border.color;\n    var opacity = spark.opacity;\n    var strokeWidth = args.border.width;\n    var colors = spark.palette.length ? spark.palette : ['#00bdae', '#404041', '#357cd2', '#e56590', '#f8b883', '#70ad47', '#dd8abd', '#7f84e8', '#7bb4eb', '#ea7a57'];\n    var group = this.sparkline.renderer.createGroup({\n      id: spark.element.id + '_sparkline_g'\n    });\n    var low;\n    var high;\n    var locations = extend([], [], points);\n\n    if (spark.highPointColor || spark.lowPointColor) {\n      var pointsYvalues = locations.map(function (a) {\n        return a.yVal;\n      });\n      low = Math.min.apply(null, pointsYvalues);\n      high = Math.max.apply(null, pointsYvalues);\n    }\n\n    this.negativePointIndexes = [];\n\n    for (var i = 0, stDeg = 90, edDeg = void 0, flag = void 0; i < points.length; i++) {\n      stDeg += deg;\n      deg = points[i]['degree'];\n      edDeg = stDeg + deg;\n      stRad = (stDeg - 90) * Math.PI / 180.0;\n      edRad = (edDeg - 90) * Math.PI / 180.0;\n      points[i]['stAng'] = stRad;\n      points[i]['endAng'] = edRad;\n      flag = deg < 180 ? '0' : '1';\n      var temp = points[i]['coordinates'] = {\n        sX: X + area * Math.cos(stRad),\n        sY: Y + area * Math.sin(stRad),\n        eX: X + area * Math.cos(edRad),\n        eY: Y + area * Math.sin(edRad)\n      };\n      var pathArc = 'M ' + X + ' ' + Y + ' L ' + temp['eX'] + ' ' + temp['eY'] + ' A ' + area + ' ' + area + ' 0 ' + flag + ',0 ' + temp['sX'] + ' ' + temp['sY'] + ' Z';\n      var pathOption = {\n        'id': spark.element.id + '_sparkline_pie_' + i,\n        'opacity': opacity,\n        'fill': colors[i % colors.length],\n        'stroke': stroke,\n        'stroke-width': strokeWidth,\n        'd': pathArc,\n        'stroke-dasharray': ''\n      };\n      this.getPieSpecialPoint(points[i], spark, pathOption, i, high, low, points.length);\n      var pointArgs = this.triggerPointRender('pointRendering', i, pathOption.fill, {\n        color: stroke,\n        width: strokeWidth\n      });\n      pathOption.fill = pointArgs.fill;\n      pathOption.stroke = pointArgs.border.color;\n      pathOption['stroke-width'] = pointArgs.border.width;\n\n      if (!pointArgs.cancel) {\n        var element = drawPath(this.sparkline, pathOption, group);\n        element.setAttribute('aria-label', spark.dataSource[i][spark.xName] + ' : ' + points[i].yVal);\n      }\n\n      var diffRadian = edRad - stRad;\n      var mid = {\n        x: X + area / 2 * Math.cos(stRad + diffRadian / 2),\n        y: Y + area / 2 * Math.sin(stRad + diffRadian / 2)\n      };\n      points[i].location.x = mid.x;\n      points[i].location.y = mid.y;\n    }\n\n    this.sparkline.svgObject.appendChild(group);\n  };\n  /**\n   * To get special point color and option for Pie series.\n   */\n\n\n  SparklineRenderer.prototype.getPieSpecialPoint = function (temp, spark, option, i, high, low, length) {\n    if (temp.yVal < 0 && spark.negativePointColor) {\n      option.fill = spark.negativePointColor;\n      this.negativePointIndexes.push(i);\n    }\n\n    if (i === 0 && spark.startPointColor) {\n      option.fill = spark.startPointColor;\n      this.startPointIndex = i;\n    } else if (i === length - 1 && spark.endPointColor) {\n      option.fill = spark.endPointColor;\n      this.endPointIndex = i;\n    }\n\n    if (temp.yVal === high && spark.highPointColor) {\n      option.fill = spark.highPointColor;\n      this.highPointIndex = i;\n    } else if (temp.yVal === low && spark.lowPointColor) {\n      option.fill = spark.lowPointColor;\n      this.lowPointIndex = i;\n    }\n  };\n  /**\n   * To render area series\n   */\n\n\n  SparklineRenderer.prototype.renderArea = function (points, args) {\n    var spark = this.sparkline;\n    var group = this.sparkline.renderer.createGroup({\n      id: spark.element.id + '_sparkline_g',\n      'clip-path': 'url(#' + this.clipId + ')'\n    });\n    var pathOption = new PathOption(spark.element.id + '_sparkline_area', args.fill, 0, 'transparent', spark.opacity);\n    var d = '';\n    var str = '';\n\n    for (var i = 0, len = points.length; i < len; i++) {\n      if (i !== 0) {\n        str += 'L ' + points[i].x + ' ' + points[i].y + ' ';\n      } else {\n        d = 'M ' + points[i].x + ' ' + this.axisHeight + ' ';\n        str = 'M ' + points[i].x + ' ' + points[i].y + ' ';\n      }\n\n      d += 'L ' + points[i].x + ' ' + points[i].y + ' ';\n\n      if (i === len - 1) {\n        d += 'L ' + points[i].x + ' ' + this.axisHeight + ' Z';\n      }\n    }\n\n    pathOption.d = d;\n    drawPath(this.sparkline, pathOption, group);\n    pathOption = new PathOption(spark.element.id + '_sparkline_area_str', 'transparent', args.border.width, args.border.color, spark.opacity, '', str);\n    drawPath(this.sparkline, pathOption, group);\n    this.sparkline.svgObject.appendChild(group);\n  };\n  /**\n   * To render column series\n   */\n\n\n  SparklineRenderer.prototype.renderColumn = function (points, args) {\n    var _this = this;\n\n    var spark = this.sparkline;\n    var locations = extend([], [], points);\n    var group = this.sparkline.renderer.createGroup({\n      id: spark.element.id + '_sparkline_g',\n      'clip-path': 'url(#' + this.clipId + ')'\n    });\n    var lowPos;\n    var highPos;\n\n    if (this.sparkline.highPointColor || this.sparkline.lowPointColor) {\n      var pointsYPos = locations.map(function (a) {\n        return a.markerPosition;\n      });\n      highPos = Math.min.apply(null, pointsYPos);\n      lowPos = Math.max.apply(null, pointsYPos);\n    }\n\n    var id = spark.element.id + '_sparkline_column_';\n    var rectOptions = new RectOption(id, '', args.border, spark.opacity, null);\n    var paletteLength = spark.palette.length;\n    var temp;\n    var len = points.length;\n    this.negativePointIndexes = [];\n\n    var _loop_1 = function (i) {\n      temp = points[i];\n      rectOptions.id = id + i;\n      rectOptions.fill = paletteLength ? spark.palette[i % paletteLength] : args.fill;\n      rectOptions.rect = new Rect(temp.x, temp.y, temp.width, temp.height);\n      this_1.getSpecialPoint(true, temp, spark, rectOptions, i, highPos, lowPos, len);\n      temp.location.y = temp.markerPosition <= this_1.axisHeight ? temp.y : temp.y + temp.height;\n      temp.location.x = temp.x + temp.width / 2;\n      rectOptions.stroke = args.border.color ? args.border.color : rectOptions.fill;\n      var pointArgs = {\n        name: 'pointRendering',\n        cancel: false,\n        pointIndex: i,\n        fill: rectOptions.fill,\n        border: {\n          color: rectOptions.stroke,\n          width: args.border.width\n        }\n      };\n\n      if (this_1.sparkline.isBlazor) {\n        var blazorpointArgs = __rest(pointArgs, []);\n\n        pointArgs = blazorpointArgs;\n      }\n\n      this_1.sparkline.trigger('pointRendering', pointArgs, function (eventArgs) {\n        temp = points[i];\n        rectOptions.id = id + i;\n        rectOptions.rect = new Rect(temp.x, temp.y, temp.width, temp.height);\n\n        _this.getSpecialPoint(true, temp, spark, rectOptions, i, highPos, lowPos, len);\n\n        rectOptions.fill = pointArgs.fill;\n        rectOptions.stroke = pointArgs.border.color;\n        temp.location.y = temp.markerPosition <= _this.axisHeight ? temp.y : temp.y + temp.height;\n        rectOptions['stroke-width'] = pointArgs.border.width;\n        temp.location.x = temp.x + temp.width / 2;\n\n        if (!pointArgs.cancel) {\n          var element = drawRectangle(spark, rectOptions, group);\n          element.setAttribute('aria-label', spark.dataSource[i][spark.xName] + ' : ' + points[i].yVal);\n          group.appendChild(element);\n        }\n      });\n    };\n\n    var this_1 = this;\n\n    for (var i = 0; i < len; i++) {\n      _loop_1(i);\n    }\n\n    this.sparkline.svgObject.appendChild(group);\n  };\n  /**\n   * To render WinLoss series\n   */\n\n\n  SparklineRenderer.prototype.renderWinLoss = function (points, args) {\n    var spark = this.sparkline;\n    var group = this.sparkline.renderer.createGroup({\n      id: spark.element.id + '_sparkline_g',\n      'clip-path': 'url(#' + this.clipId + ')'\n    });\n    var id = spark.element.id + '_sparkline_winloss_';\n    var options = new RectOption(id, '', args.border, spark.opacity, null);\n    var temp;\n    var len = points.length;\n    var paletteLength = spark.palette.length;\n\n    for (var i = 0; i < len; i++) {\n      temp = points[i];\n      options.id = id + i;\n      options.fill = paletteLength ? spark.palette[i % paletteLength] : temp.yVal === this.axisValue ? this.sparkline.tiePointColor || '#a216f3' : temp.yVal > this.axisValue ? args.fill : spark.negativePointColor || '#e20f07';\n      options.stroke = args.border.color ? args.border.color : options.fill;\n      options.rect = new Rect(temp.x, temp.y, temp.width, temp.height);\n      temp.location.x = temp.x + temp.width / 2;\n      temp.location.y = temp.yVal >= this.axisValue ? temp.y : temp.y + temp.height;\n      var pointArgs = this.triggerPointRender('pointRendering', i, options.fill, {\n        color: options.stroke,\n        width: args.border.width\n      });\n      options.fill = pointArgs.fill;\n      options.stroke = pointArgs.border.color;\n      options['stroke-width'] = pointArgs.border.width;\n\n      if (!pointArgs.cancel) {\n        var element = drawRectangle(spark, options, group);\n        element.setAttribute('aria-label', spark.dataSource[i][spark.xName] + ' : ' + points[i].yVal);\n      }\n    }\n\n    this.sparkline.svgObject.appendChild(group);\n  };\n\n  SparklineRenderer.prototype.renderMarker = function (points) {\n    var spark = this.sparkline;\n    var marker = spark.markerSettings;\n\n    if (spark.type === 'Pie' || spark.type === 'WinLoss' || !marker.visible.length) {\n      return;\n    }\n\n    var locations = extend([], [], points);\n    var group = this.sparkline.renderer.createGroup({\n      id: spark.element.id + '_sparkline_marker_g',\n      'clip-path': 'url(#' + this.clipId + ')'\n    });\n    var g;\n    var temp;\n    var id = spark.element.id + '_sparkline_marker_';\n    var option = new CircleOption('', marker.fill, marker.border, marker.opacity, 0, 0, marker.size / 2, '');\n    var highPos;\n    var lowPos;\n    var visible = marker.visible.join();\n\n    if (visible.toLowerCase().indexOf('high') > -1 || visible.toLowerCase().indexOf('low') > -1) {\n      var pointsYPos = locations.map(function (a) {\n        return a.markerPosition;\n      });\n      highPos = Math.min.apply(null, pointsYPos);\n      lowPos = Math.max.apply(null, pointsYPos);\n    }\n\n    this.negativePointIndexes = [];\n\n    var _loop_2 = function (i, length_1) {\n      temp = points[i];\n      option.id = id + i;\n      option.cx = temp.location.x;\n      option.cy = temp.location.y;\n      option.fill = marker.fill;\n      var render = visible.toLowerCase().indexOf('all') > -1;\n      render = this_2.getSpecialPoint(render, temp, spark, option, i, highPos, lowPos, length_1, visible.toLowerCase());\n      option.stroke = marker.border.color || option.fill;\n      var markerArgs = {\n        name: 'markerRendering',\n        cancel: false,\n        border: {\n          color: option.stroke,\n          width: marker.border.width\n        },\n        fill: option.fill,\n        pointIndex: i,\n        sparkline: !this_2.sparkline.isBlazor ? this_2.sparkline : null,\n        x: option.cx,\n        y: option.cy,\n        size: marker.size\n      };\n\n      if (this_2.sparkline.isBlazor) {\n        var blazormarkerArgs = __rest(markerArgs, []);\n\n        markerArgs = blazormarkerArgs;\n      }\n\n      this_2.sparkline.trigger('markerRendering', markerArgs, function (args) {\n        if (render && !markerArgs.cancel) {\n          option.id = id + i;\n          option.cx = markerArgs.x;\n          option.cy = markerArgs.y;\n          option.fill = markerArgs.fill;\n          option.stroke = markerArgs.border.color;\n          option['stroke-width'] = markerArgs.border.width;\n          option.r = markerArgs.size / 2;\n          var element = drawCircle(spark, option, group);\n          element.setAttribute('aria-label', spark.dataSource[i][spark.xName] + ' : ' + points[i].yVal);\n          group.appendChild(element);\n        }\n      });\n    };\n\n    var this_2 = this;\n\n    for (var i = 0, length_1 = points.length; i < length_1; i++) {\n      _loop_2(i, length_1);\n    }\n\n    this.sparkline.svgObject.appendChild(group);\n  };\n  /**\n   * To get special point color and option.\n   */\n\n\n  SparklineRenderer.prototype.getSpecialPoint = function (render, temp, spark, option, i, highPos, lowPos, length, visible) {\n    if (visible === void 0) {\n      visible = '';\n    }\n\n    if (temp.markerPosition > this.axisHeight) {\n      option.fill = spark.negativePointColor || option.fill;\n      this.negativePointIndexes.push(i);\n      render = render || visible.indexOf('negative') > -1;\n    }\n\n    if (i === 0) {\n      option.fill = spark.startPointColor || option.fill;\n      this.startPointIndex = i;\n      render = render || visible.indexOf('start') > -1;\n    } else if (i === length - 1) {\n      option.fill = spark.endPointColor || option.fill;\n      this.endPointIndex = i;\n      render = render || visible.indexOf('end') > -1;\n    }\n\n    if (temp.markerPosition === highPos) {\n      option.fill = spark.highPointColor || option.fill;\n      this.highPointIndex = i;\n      render = render || visible.indexOf('high') > -1;\n    } else if (temp.markerPosition === lowPos) {\n      option.fill = spark.lowPointColor || option.fill;\n      this.lowPointIndex = i;\n      render = render || visible.indexOf('low') > -1;\n    }\n\n    if (visible.indexOf('none') > -1) {\n      render = false;\n    }\n\n    return render;\n  };\n  /**\n   * To render data label for sparkline.\n   */\n\n\n  SparklineRenderer.prototype.renderLabel = function (points) {\n    var _this = this;\n\n    var spark = this.sparkline;\n    var dataLabel = spark.dataLabelSettings;\n    var color = dataLabel.textStyle.color || spark.sparkTheme.dataLabelColor;\n\n    if (spark.type === 'WinLoss' || !dataLabel.visible.length) {\n      return;\n    }\n\n    var locations = extend([], [], points);\n    var id = spark.element.id + '_sparkline_label_';\n    var group = this.sparkline.renderer.createGroup({\n      id: spark.element.id + '_sparkline_label_g',\n      style: 'pointer-events: none;'\n    });\n    var g;\n    var temp;\n    var textId = id + 'text_';\n    var rectId = id + 'rect_';\n    var option = new TextOption('', 0, 0, 'middle', '', 'middle');\n    var labelStyle = dataLabel.textStyle;\n    var pointsYPos = locations.map(function (a) {\n      return a.markerPosition;\n    });\n    var highPos = Math.min.apply(null, pointsYPos);\n    var lowPos = Math.max.apply(null, pointsYPos);\n    var space = 1;\n    var padding = dataLabel.fill !== 'transparent' || dataLabel.border.width ? 2 : 0;\n    var size = measureText('sparkline_measure_text', labelStyle);\n    var rectOptions = new RectOption('', dataLabel.fill, dataLabel.border, dataLabel.opacity, null);\n    var edgeLabelOption;\n    labelStyle.fontFamily = spark.sparkTheme.labelFontFamily || labelStyle.fontFamily;\n\n    var _loop_3 = function (i, length_2) {\n      temp = points[i];\n      option.id = textId + i;\n      option.x = temp.location.x + dataLabel.offset.x;\n      option.y = (spark.type === 'Pie' ? temp.location.y : temp.markerPosition > this_3.axisHeight ? temp.location.y + size.height / 2 + space + 2 + padding : temp.location.y - size.height / 2 - space - padding) + dataLabel.offset.y;\n      option.text = dataLabel.format !== '' ? this_3.formatter(dataLabel.format, this_3.sparkline.dataSource[i]) : temp.yVal.toString();\n      var labelArgs = {\n        name: 'dataLabelRendering',\n        cancel: false,\n        border: dataLabel.border,\n        fill: dataLabel.fill,\n        pointIndex: i,\n        sparkline: !this_3.sparkline.isBlazor ? this_3.sparkline : null,\n        x: option.x,\n        y: option.y,\n        text: option.text,\n        color: color\n      };\n\n      if (this_3.sparkline.isBlazor) {\n        var blazordataLabelArgs = __rest(labelArgs, []);\n\n        labelArgs = blazordataLabelArgs;\n      }\n\n      this_3.sparkline.trigger('dataLabelRendering', labelArgs, function (args) {\n        size = measureText(labelArgs.text, labelStyle);\n        option.text = labelArgs.text;\n        var renderLabel = dataLabel.visible.join().toLowerCase().indexOf('all') > -1;\n        renderLabel = _this.getLabelVisible(renderLabel, temp, i, dataLabel, length_2, highPos, lowPos);\n        edgeLabelOption = _this.arrangeLabelPosition(dataLabel.edgeLabelMode, renderLabel, labelArgs.x, i, length_2, size, padding);\n\n        if (renderLabel && !labelArgs.cancel && edgeLabelOption.render) {\n          rectOptions.id = rectId + i;\n          rectOptions.fill = labelArgs.fill;\n          rectOptions.stroke = labelArgs.border.color;\n          rectOptions['stroke-width'] = labelArgs.border.width;\n          option.y = labelArgs.y;\n          option.x = edgeLabelOption.x;\n          rectOptions.rect = new Rect(option.x - (size.width / 2 + padding), option.y - padding - size.height / 1.75, size.width + padding * 2, size.height + padding * 2);\n          g = _this.sparkline.renderer.createGroup({\n            id: id + 'g' + i\n          });\n          drawRectangle(spark, rectOptions, g);\n          renderTextElement(option, labelStyle, labelArgs.color, g);\n          group.appendChild(g);\n        }\n      });\n    };\n\n    var this_3 = this;\n\n    for (var i = 0, length_2 = points.length; i < length_2; i++) {\n      _loop_3(i, length_2);\n    }\n\n    this.sparkline.svgObject.appendChild(group);\n  };\n\n  SparklineRenderer.prototype.arrangeLabelPosition = function (edgeLabel, render, x, index, length, size, padding) {\n    if (edgeLabel === 'None') {\n      return {\n        x: x,\n        render: render\n      };\n    }\n\n    if (index === 0 && x - size.width / 2 - padding <= 0) {\n      if (edgeLabel === 'Hide') {\n        render = false;\n      } else {\n        x = this.sparkline.padding.left + padding + size.width / 2;\n      }\n    } else if (index === length - 1 && x + size.width / 2 + padding >= this.sparkline.availableSize.width) {\n      if (edgeLabel === 'Hide') {\n        render = false;\n      } else {\n        x -= size.width / 2 + padding;\n      }\n    }\n\n    return {\n      x: x,\n      render: render\n    };\n  };\n  /**\n   * To get special point color and option.\n   */\n\n\n  SparklineRenderer.prototype.getLabelVisible = function (render, temp, i, label, length, highPos, lowPos) {\n    var labelVisible = label.visible.join().toLowerCase();\n\n    if (temp.markerPosition > this.axisHeight) {\n      render = render || labelVisible.indexOf('negative') > -1;\n    }\n\n    if (i === 0) {\n      render = render || labelVisible.indexOf('start') > -1;\n    } else if (i === length - 1) {\n      render = render || labelVisible.indexOf('end') > -1;\n    }\n\n    if (temp.markerPosition === highPos) {\n      render = render || labelVisible.indexOf('high') > -1;\n    } else if (temp.markerPosition === lowPos) {\n      render = render || labelVisible.indexOf('low') > -1;\n    }\n\n    if (label.visible.join().toLowerCase().indexOf('none') > -1) {\n      render = false;\n    }\n\n    return render;\n  };\n  /**\n   * To format text\n   */\n\n\n  SparklineRenderer.prototype.formatter = function (format, data) {\n    if (isNullOrUndefined(format)) {\n      return null;\n    }\n\n    var keys = Object.keys(data);\n\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n      var key = keys_1[_i];\n      format = format.split('${' + key + '}').join(data[key]);\n    }\n\n    return format;\n  };\n  /**\n   * To calculate min max for x and y axis\n   */\n\n\n  SparklineRenderer.prototype.axisCalculation = function () {\n    this.findRanges(this.sparkline.sparklineData);\n  };\n  /**\n   * To find x axis interval.\n   */\n\n\n  SparklineRenderer.prototype.getInterval = function (data, x, type) {\n    var interval = 1;\n    var x1 = data[0][x];\n    var x2 = isNullOrUndefined(data[1]) ? undefined : data[1][x];\n\n    if (!isNullOrUndefined(x1) && !isNullOrUndefined(x2)) {\n      var temp = extend([], data);\n      var validData_1 = [];\n      temp.forEach(function (value) {\n        if (!isNullOrUndefined(value[x])) {\n          validData_1.push(value);\n        }\n      });\n      validData_1.sort(function (a, b) {\n        if (isNullOrUndefined(a[x]) || isNullOrUndefined(b[x])) {\n          return 0;\n        }\n\n        return a[x] - b[x];\n      });\n      validData_1 = this.sparkline.enableRtl ? validData_1.reverse() : validData_1;\n      interval = validData_1[1][x] - validData_1[0][x];\n    }\n\n    return interval;\n  };\n  /**\n   * To find x axis interval.\n   */\n\n\n  SparklineRenderer.prototype.getPaddingInterval = function (data, x, type, delta) {\n    var interval = 1;\n    var size = this.sparkline.availableSize.height;\n    var intervalCount = interval * data.length;\n    intervalCount = Math.max(size * (intervalCount / 100), 1);\n    var niceInterval = delta / intervalCount;\n    var minInterval = Math.pow(10, Math.floor(logBase(niceInterval, 10)));\n\n    for (var _i = 0, _a = this.sparkline.intervalDivs; _i < _a.length; _i++) {\n      var intervalVal = _a[_i];\n      var currentInterval = interval * intervalVal;\n\n      if (intervalCount < delta / currentInterval) {\n        break;\n      }\n\n      niceInterval = currentInterval;\n    }\n\n    return niceInterval;\n  };\n  /**\n   * To calculate axis ranges internally.\n   */\n  // tslint:disable-next-line:max-func-body-length\n\n\n  SparklineRenderer.prototype.findRanges = function (data) {\n    var model = this.sparkline;\n    var max;\n    var min;\n    var minX;\n    var maxX;\n    var maxPointsLength = data.length;\n    var temp;\n    var sumofValues = 0;\n    var isNumericArray = Array.isArray(data) && typeof data[0] !== 'object';\n\n    if (isNumericArray) {\n      if (model.type === 'Pie') {\n        for (var i = 0; i < maxPointsLength; i++) {\n          sumofValues += Math.abs(data[i]);\n        }\n      } else {\n        max = Math.max.apply(null, data);\n        min = Math.min.apply(null, data);\n        minX = 0;\n        maxX = maxPointsLength - 1;\n      }\n    } else {\n      if (model.type === 'Pie') {\n        for (var i = 0; i < maxPointsLength; i++) {\n          sumofValues += Math.abs(data[i][model.yName]);\n        }\n      } else {\n        if (isNullOrUndefined(data[0][model.xName])) {\n          var x_1 = data.map(function (z) {\n            return z[model.yName];\n          });\n          max = Math.max.apply(null, x_1);\n          min = Math.min.apply(null, x_1);\n        } else {\n          temp = extend([], data);\n          temp = temp.sort(function (a, b) {\n            return a[model.yName] - b[model.yName];\n          });\n          max = temp[temp.length - 1][model.yName];\n          min = temp[0][model.yName];\n        }\n\n        if (!isNullOrUndefined(data[0][model.xName])) {\n          temp = temp.sort(function (a, b) {\n            return a[model.xName] - b[model.xName];\n          });\n          temp = this.sparkline.enableRtl ? temp.reverse() : temp;\n          maxX = temp[temp.length - 1][model.xName];\n          minX = temp[0][model.xName];\n        } else {\n          minX = 0;\n          maxX = maxPointsLength - 1;\n        }\n      }\n    }\n\n    var y2;\n    var height;\n    var width;\n    var x1 = 0;\n    var y1;\n    var padding = model.padding;\n    var point;\n    var axis = model.axisSettings;\n    var value = axis.value;\n    var theme = model.theme.toLowerCase();\n\n    if (model.type !== 'Pie') {\n      this.maxLength = maxPointsLength;\n      height = model.availableSize.height - (padding.bottom + padding.top);\n      width = model.availableSize.width - (padding.left + padding.right);\n      maxX = isNullOrUndefined(axis.maxX) ? maxX : axis.maxX;\n      minX = isNullOrUndefined(axis.minX) ? minX : axis.minX;\n      max = isNullOrUndefined(axis.maxY) ? max : axis.maxY;\n      min = isNullOrUndefined(axis.minY) ? min : axis.minY;\n      var color = axis.lineSettings.color || this.sparkline.sparkTheme.axisLineColor;\n      var eventArgs = {\n        name: 'axisRendering',\n        cancel: false,\n        sparkline: !this.sparkline.isBlazor ? model : null,\n        maxX: maxX,\n        minX: minX,\n        maxY: max,\n        minY: min,\n        value: axis.value,\n        lineColor: color,\n        lineWidth: axis.lineSettings.width\n      };\n      model.trigger('axisRendering', eventArgs);\n\n      if (eventArgs.cancel) {\n        this.visiblePoints = [];\n        return;\n      }\n\n      maxX = eventArgs.maxX;\n      minX = eventArgs.minX;\n      max = eventArgs.maxY;\n      min = eventArgs.minY;\n      value = this.axisValue = eventArgs.value;\n      this.axisColor = eventArgs.lineColor;\n      this.axisWidth = eventArgs.lineWidth;\n    }\n\n    var unitX = maxX - minX;\n    var unitY = max - min;\n    unitX = unitX === 0 ? 1 : unitX;\n    unitY = unitY === 0 ? 1 : unitY;\n    this.unitX = unitX;\n    this.unitY = unitY;\n    this.min = min;\n    x1 = 0;\n    y1 = height - height / unitY * -min;\n    y1 = min < 0 && max <= 0 ? 0 : min < 0 && max > 0 ? y1 : height;\n\n    if (value >= min && value <= max) {\n      y1 = height - Math.round(height * ((value - min) / this.unitY));\n    }\n\n    this.axisHeight = y1 + padding.top;\n    var percent;\n    var x;\n    var y;\n    var visiblePoints = [];\n    var delta = max - min;\n    var interval = this.getInterval(data, model.xName, model.valueType);\n    var interVal = this.getPaddingInterval(data, model.xName, model.valueType, delta);\n\n    for (var i = 0; i < maxPointsLength; i++) {\n      if (isNullOrUndefined(data[i][model.xName]) && isNullOrUndefined(data[i][model.yName]) && data[i][model.yName] !== 0 && isNumericArray) {\n        x = i;\n        y = data[i];\n      } else if (isNullOrUndefined(data[i][model.xName])) {\n        x = i;\n        y = data[i][model.yName];\n      } else {\n        x = data[i][model.xName];\n        y = data[i][model.yName];\n      }\n\n      if (isNullOrUndefined(x) || isNullOrUndefined(y)) {\n        continue;\n      }\n\n      if (model.type === 'Line' || model.type === 'Area') {\n        y2 = min !== max && maxPointsLength !== 1 ? height - Math.round(height * ((y - min) / this.unitY)) : padding.top;\n        point = {\n          x: minX !== maxX ? Math.round(width * ((x - minX) / this.unitX)) : width / 2,\n          y: y2,\n          markerPosition: y2\n        };\n      } else if (model.type === 'Column' || model.type === 'WinLoss') {\n        var colWidth = width / ((maxX - minX) / interval + 1);\n        var calSpace = 0.5;\n        var space = calSpace * 2; //calspace is default space for column and winloss\n\n        colWidth -= space;\n        x1 = (x - minX) / interval * (colWidth + space) + space / 2;\n\n        if (model.type === 'WinLoss') {\n          // win or gain column height half of the height , draw(zero) height factor\n          var winLossFactor = 0.5;\n          var drawHeightFactor = 40;\n          y2 = y > value ? height / 4 : y < value ? height * winLossFactor : height * winLossFactor - height / drawHeightFactor;\n          point = {\n            x: x1,\n            y: y2,\n            height: y !== value ? height / 4 : height / 20,\n            width: colWidth,\n            markerPosition: y2 > y1 ? y1 + Math.abs(y2 - y1) : y2\n          };\n        } else {\n          if (i === 0 && model.rangePadding !== 'None') {\n            min -= model.rangePadding === 'Additional' ? interVal + padding.top : interVal;\n            max += model.rangePadding === 'Additional' ? interVal + padding.top : interVal;\n            unitX = maxX - minX;\n            unitY = max - min;\n            unitX = unitX === 0 ? 1 : unitX;\n            unitY = unitY === 0 ? 1 : unitY;\n            this.unitX = unitX;\n            this.unitY = unitY;\n            this.min = min;\n          }\n\n          var z = height / this.unitY * (y - min);\n          var z1 = y === min && y > value ? maxPointsLength !== 1 && this.unitY !== 1 ? height / this.unitY * (min / 2) : z | 1 : y === max && y < value && maxPointsLength !== 1 && this.unitY !== 1 ? height / this.unitY * (-max / 2) : z;\n          y2 = Math.abs(height - z1);\n          point = {\n            x: x1,\n            y: y2 > y1 ? y1 : y2,\n            height: Math.abs(y2 - y1),\n            width: colWidth,\n            markerPosition: y2 > y1 ? y1 + Math.abs(y2 - y1) : y2\n          };\n        }\n      } else if (model.type === 'Pie') {\n        percent = Math.abs(y) / sumofValues * 100;\n        point = {\n          percent: percent,\n          degree: Math.abs(y) / sumofValues * 360\n        };\n      }\n\n      if (model.type !== 'Pie') {\n        point.x += padding.left;\n        point.y += padding.top;\n      }\n\n      if (model.type !== 'WinLoss') {\n        point.markerPosition += padding.top;\n      }\n\n      point.location = {\n        x: point.x,\n        y: point.y\n      };\n      point.xVal = x;\n      point.yVal = y;\n      visiblePoints.push(point);\n    }\n\n    visiblePoints.sort(function (a, b) {\n      return a.x - b.x;\n    });\n    this.visiblePoints = visiblePoints;\n  };\n  /**\n   * To render the sparkline axis\n   */\n\n\n  SparklineRenderer.prototype.drawAxis = function () {\n    var spark = this.sparkline;\n    var height = this.axisHeight;\n\n    if (spark.type !== 'WinLoss' && spark.type !== 'Pie' && spark.axisSettings.lineSettings.visible) {\n      var xAxis = {\n        'id': spark.element.id + '_Sparkline_XAxis',\n        'x1': spark.padding.left,\n        'y1': height,\n        'x2': spark.availableSize.width - spark.padding.right,\n        'y2': height,\n        'stroke': this.axisColor,\n        'opacity': spark.axisSettings.lineSettings.opacity,\n        'stroke-dasharray': spark.axisSettings.lineSettings.dashArray,\n        'stroke-width': this.axisWidth,\n        'clip-path': 'url(#' + this.clipId + ')'\n      };\n      spark.svgObject.appendChild(spark.renderer.drawLine(xAxis));\n    }\n  };\n  /**\n   * To trigger point render event\n   */\n\n\n  SparklineRenderer.prototype.triggerPointRender = function (name, i, fill, border) {\n    var args = {\n      name: name,\n      cancel: false,\n      border: border,\n      fill: fill,\n      sparkline: !this.sparkline.isBlazor ? this.sparkline : null,\n      pointIndex: i\n    };\n    this.sparkline.trigger(name, args);\n    return args;\n  };\n\n  return SparklineRenderer;\n}();\n\nexport { SparklineRenderer };","map":{"version":3,"sources":["C:/Users/Power GSM/Desktop/React-Fito-v1.0-9-April-2021V/React-Fito-v1.0-9-April-2021V/react-fito/node_modules/@syncfusion/ej2-charts/src/sparkline/rendering/sparkline-renderer.js"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","extend","isNullOrUndefined","logBase","PathOption","drawPath","drawRectangle","RectOption","Rect","CircleOption","drawCircle","measureText","renderTextElement","TextOption","DataManager","Query","SparklineRenderer","sparkline","processData","data","dataSource","isNaN","valueType","enableRtl","reverse","sparklineData","axisCalculation","processDataManager","_this","dataModule","queryModule","query","dataManager","executeQuery","then","setProperties","processSparklineData","processCategory","x","y","xName","yName","temp","xValues","forEach","value","index","push","currentData","processDateTime","getTime","renderSeries","spark","clipId","element","id","drawAxis","argsData","name","cancel","lineWidth","border","fill","isBlazor","seriesRenderingSuccess","args","visiblePoints","type","rangeBandSettings","group","renderer","createGroup","axisSettings","minY","startRange","maxY","endRange","rangeBand","svgObject","appendChild","renderMarker","renderLabel","bind","trigger","model","height","availableSize","padding","top","width","left","stValue","edValue","stHeight","unitY","min","edHeight","color","sparkTheme","rangeBandColor","path","pathOption","opacity","renderLine","points","g","theme","axisLineColor","d","len","renderPie","bottom","right","area","X","Y","deg","stRad","edRad","stroke","strokeWidth","colors","palette","low","high","locations","highPointColor","lowPointColor","pointsYvalues","map","a","yVal","Math","apply","max","negativePointIndexes","stDeg","edDeg","flag","PI","sX","cos","sY","sin","eX","eY","pathArc","getPieSpecialPoint","pointArgs","triggerPointRender","setAttribute","diffRadian","mid","location","option","negativePointColor","startPointColor","startPointIndex","endPointColor","endPointIndex","highPointIndex","lowPointIndex","renderArea","str","axisHeight","renderColumn","lowPos","highPos","pointsYPos","markerPosition","rectOptions","paletteLength","_loop_1","rect","this_1","getSpecialPoint","pointIndex","blazorpointArgs","eventArgs","renderWinLoss","options","axisValue","tiePointColor","marker","markerSettings","visible","size","join","toLowerCase","_loop_2","length_1","cx","cy","render","this_2","markerArgs","blazormarkerArgs","r","dataLabel","dataLabelSettings","textStyle","dataLabelColor","style","textId","rectId","labelStyle","space","edgeLabelOption","fontFamily","labelFontFamily","_loop_3","length_2","offset","this_3","text","format","formatter","toString","labelArgs","blazordataLabelArgs","getLabelVisible","arrangeLabelPosition","edgeLabelMode","edgeLabel","label","labelVisible","keys","_i","keys_1","key","split","findRanges","getInterval","interval","x1","x2","undefined","validData_1","sort","b","getPaddingInterval","delta","intervalCount","niceInterval","minInterval","pow","floor","_a","intervalDivs","intervalVal","currentInterval","minX","maxX","maxPointsLength","sumofValues","isNumericArray","Array","isArray","abs","x_1","z","y2","y1","point","axis","maxLength","lineSettings","lineColor","axisColor","axisWidth","unitX","round","percent","interVal","colWidth","calSpace","winLossFactor","drawHeightFactor","rangePadding","z1","degree","xVal","xAxis","dashArray","drawLine"],"mappings":"AAAA,IAAIA,MAAM,GAAI,QAAQ,KAAKA,MAAd,IAAyB,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAClD,MAAIC,CAAC,GAAG,EAAR;;AACA,OAAK,IAAIC,CAAT,IAAcH,CAAd,EAAiB,IAAII,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCP,CAArC,EAAwCG,CAAxC,KAA8CF,CAAC,CAACO,OAAF,CAAUL,CAAV,IAAe,CAAjE,EACbD,CAAC,CAACC,CAAD,CAAD,GAAOH,CAAC,CAACG,CAAD,CAAR;;AACJ,MAAIH,CAAC,IAAI,IAAL,IAAa,OAAOI,MAAM,CAACK,qBAAd,KAAwC,UAAzD,EACI,KAAK,IAAIC,CAAC,GAAG,CAAR,EAAWP,CAAC,GAAGC,MAAM,CAACK,qBAAP,CAA6BT,CAA7B,CAApB,EAAqDU,CAAC,GAAGP,CAAC,CAACQ,MAA3D,EAAmED,CAAC,EAApE,EAAwE,IAAIT,CAAC,CAACO,OAAF,CAAUL,CAAC,CAACO,CAAD,CAAX,IAAkB,CAAtB,EACpER,CAAC,CAACC,CAAC,CAACO,CAAD,CAAF,CAAD,GAAUV,CAAC,CAACG,CAAC,CAACO,CAAD,CAAF,CAAX;AACR,SAAOR,CAAP;AACH,CARD;;AASA,SAASU,MAAT,EAAiBC,iBAAjB,QAA0C,sBAA1C;AACA,SAASC,OAAT,QAAwB,2BAAxB;AACA,SAASC,UAAT,EAAqBC,QAArB,EAA+BC,aAA/B,EAA8CC,UAA9C,EAA0DC,IAA1D,EAAgEC,YAAhE,EAA8EC,UAA9E,QAAgG,iBAAhG;AACA,SAASC,WAAT,EAAsBC,iBAAtB,EAAyCC,UAAzC,QAA2D,iBAA3D;AACA,SAASC,WAAT,EAAsBC,KAAtB,QAAmC,sBAAnC;AACA;AACA;AACA;;AACA,IAAIC,iBAAiB;AAAG;AAAe,YAAY;AAC/C;AACJ;AACA;AACA;AACI,WAASA,iBAAT,CAA2BC,SAA3B,EAAsC;AAClC,SAAKA,SAAL,GAAiBA,SAAjB;AACH;AACD;AACJ;AACA;;;AACID,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4BwB,WAA5B,GAA0C,YAAY;AAClD,QAAIC,IAAI,GAAG,KAAKF,SAAL,CAAeG,UAA1B;;AACA,QAAIlB,iBAAiB,CAACiB,IAAD,CAAjB,IAA2B,CAACA,IAAI,CAACnB,MAArC,EAA6C;AACzC;AACH,KAFD,MAGK,IAAI,CAACqB,KAAK,CAAC,KAAKJ,SAAL,CAAeG,UAAf,CAA0B,CAA1B,CAAD,CAAN,IAAwC,KAAKH,SAAL,CAAeK,SAAf,KAA6B,SAAzE,EAAoF;AACrFH,MAAAA,IAAI,GAAI,KAAKF,SAAL,CAAeM,SAAhB,GAA6BJ,IAAI,CAACK,OAAL,EAA7B,GAA8CL,IAArD;AACA,WAAKF,SAAL,CAAeQ,aAAf,GAA+BN,IAA/B,CAFqF,CAEhD;AACxC,KAHI,MAIA;AACD,WAAK,YAAY,KAAKF,SAAL,CAAeK,SAAhC;AACH;;AACD,SAAKI,eAAL;AACH,GAbD;AAcA;;AACA;;;AACAV,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4BiC,kBAA5B,GAAiD,YAAY;AACzD,QAAIC,KAAK,GAAG,IAAZ;;AACA,QAAIC,UAAJ;AACA,QAAIC,WAAJ;;AACA,QAAI,KAAKb,SAAL,CAAeG,UAAf,YAAqCN,WAAzC,EAAsD;AAClDe,MAAAA,UAAU,GAAG,KAAKZ,SAAL,CAAeG,UAA5B;AACAU,MAAAA,WAAW,GAAG,KAAKb,SAAL,CAAec,KAAf,YAAgChB,KAAhC,GAAwC,KAAKE,SAAL,CAAec,KAAvD,GAA+D,IAAIhB,KAAJ,EAA7E;AACA,UAAIiB,WAAW,GAAGH,UAAU,CAACI,YAAX,CAAwBH,WAAxB,CAAlB;AACAE,MAAAA,WAAW,CAACE,IAAZ,CAAiB,UAAU5C,CAAV,EAAa;AAC1BsC,QAAAA,KAAK,CAACX,SAAN,CAAgBkB,aAAhB,CAA8B;AAAEf,UAAAA,UAAU,EAAE9B,CAAC,CAAC,QAAD;AAAf,SAA9B,EAA2D,IAA3D;;AACAsC,QAAAA,KAAK,CAACX,SAAN,CAAgBQ,aAAhB,GAAgCG,KAAK,CAACX,SAAN,CAAgBG,UAAhD;;AACAQ,QAAAA,KAAK,CAACX,SAAN,CAAgBmB,oBAAhB;AACH,OAJD;AAKH,KATD,MAUK;AACD,WAAKnB,SAAL,CAAemB,oBAAf;AACH;AACJ,GAjBD;AAkBA;AACJ;AACA;;;AACIpB,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4B2C,eAA5B,GAA8C,UAAUlB,IAAV,EAAgBmB,CAAhB,EAAmBC,CAAnB,EAAsB;AAChE,QAAIX,KAAK,GAAG,IAAZ;;AACA,QAAIT,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAEA,MAAAA,IAAI,GAAG,KAAKF,SAAL,CAAeG,UAAtB;AAAmC;;AAC1D,QAAIkB,CAAC,KAAK,KAAK,CAAf,EAAkB;AAAEA,MAAAA,CAAC,GAAG,KAAKrB,SAAL,CAAeuB,KAAnB;AAA2B;;AAC/C,QAAID,CAAC,KAAK,KAAK,CAAf,EAAkB;AAAEA,MAAAA,CAAC,GAAG,KAAKtB,SAAL,CAAewB,KAAnB;AAA2B;;AAC/C,QAAIC,IAAI,GAAG,EAAX;AACA,QAAIC,OAAO,GAAG,EAAd;AACAxB,IAAAA,IAAI,CAACyB,OAAL,CAAa,UAAUC,KAAV,EAAiBC,KAAjB,EAAwB;AACjC,UAAIH,OAAO,CAAC9C,OAAR,CAAgBgD,KAAK,CAACP,CAAD,CAArB,MAA8B,CAAC,CAAnC,EAAsC;AAClCK,QAAAA,OAAO,CAACI,IAAR,CAAaF,KAAK,CAACP,CAAD,CAAlB;AACH;;AACD,UAAIU,WAAW,GAAG,EAAlB;AACAA,MAAAA,WAAW,CAACpB,KAAK,CAACX,SAAN,CAAgBuB,KAAjB,CAAX,GAAqCG,OAAO,CAAC9C,OAAR,CAAgBgD,KAAK,CAACP,CAAD,CAArB,CAArC;AACAU,MAAAA,WAAW,CAACpB,KAAK,CAACX,SAAN,CAAgBwB,KAAjB,CAAX,GAAqCI,KAAK,CAACN,CAAD,CAA1C;AACAG,MAAAA,IAAI,CAACK,IAAL,CAAUC,WAAV;AACH,KARD;AASA,SAAK/B,SAAL,CAAeQ,aAAf,GAA+BiB,IAA/B;AACH,GAjBD;AAkBA;AACJ;AACA;;;AACI1B,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4BuD,eAA5B,GAA8C,UAAU9B,IAAV,EAAgBmB,CAAhB,EAAmBC,CAAnB,EAAsB;AAChE,QAAIpB,IAAI,KAAK,KAAK,CAAlB,EAAqB;AAAEA,MAAAA,IAAI,GAAG,KAAKF,SAAL,CAAeG,UAAtB;AAAmC;;AAC1D,QAAIkB,CAAC,KAAK,KAAK,CAAf,EAAkB;AAAEA,MAAAA,CAAC,GAAG,KAAKrB,SAAL,CAAeuB,KAAnB;AAA2B;;AAC/C,QAAID,CAAC,KAAK,KAAK,CAAf,EAAkB;AAAEA,MAAAA,CAAC,GAAG,KAAKtB,SAAL,CAAewB,KAAnB;AAA2B;;AAC/C,QAAIC,IAAI,GAAG,EAAX;AACAvB,IAAAA,IAAI,CAACyB,OAAL,CAAa,UAAUC,KAAV,EAAiBC,KAAjB,EAAwB;AACjC,UAAIE,WAAW,GAAG,EAAlB;AACAA,MAAAA,WAAW,CAACV,CAAD,CAAX,GAAiBO,KAAK,CAACP,CAAD,CAAL,CAASY,OAAT,EAAjB;AACAF,MAAAA,WAAW,CAACT,CAAD,CAAX,GAAiBM,KAAK,CAACN,CAAD,CAAtB;AACAG,MAAAA,IAAI,CAACK,IAAL,CAAUC,WAAV;AACH,KALD;AAMA,SAAK/B,SAAL,CAAeQ,aAAf,GAA+BiB,IAA/B;AACH,GAZD;AAaA;AACJ;AACA;AACA;;;AACI1B,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4ByD,YAA5B,GAA2C,YAAY;AACnD,QAAIvB,KAAK,GAAG,IAAZ;;AACA,QAAIwB,KAAK,GAAG,KAAKnC,SAAjB;AACA,SAAKoC,MAAL,GAAcD,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,sBAAjC;AACA,SAAKC,QAAL;AACA,QAAIC,QAAQ,GAAG;AACXC,MAAAA,IAAI,EAAE,iBADK;AAEXC,MAAAA,MAAM,EAAE,KAFG;AAGXC,MAAAA,SAAS,EAAER,KAAK,CAACQ,SAHN;AAIXC,MAAAA,MAAM,EAAET,KAAK,CAACS,MAJH;AAKXC,MAAAA,IAAI,EAAEV,KAAK,CAACU,IALD;AAMX7C,MAAAA,SAAS,EAAE,CAAC,KAAKA,SAAL,CAAe8C,QAAhB,GAA2BX,KAA3B,GAAmC;AANnC,KAAf;;AAQA,QAAIY,sBAAsB,GAAG,UAAUC,IAAV,EAAgB;AACzC,UAAI,CAACrC,KAAK,CAACsC,aAAP,IAAwBD,IAAI,CAACN,MAAjC,EAAyC;AACrC;AACH;;AACD,UAAIP,KAAK,CAACe,IAAN,KAAe,KAAf,IAAwBf,KAAK,CAACe,IAAN,KAAe,SAAvC,IAAoDf,KAAK,CAACgB,iBAAN,CAAwBpE,MAAhF,EAAwF;AACpF,YAAIqE,KAAK,GAAGzC,KAAK,CAACX,SAAN,CAAgBqD,QAAhB,CAAyBC,WAAzB,CAAqC;AAAEhB,UAAAA,EAAE,EAAE3B,KAAK,CAACX,SAAN,CAAgBqC,OAAhB,CAAwBC,EAAxB,GAA6B;AAAnC,SAArC,CAAZ;;AACA,aAAK,IAAIxD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqD,KAAK,CAACgB,iBAAN,CAAwBpE,MAA5C,EAAoDD,CAAC,EAArD,EAAyD;AACrD,cAAKqD,KAAK,CAACoB,YAAN,CAAmBC,IAAnB,IAA2BrB,KAAK,CAACgB,iBAAN,CAAwBrE,CAAxB,EAA2B2E,UAAvD,IACCtB,KAAK,CAACoB,YAAN,CAAmBG,IAAnB,IAA2BvB,KAAK,CAACgB,iBAAN,CAAwBrE,CAAxB,EAA2B6E,QAD3D,EACsE;AAClEhD,YAAAA,KAAK,CAACiD,SAAN,CAAgBzB,KAAK,CAACgB,iBAAN,CAAwBrE,CAAxB,CAAhB,EAA4CsE,KAA5C,EAAmDtE,CAAnD;AACH;AACJ;;AACD6B,QAAAA,KAAK,CAACX,SAAN,CAAgB6D,SAAhB,CAA0BC,WAA1B,CAAsCV,KAAtC;AACH;;AACDzC,MAAAA,KAAK,CAAC,WAAWwB,KAAK,CAACe,IAAlB,CAAL,CAA6BvC,KAAK,CAACsC,aAAnC,EAAkDD,IAAlD;;AACArC,MAAAA,KAAK,CAACoD,YAAN,CAAmBpD,KAAK,CAACsC,aAAzB;;AACAtC,MAAAA,KAAK,CAACqD,WAAN,CAAkBrD,KAAK,CAACsC,aAAxB;AACH,KAjBD;;AAkBAF,IAAAA,sBAAsB,CAACkB,IAAvB,CAA4B,IAA5B;AACA9B,IAAAA,KAAK,CAAC+B,OAAN,CAAc,iBAAd,EAAiC1B,QAAjC,EAA2CO,sBAA3C;AACH,GAjCD;AAkCA;AACJ;AACA;;;AACIhD,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4BmF,SAA5B,GAAwC,UAAUT,iBAAV,EAA6BC,KAA7B,EAAoCvB,KAApC,EAA2C;AAC/E,QAAIsC,KAAK,GAAG,KAAKnE,SAAjB;AACA,QAAIoE,MAAM,GAAID,KAAK,CAACE,aAAN,CAAoBD,MAArB,GAA+BD,KAAK,CAACG,OAAN,CAAcC,GAAd,GAAoB,CAAhE;AACA,QAAIC,KAAK,GAAIL,KAAK,CAACE,aAAN,CAAoBG,KAArB,GAA8BL,KAAK,CAACG,OAAN,CAAcG,IAAd,GAAqB,CAA/D;AACA,QAAIC,OAAO,GAAGvB,iBAAiB,CAACM,UAAhC;AACA,QAAIkB,OAAO,GAAGxB,iBAAiB,CAACQ,QAAhC;AACA,QAAIiB,QAAQ,GAAIR,MAAM,GAAKA,MAAM,GAAG,KAAKS,KAAf,IAAyBH,OAAO,GAAG,KAAKI,GAAxC,CAAX,GAA4DX,KAAK,CAACG,OAAN,CAAcC,GAAzF;AACA,QAAIQ,QAAQ,GAAIX,MAAM,GAAKA,MAAM,GAAG,KAAKS,KAAf,IAAyBF,OAAO,GAAG,KAAKG,GAAxC,CAAX,GAA4DX,KAAK,CAACG,OAAN,CAAcC,GAAzF;AACA,QAAIS,KAAK,GAAG7B,iBAAiB,CAAC6B,KAAlB,IAA2B,KAAKhF,SAAL,CAAeiF,UAAf,CAA0BC,cAAjE;;AACA,QAAIH,QAAQ,GAAIX,MAAM,GAAGD,KAAK,CAACG,OAAN,CAAcC,GAAvC,EAA6C;AACzCQ,MAAAA,QAAQ,GAAIX,MAAM,GAAGD,KAAK,CAACG,OAAN,CAAcC,GAAnC;AACH,KAFD,MAGK,IAAIQ,QAAQ,GAAI,IAAIZ,KAAK,CAACG,OAAN,CAAcC,GAAlC,EAAwC;AACzCQ,MAAAA,QAAQ,GAAI,IAAIZ,KAAK,CAACG,OAAN,CAAcC,GAA9B;AACH;;AACD,QAAIK,QAAQ,GAAIR,MAAM,GAAGD,KAAK,CAACG,OAAN,CAAcC,GAAvC,EAA6C;AACzCK,MAAAA,QAAQ,GAAIR,MAAM,GAAGD,KAAK,CAACG,OAAN,CAAcC,GAAnC;AACH,KAFD,MAGK,IAAIK,QAAQ,GAAI,IAAIT,KAAK,CAACG,OAAN,CAAcC,GAAlC,EAAwC;AACzCK,MAAAA,QAAQ,GAAI,IAAIT,KAAK,CAACG,OAAN,CAAcC,GAA9B;AACH;;AACD,QAAIY,IAAI,GAAG,OAAQhB,KAAK,CAACG,OAAN,CAAcG,IAAtB,GAA8B,GAA9B,GAAoCG,QAApC,GAA+C,KAA/C,IAAwDJ,KAAK,GAAIL,KAAK,CAACG,OAAN,CAAcG,IAA/E,IAAwF,GAAxF,GAA8FG,QAA9F,GACP,KADO,IACEJ,KAAK,GAAIL,KAAK,CAACG,OAAN,CAAcG,IADzB,IACkC,GADlC,GACwCM,QADxC,GACmD,KADnD,GAC4DZ,KAAK,CAACG,OAAN,CAAcG,IAD1E,GACkF,GADlF,GACwFM,QADxF,GACmG,KAD9G;AAEA,QAAIK,UAAU,GAAG;AACb,YAAMjB,KAAK,CAAC9B,OAAN,CAAcC,EAAd,GAAmB,aAAnB,GAAmCT,KAD5B;AAEb,cAAQmD,KAFK;AAGb,iBAAW7B,iBAAiB,CAACkC,OAHhB;AAIb,gBAAU,aAJG;AAKb,sBAAgBlB,KAAK,CAACxB,SALT;AAMb,WAAKwC,IANQ;AAOb,0BAAoB;AAPP,KAAjB;AASA/F,IAAAA,QAAQ,CAAC,KAAKY,SAAN,EAAiBoF,UAAjB,EAA6BhC,KAA7B,CAAR;AACH,GAjCD;AAkCA;AACJ;AACA;;;AACIrD,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4B6G,UAA5B,GAAyC,UAAUC,MAAV,EAAkBvC,IAAlB,EAAwB;AAC7D,QAAIb,KAAK,GAAG,KAAKnC,SAAjB;AACA,QAAIwF,CAAC,GAAG,KAAKxF,SAAL,CAAeqD,QAAf,CAAwBC,WAAxB,CAAoC;AACxChB,MAAAA,EAAE,EAAEH,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,cADiB;AAExC,mBAAa,UAAU,KAAKF,MAAf,GAAwB;AAFG,KAApC,CAAR;AAIA,QAAI4C,KAAK,GAAG,KAAKhF,SAAL,CAAe6C,IAA3B;AACAmC,IAAAA,KAAK,GAAI,KAAKhF,SAAL,CAAe6C,IAAf,KAAwB,SAAxB,IAAqC,KAAK7C,SAAL,CAAeyF,KAAf,KAAyB,YAA/D,GACF,KAAKzF,SAAL,CAAeiF,UAAf,CAA0BS,aADxB,GACwCV,KADhD;AAEA,QAAII,UAAU,GAAG,IAAIjG,UAAJ,CAAegD,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,iBAAlC,EAAqD,aAArD,EAAoEU,IAAI,CAACL,SAAzE,EAAoFqC,KAApF,EAA2F7C,KAAK,CAACkD,OAAjG,CAAjB;AACA,QAAIM,CAAC,GAAG,EAAR;;AACA,SAAK,IAAI7G,CAAC,GAAG,CAAR,EAAW8G,GAAG,GAAGL,MAAM,CAACxG,MAA7B,EAAqCD,CAAC,GAAG8G,GAAzC,EAA8C9G,CAAC,EAA/C,EAAmD;AAC/C,UAAIA,CAAC,KAAK,CAAV,EAAa;AACT6G,QAAAA,CAAC,GAAG,OAAOJ,MAAM,CAAC,CAAD,CAAN,CAAUlE,CAAjB,GAAqB,GAArB,GAA2BkE,MAAM,CAACzG,CAAD,CAAN,CAAUwC,CAArC,GAAyC,GAA7C;AACH;;AACDqE,MAAAA,CAAC,IAAI,OAAOJ,MAAM,CAACzG,CAAD,CAAN,CAAUuC,CAAjB,GAAqB,GAArB,GAA2BkE,MAAM,CAACzG,CAAD,CAAN,CAAUwC,CAArC,GAAyC,GAA9C;AACH;;AACD8D,IAAAA,UAAU,CAACO,CAAX,GAAeA,CAAf;AACAvG,IAAAA,QAAQ,CAAC,KAAKY,SAAN,EAAiBoF,UAAjB,EAA6BI,CAA7B,CAAR;AACA,SAAKxF,SAAL,CAAe6D,SAAf,CAAyBC,WAAzB,CAAqC0B,CAArC;AACH,GApBD;AAqBA;AACJ;AACA;;AACI;;;AACAzF,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4BoH,SAA5B,GAAwC,UAAUN,MAAV,EAAkBvC,IAAlB,EAAwB;AAC5D,QAAIb,KAAK,GAAG,KAAKnC,SAAjB;AACA,QAAIoE,MAAM,GAAGjC,KAAK,CAACkC,aAAN,CAAoBD,MAApB,IAA8BjC,KAAK,CAACmC,OAAN,CAAcC,GAAd,GAAoBpC,KAAK,CAACmC,OAAN,CAAcwB,MAAhE,CAAb;AACA,QAAItB,KAAK,GAAGrC,KAAK,CAACkC,aAAN,CAAoBG,KAApB,IAA6BrC,KAAK,CAACmC,OAAN,CAAcG,IAAd,GAAqBtC,KAAK,CAACmC,OAAN,CAAcyB,KAAhE,CAAZ;AACA,QAAIC,IAAI,GAAI5B,MAAM,IAAII,KAAX,GAAoBJ,MAAM,GAAG,CAA7B,GAAiCI,KAAK,GAAG,CAApD;AACA,QAAIyB,CAAC,GAAG9D,KAAK,CAACkC,aAAN,CAAoBG,KAApB,GAA4B,CAApC,CAL4D,CAKrB;;AACvC,QAAI0B,CAAC,GAAG/D,KAAK,CAACkC,aAAN,CAAoBD,MAApB,GAA6B,CAArC,CAN4D,CAMpB;;AACxC,QAAI+B,GAAG,GAAG,CAAV;AACA,QAAIC,KAAJ;AACA,QAAIC,KAAJ;AACA,QAAIC,MAAM,GAAGtD,IAAI,CAACJ,MAAL,CAAYoC,KAAzB;AACA,QAAIK,OAAO,GAAGlD,KAAK,CAACkD,OAApB;AACA,QAAIkB,WAAW,GAAGvD,IAAI,CAACJ,MAAL,CAAY4B,KAA9B;AACA,QAAIgC,MAAM,GAAIrE,KAAK,CAACsE,OAAN,CAAc1H,MAAf,GAAyBoD,KAAK,CAACsE,OAA/B,GAAyC,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,EAA6C,SAA7C,EAClD,SADkD,EACvC,SADuC,EAC5B,SAD4B,EACjB,SADiB,EACN,SADM,CAAtD;AAEA,QAAIrD,KAAK,GAAG,KAAKpD,SAAL,CAAeqD,QAAf,CAAwBC,WAAxB,CAAoC;AAAEhB,MAAAA,EAAE,EAAEH,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB;AAAzB,KAApC,CAAZ;AACA,QAAIoE,GAAJ;AACA,QAAIC,IAAJ;AACA,QAAIC,SAAS,GAAG5H,MAAM,CAAC,EAAD,EAAK,EAAL,EAASuG,MAAT,CAAtB;;AACA,QAAIpD,KAAK,CAAC0E,cAAN,IAAwB1E,KAAK,CAAC2E,aAAlC,EAAiD;AAC7C,UAAIC,aAAa,GAAGH,SAAS,CAACI,GAAV,CAAc,UAAUC,CAAV,EAAa;AAAE,eAAOA,CAAC,CAACC,IAAT;AAAgB,OAA7C,CAApB;AACAR,MAAAA,GAAG,GAAGS,IAAI,CAACrC,GAAL,CAASsC,KAAT,CAAe,IAAf,EAAqBL,aAArB,CAAN;AACAJ,MAAAA,IAAI,GAAGQ,IAAI,CAACE,GAAL,CAASD,KAAT,CAAe,IAAf,EAAqBL,aAArB,CAAP;AACH;;AACD,SAAKO,oBAAL,GAA4B,EAA5B;;AACA,SAAK,IAAIxI,CAAC,GAAG,CAAR,EAAWyI,KAAK,GAAG,EAAnB,EAAuBC,KAAK,GAAG,KAAK,CAApC,EAAuCC,IAAI,GAAG,KAAK,CAAxD,EAA2D3I,CAAC,GAAGyG,MAAM,CAACxG,MAAtE,EAA8ED,CAAC,EAA/E,EAAmF;AAC/EyI,MAAAA,KAAK,IAAIpB,GAAT;AACAA,MAAAA,GAAG,GAAGZ,MAAM,CAACzG,CAAD,CAAN,CAAU,QAAV,CAAN;AACA0I,MAAAA,KAAK,GAAGD,KAAK,GAAGpB,GAAhB;AACAC,MAAAA,KAAK,GAAG,CAACmB,KAAK,GAAG,EAAT,IAAeJ,IAAI,CAACO,EAApB,GAAyB,KAAjC;AACArB,MAAAA,KAAK,GAAG,CAACmB,KAAK,GAAG,EAAT,IAAeL,IAAI,CAACO,EAApB,GAAyB,KAAjC;AACAnC,MAAAA,MAAM,CAACzG,CAAD,CAAN,CAAU,OAAV,IAAqBsH,KAArB;AACAb,MAAAA,MAAM,CAACzG,CAAD,CAAN,CAAU,QAAV,IAAsBuH,KAAtB;AACAoB,MAAAA,IAAI,GAAItB,GAAG,GAAG,GAAP,GAAc,GAAd,GAAoB,GAA3B;AACA,UAAI1E,IAAI,GAAG8D,MAAM,CAACzG,CAAD,CAAN,CAAU,aAAV,IAA2B;AAClC6I,QAAAA,EAAE,EAAE1B,CAAC,GAAID,IAAI,GAAGmB,IAAI,CAACS,GAAL,CAASxB,KAAT,CADkB;AACAyB,QAAAA,EAAE,EAAE3B,CAAC,GAClCF,IAAI,GAAGmB,IAAI,CAACW,GAAL,CAAS1B,KAAT,CAFsB;AAEJ2B,QAAAA,EAAE,EAAE9B,CAAC,GAAID,IAAI,GAAGmB,IAAI,CAACS,GAAL,CAASvB,KAAT,CAFZ;AAE8B2B,QAAAA,EAAE,EAAE9B,CAAC,GAAIF,IAAI,GAAGmB,IAAI,CAACW,GAAL,CAASzB,KAAT;AAF9C,OAAtC;AAIA,UAAI4B,OAAO,GAAG,OAAOhC,CAAP,GAAW,GAAX,GAAiBC,CAAjB,GAAqB,KAArB,GAA6BzE,IAAI,CAAC,IAAD,CAAjC,GAA0C,GAA1C,GAAgDA,IAAI,CAAC,IAAD,CAApD,GAA6D,KAA7D,GAAqEuE,IAArE,GAA4E,GAA5E,GACVA,IADU,GACH,KADG,GACKyB,IADL,GACY,KADZ,GACoBhG,IAAI,CAAC,IAAD,CADxB,GACiC,GADjC,GACuCA,IAAI,CAAC,IAAD,CAD3C,GACoD,IADlE;AAEA,UAAI2D,UAAU,GAAG;AACb,cAAMjD,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,iBAAnB,GAAuCxD,CADhC;AAEb,mBAAWuG,OAFE;AAGb,gBAAQmB,MAAM,CAAC1H,CAAC,GAAG0H,MAAM,CAACzH,MAAZ,CAHD;AAIb,kBAAUuH,MAJG;AAKb,wBAAgBC,WALH;AAMb,aAAK0B,OANQ;AAOb,4BAAoB;AAPP,OAAjB;AASA,WAAKC,kBAAL,CAAwB3C,MAAM,CAACzG,CAAD,CAA9B,EAAmCqD,KAAnC,EAA0CiD,UAA1C,EAAsDtG,CAAtD,EAAyD6H,IAAzD,EAA+DD,GAA/D,EAAoEnB,MAAM,CAACxG,MAA3E;AACA,UAAIoJ,SAAS,GAAG,KAAKC,kBAAL,CAAwB,gBAAxB,EAA0CtJ,CAA1C,EAA6CsG,UAAU,CAACvC,IAAxD,EAA8D;AAAEmC,QAAAA,KAAK,EAAEsB,MAAT;AAAiB9B,QAAAA,KAAK,EAAE+B;AAAxB,OAA9D,CAAhB;AACAnB,MAAAA,UAAU,CAACvC,IAAX,GAAkBsF,SAAS,CAACtF,IAA5B;AACAuC,MAAAA,UAAU,CAACkB,MAAX,GAAoB6B,SAAS,CAACvF,MAAV,CAAiBoC,KAArC;AACAI,MAAAA,UAAU,CAAC,cAAD,CAAV,GAA6B+C,SAAS,CAACvF,MAAV,CAAiB4B,KAA9C;;AACA,UAAI,CAAC2D,SAAS,CAACzF,MAAf,EAAuB;AACnB,YAAIL,OAAO,GAAGjD,QAAQ,CAAC,KAAKY,SAAN,EAAiBoF,UAAjB,EAA6BhC,KAA7B,CAAtB;AACAf,QAAAA,OAAO,CAACgG,YAAR,CAAqB,YAArB,EAAmClG,KAAK,CAAChC,UAAN,CAAiBrB,CAAjB,EAAoBqD,KAAK,CAACZ,KAA1B,IAAmC,KAAnC,GAA2CgE,MAAM,CAACzG,CAAD,CAAN,CAAUoI,IAAxF;AACH;;AACD,UAAIoB,UAAU,GAAGjC,KAAK,GAAGD,KAAzB;AACA,UAAImC,GAAG,GAAG;AACNlH,QAAAA,CAAC,EAAE4E,CAAC,GAAKD,IAAI,GAAG,CAAR,GAAamB,IAAI,CAACS,GAAL,CAASxB,KAAK,GAAIkC,UAAU,GAAG,CAA/B,CADf;AAENhH,QAAAA,CAAC,EAAE4E,CAAC,GAAKF,IAAI,GAAG,CAAR,GAAamB,IAAI,CAACW,GAAL,CAAS1B,KAAK,GAAIkC,UAAU,GAAG,CAA/B;AAFf,OAAV;AAIA/C,MAAAA,MAAM,CAACzG,CAAD,CAAN,CAAU0J,QAAV,CAAmBnH,CAAnB,GAAuBkH,GAAG,CAAClH,CAA3B;AACAkE,MAAAA,MAAM,CAACzG,CAAD,CAAN,CAAU0J,QAAV,CAAmBlH,CAAnB,GAAuBiH,GAAG,CAACjH,CAA3B;AACH;;AACD,SAAKtB,SAAL,CAAe6D,SAAf,CAAyBC,WAAzB,CAAqCV,KAArC;AACH,GAnED;AAoEA;AACJ;AACA;;;AACIrD,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4ByJ,kBAA5B,GAAiD,UAAUzG,IAAV,EAAgBU,KAAhB,EAAuBsG,MAAvB,EAA+B3J,CAA/B,EAAkC6H,IAAlC,EAAwCD,GAAxC,EAA6C3H,MAA7C,EAAqD;AAClG,QAAI0C,IAAI,CAACyF,IAAL,GAAY,CAAZ,IAAiB/E,KAAK,CAACuG,kBAA3B,EAA+C;AAC3CD,MAAAA,MAAM,CAAC5F,IAAP,GAAcV,KAAK,CAACuG,kBAApB;AACA,WAAKpB,oBAAL,CAA0BxF,IAA1B,CAA+BhD,CAA/B;AACH;;AACD,QAAIA,CAAC,KAAK,CAAN,IAAWqD,KAAK,CAACwG,eAArB,EAAsC;AAClCF,MAAAA,MAAM,CAAC5F,IAAP,GAAcV,KAAK,CAACwG,eAApB;AACA,WAAKC,eAAL,GAAuB9J,CAAvB;AACH,KAHD,MAIK,IAAKA,CAAC,KAAMC,MAAM,GAAG,CAAjB,IAAwBoD,KAAK,CAAC0G,aAAlC,EAAiD;AAClDJ,MAAAA,MAAM,CAAC5F,IAAP,GAAcV,KAAK,CAAC0G,aAApB;AACA,WAAKC,aAAL,GAAqBhK,CAArB;AACH;;AACD,QAAI2C,IAAI,CAACyF,IAAL,KAAcP,IAAd,IAAsBxE,KAAK,CAAC0E,cAAhC,EAAgD;AAC5C4B,MAAAA,MAAM,CAAC5F,IAAP,GAAcV,KAAK,CAAC0E,cAApB;AACA,WAAKkC,cAAL,GAAsBjK,CAAtB;AACH,KAHD,MAIK,IAAI2C,IAAI,CAACyF,IAAL,KAAcR,GAAd,IAAqBvE,KAAK,CAAC2E,aAA/B,EAA8C;AAC/C2B,MAAAA,MAAM,CAAC5F,IAAP,GAAcV,KAAK,CAAC2E,aAApB;AACA,WAAKkC,aAAL,GAAqBlK,CAArB;AACH;AACJ,GArBD;AAsBA;AACJ;AACA;;;AACIiB,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4BwK,UAA5B,GAAyC,UAAU1D,MAAV,EAAkBvC,IAAlB,EAAwB;AAC7D,QAAIb,KAAK,GAAG,KAAKnC,SAAjB;AACA,QAAIoD,KAAK,GAAG,KAAKpD,SAAL,CAAeqD,QAAf,CAAwBC,WAAxB,CAAoC;AAC5ChB,MAAAA,EAAE,EAAEH,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,cADqB;AAE5C,mBAAa,UAAU,KAAKF,MAAf,GAAwB;AAFO,KAApC,CAAZ;AAIA,QAAIgD,UAAU,GAAG,IAAIjG,UAAJ,CAAegD,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,iBAAlC,EAAqDU,IAAI,CAACH,IAA1D,EAAgE,CAAhE,EAAmE,aAAnE,EAAkFV,KAAK,CAACkD,OAAxF,CAAjB;AACA,QAAIM,CAAC,GAAG,EAAR;AACA,QAAIuD,GAAG,GAAG,EAAV;;AACA,SAAK,IAAIpK,CAAC,GAAG,CAAR,EAAW8G,GAAG,GAAGL,MAAM,CAACxG,MAA7B,EAAqCD,CAAC,GAAG8G,GAAzC,EAA8C9G,CAAC,EAA/C,EAAmD;AAC/C,UAAIA,CAAC,KAAK,CAAV,EAAa;AACToK,QAAAA,GAAG,IAAI,OAAO3D,MAAM,CAACzG,CAAD,CAAN,CAAUuC,CAAjB,GAAqB,GAArB,GAA2BkE,MAAM,CAACzG,CAAD,CAAN,CAAUwC,CAArC,GAAyC,GAAhD;AACH,OAFD,MAGK;AACDqE,QAAAA,CAAC,GAAG,OAAOJ,MAAM,CAACzG,CAAD,CAAN,CAAUuC,CAAjB,GAAqB,GAArB,GAA2B,KAAK8H,UAAhC,GAA6C,GAAjD;AACAD,QAAAA,GAAG,GAAG,OAAO3D,MAAM,CAACzG,CAAD,CAAN,CAAUuC,CAAjB,GAAqB,GAArB,GAA2BkE,MAAM,CAACzG,CAAD,CAAN,CAAUwC,CAArC,GAAyC,GAA/C;AACH;;AACDqE,MAAAA,CAAC,IAAI,OAAOJ,MAAM,CAACzG,CAAD,CAAN,CAAUuC,CAAjB,GAAqB,GAArB,GAA2BkE,MAAM,CAACzG,CAAD,CAAN,CAAUwC,CAArC,GAAyC,GAA9C;;AACA,UAAIxC,CAAC,KAAM8G,GAAG,GAAG,CAAjB,EAAqB;AACjBD,QAAAA,CAAC,IAAI,OAAOJ,MAAM,CAACzG,CAAD,CAAN,CAAUuC,CAAjB,GAAqB,GAArB,GAA2B,KAAK8H,UAAhC,GAA6C,IAAlD;AACH;AACJ;;AACD/D,IAAAA,UAAU,CAACO,CAAX,GAAeA,CAAf;AACAvG,IAAAA,QAAQ,CAAC,KAAKY,SAAN,EAAiBoF,UAAjB,EAA6BhC,KAA7B,CAAR;AACAgC,IAAAA,UAAU,GAAG,IAAIjG,UAAJ,CAAegD,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,qBAAlC,EAAyD,aAAzD,EAAwEU,IAAI,CAACJ,MAAL,CAAY4B,KAApF,EAA2FxB,IAAI,CAACJ,MAAL,CAAYoC,KAAvG,EAA8G7C,KAAK,CAACkD,OAApH,EAA6H,EAA7H,EAAiI6D,GAAjI,CAAb;AACA9J,IAAAA,QAAQ,CAAC,KAAKY,SAAN,EAAiBoF,UAAjB,EAA6BhC,KAA7B,CAAR;AACA,SAAKpD,SAAL,CAAe6D,SAAf,CAAyBC,WAAzB,CAAqCV,KAArC;AACH,GA3BD;AA4BA;AACJ;AACA;;;AACIrD,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4B2K,YAA5B,GAA2C,UAAU7D,MAAV,EAAkBvC,IAAlB,EAAwB;AAC/D,QAAIrC,KAAK,GAAG,IAAZ;;AACA,QAAIwB,KAAK,GAAG,KAAKnC,SAAjB;AACA,QAAI4G,SAAS,GAAG5H,MAAM,CAAC,EAAD,EAAK,EAAL,EAASuG,MAAT,CAAtB;AACA,QAAInC,KAAK,GAAG,KAAKpD,SAAL,CAAeqD,QAAf,CAAwBC,WAAxB,CAAoC;AAC5ChB,MAAAA,EAAE,EAAEH,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,cADqB;AAE5C,mBAAa,UAAU,KAAKF,MAAf,GAAwB;AAFO,KAApC,CAAZ;AAIA,QAAIiH,MAAJ;AACA,QAAIC,OAAJ;;AACA,QAAI,KAAKtJ,SAAL,CAAe6G,cAAf,IAAiC,KAAK7G,SAAL,CAAe8G,aAApD,EAAmE;AAC/D,UAAIyC,UAAU,GAAG3C,SAAS,CAACI,GAAV,CAAc,UAAUC,CAAV,EAAa;AAAE,eAAOA,CAAC,CAACuC,cAAT;AAA0B,OAAvD,CAAjB;AACAF,MAAAA,OAAO,GAAGnC,IAAI,CAACrC,GAAL,CAASsC,KAAT,CAAe,IAAf,EAAqBmC,UAArB,CAAV;AACAF,MAAAA,MAAM,GAAGlC,IAAI,CAACE,GAAL,CAASD,KAAT,CAAe,IAAf,EAAqBmC,UAArB,CAAT;AACH;;AACD,QAAIjH,EAAE,GAAGH,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,oBAA5B;AACA,QAAImH,WAAW,GAAG,IAAInK,UAAJ,CAAegD,EAAf,EAAmB,EAAnB,EAAuBU,IAAI,CAACJ,MAA5B,EAAoCT,KAAK,CAACkD,OAA1C,EAAmD,IAAnD,CAAlB;AACA,QAAIqE,aAAa,GAAGvH,KAAK,CAACsE,OAAN,CAAc1H,MAAlC;AACA,QAAI0C,IAAJ;AACA,QAAImE,GAAG,GAAGL,MAAM,CAACxG,MAAjB;AACA,SAAKuI,oBAAL,GAA4B,EAA5B;;AACA,QAAIqC,OAAO,GAAG,UAAU7K,CAAV,EAAa;AACvB2C,MAAAA,IAAI,GAAG8D,MAAM,CAACzG,CAAD,CAAb;AACA2K,MAAAA,WAAW,CAACnH,EAAZ,GAAiBA,EAAE,GAAGxD,CAAtB;AACA2K,MAAAA,WAAW,CAAC5G,IAAZ,GAAoB6G,aAAD,GAAkBvH,KAAK,CAACsE,OAAN,CAAc3H,CAAC,GAAG4K,aAAlB,CAAlB,GAAqD1G,IAAI,CAACH,IAA7E;AACA4G,MAAAA,WAAW,CAACG,IAAZ,GAAmB,IAAIrK,IAAJ,CAASkC,IAAI,CAACJ,CAAd,EAAiBI,IAAI,CAACH,CAAtB,EAAyBG,IAAI,CAAC+C,KAA9B,EAAqC/C,IAAI,CAAC2C,MAA1C,CAAnB;AACAyF,MAAAA,MAAM,CAACC,eAAP,CAAuB,IAAvB,EAA6BrI,IAA7B,EAAmCU,KAAnC,EAA0CsH,WAA1C,EAAuD3K,CAAvD,EAA0DwK,OAA1D,EAAmED,MAAnE,EAA2EzD,GAA3E;AACAnE,MAAAA,IAAI,CAAC+G,QAAL,CAAclH,CAAd,GAAmBG,IAAI,CAAC+H,cAAL,IAAuBK,MAAM,CAACV,UAA/B,GAA6C1H,IAAI,CAACH,CAAlD,GAAuDG,IAAI,CAACH,CAAL,GAASG,IAAI,CAAC2C,MAAvF;AACA3C,MAAAA,IAAI,CAAC+G,QAAL,CAAcnH,CAAd,GAAkBI,IAAI,CAACJ,CAAL,GAAUI,IAAI,CAAC+C,KAAL,GAAa,CAAzC;AACAiF,MAAAA,WAAW,CAACnD,MAAZ,GAAqBtD,IAAI,CAACJ,MAAL,CAAYoC,KAAZ,GAAqBhC,IAAI,CAACJ,MAAL,CAAYoC,KAAjC,GAA0CyE,WAAW,CAAC5G,IAA3E;AACA,UAAIsF,SAAS,GAAG;AACZ1F,QAAAA,IAAI,EAAE,gBADM;AACYC,QAAAA,MAAM,EAAE,KADpB;AAC2BqH,QAAAA,UAAU,EAAEjL,CADvC;AAC0C+D,QAAAA,IAAI,EAAE4G,WAAW,CAAC5G,IAD5D;AAEZD,QAAAA,MAAM,EAAE;AAAEoC,UAAAA,KAAK,EAAEyE,WAAW,CAACnD,MAArB;AAA6B9B,UAAAA,KAAK,EAAExB,IAAI,CAACJ,MAAL,CAAY4B;AAAhD;AAFI,OAAhB;;AAIA,UAAIqF,MAAM,CAAC7J,SAAP,CAAiB8C,QAArB,EAA+B;AAC3B,YAAIkH,eAAe,GAAG7L,MAAM,CAACgK,SAAD,EAAY,EAAZ,CAA5B;;AACAA,QAAAA,SAAS,GAAG6B,eAAZ;AACH;;AACDH,MAAAA,MAAM,CAAC7J,SAAP,CAAiBkE,OAAjB,CAAyB,gBAAzB,EAA2CiE,SAA3C,EAAsD,UAAU8B,SAAV,EAAqB;AACvExI,QAAAA,IAAI,GAAG8D,MAAM,CAACzG,CAAD,CAAb;AACA2K,QAAAA,WAAW,CAACnH,EAAZ,GAAiBA,EAAE,GAAGxD,CAAtB;AACA2K,QAAAA,WAAW,CAACG,IAAZ,GAAmB,IAAIrK,IAAJ,CAASkC,IAAI,CAACJ,CAAd,EAAiBI,IAAI,CAACH,CAAtB,EAAyBG,IAAI,CAAC+C,KAA9B,EAAqC/C,IAAI,CAAC2C,MAA1C,CAAnB;;AACAzD,QAAAA,KAAK,CAACmJ,eAAN,CAAsB,IAAtB,EAA4BrI,IAA5B,EAAkCU,KAAlC,EAAyCsH,WAAzC,EAAsD3K,CAAtD,EAAyDwK,OAAzD,EAAkED,MAAlE,EAA0EzD,GAA1E;;AACA6D,QAAAA,WAAW,CAAC5G,IAAZ,GAAmBsF,SAAS,CAACtF,IAA7B;AACA4G,QAAAA,WAAW,CAACnD,MAAZ,GAAqB6B,SAAS,CAACvF,MAAV,CAAiBoC,KAAtC;AACAvD,QAAAA,IAAI,CAAC+G,QAAL,CAAclH,CAAd,GAAmBG,IAAI,CAAC+H,cAAL,IAAuB7I,KAAK,CAACwI,UAA9B,GAA4C1H,IAAI,CAACH,CAAjD,GAAsDG,IAAI,CAACH,CAAL,GAASG,IAAI,CAAC2C,MAAtF;AACAqF,QAAAA,WAAW,CAAC,cAAD,CAAX,GAA8BtB,SAAS,CAACvF,MAAV,CAAiB4B,KAA/C;AACA/C,QAAAA,IAAI,CAAC+G,QAAL,CAAcnH,CAAd,GAAkBI,IAAI,CAACJ,CAAL,GAAUI,IAAI,CAAC+C,KAAL,GAAa,CAAzC;;AACA,YAAI,CAAC2D,SAAS,CAACzF,MAAf,EAAuB;AACnB,cAAIL,OAAO,GAAGhD,aAAa,CAAC8C,KAAD,EAAQsH,WAAR,EAAqBrG,KAArB,CAA3B;AACAf,UAAAA,OAAO,CAACgG,YAAR,CAAqB,YAArB,EAAmClG,KAAK,CAAChC,UAAN,CAAiBrB,CAAjB,EAAoBqD,KAAK,CAACZ,KAA1B,IAAmC,KAAnC,GAA2CgE,MAAM,CAACzG,CAAD,CAAN,CAAUoI,IAAxF;AACA9D,UAAAA,KAAK,CAACU,WAAN,CAAkBzB,OAAlB;AACH;AACJ,OAfD;AAgBH,KAjCD;;AAkCA,QAAIwH,MAAM,GAAG,IAAb;;AACA,SAAK,IAAI/K,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8G,GAApB,EAAyB9G,CAAC,EAA1B,EAA8B;AAC1B6K,MAAAA,OAAO,CAAC7K,CAAD,CAAP;AACH;;AACD,SAAKkB,SAAL,CAAe6D,SAAf,CAAyBC,WAAzB,CAAqCV,KAArC;AACH,GA5DD;AA6DA;AACJ;AACA;;;AACIrD,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4ByL,aAA5B,GAA4C,UAAU3E,MAAV,EAAkBvC,IAAlB,EAAwB;AAChE,QAAIb,KAAK,GAAG,KAAKnC,SAAjB;AACA,QAAIoD,KAAK,GAAG,KAAKpD,SAAL,CAAeqD,QAAf,CAAwBC,WAAxB,CAAoC;AAC5ChB,MAAAA,EAAE,EAAEH,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,cADqB;AAE5C,mBAAa,UAAU,KAAKF,MAAf,GAAwB;AAFO,KAApC,CAAZ;AAIA,QAAIE,EAAE,GAAGH,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,qBAA5B;AACA,QAAI6H,OAAO,GAAG,IAAI7K,UAAJ,CAAegD,EAAf,EAAmB,EAAnB,EAAuBU,IAAI,CAACJ,MAA5B,EAAoCT,KAAK,CAACkD,OAA1C,EAAmD,IAAnD,CAAd;AACA,QAAI5D,IAAJ;AACA,QAAImE,GAAG,GAAGL,MAAM,CAACxG,MAAjB;AACA,QAAI2K,aAAa,GAAGvH,KAAK,CAACsE,OAAN,CAAc1H,MAAlC;;AACA,SAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8G,GAApB,EAAyB9G,CAAC,EAA1B,EAA8B;AAC1B2C,MAAAA,IAAI,GAAG8D,MAAM,CAACzG,CAAD,CAAb;AACAqL,MAAAA,OAAO,CAAC7H,EAAR,GAAaA,EAAE,GAAGxD,CAAlB;AACAqL,MAAAA,OAAO,CAACtH,IAAR,GAAgB6G,aAAD,GAAkBvH,KAAK,CAACsE,OAAN,CAAc3H,CAAC,GAAG4K,aAAlB,CAAlB,GAAuDjI,IAAI,CAACyF,IAAL,KAAc,KAAKkD,SAApB,GAChE,KAAKpK,SAAL,CAAeqK,aAAf,IAAgC,SADgC,GACjB5I,IAAI,CAACyF,IAAL,GAAY,KAAKkD,SAAlB,GAA+BpH,IAAI,CAACH,IAApC,GAC9CV,KAAK,CAACuG,kBAAN,IAA4B,SAFjC;AAGAyB,MAAAA,OAAO,CAAC7D,MAAR,GAAkBtD,IAAI,CAACJ,MAAL,CAAYoC,KAAb,GAAuBhC,IAAI,CAACJ,MAAL,CAAYoC,KAAnC,GAA4CmF,OAAO,CAACtH,IAArE;AACAsH,MAAAA,OAAO,CAACP,IAAR,GAAe,IAAIrK,IAAJ,CAASkC,IAAI,CAACJ,CAAd,EAAiBI,IAAI,CAACH,CAAtB,EAAyBG,IAAI,CAAC+C,KAA9B,EAAqC/C,IAAI,CAAC2C,MAA1C,CAAf;AACA3C,MAAAA,IAAI,CAAC+G,QAAL,CAAcnH,CAAd,GAAkBI,IAAI,CAACJ,CAAL,GAAUI,IAAI,CAAC+C,KAAL,GAAa,CAAzC;AACA/C,MAAAA,IAAI,CAAC+G,QAAL,CAAclH,CAAd,GAAmBG,IAAI,CAACyF,IAAL,IAAa,KAAKkD,SAAnB,GAAiC3I,IAAI,CAACH,CAAtC,GAA4CG,IAAI,CAACH,CAAL,GAASG,IAAI,CAAC2C,MAA5E;AACA,UAAI+D,SAAS,GAAG,KAAKC,kBAAL,CAAwB,gBAAxB,EAA0CtJ,CAA1C,EAA6CqL,OAAO,CAACtH,IAArD,EAA2D;AAAEmC,QAAAA,KAAK,EAAEmF,OAAO,CAAC7D,MAAjB;AAAyB9B,QAAAA,KAAK,EAAExB,IAAI,CAACJ,MAAL,CAAY4B;AAA5C,OAA3D,CAAhB;AACA2F,MAAAA,OAAO,CAACtH,IAAR,GAAesF,SAAS,CAACtF,IAAzB;AACAsH,MAAAA,OAAO,CAAC7D,MAAR,GAAiB6B,SAAS,CAACvF,MAAV,CAAiBoC,KAAlC;AACAmF,MAAAA,OAAO,CAAC,cAAD,CAAP,GAA0BhC,SAAS,CAACvF,MAAV,CAAiB4B,KAA3C;;AACA,UAAI,CAAC2D,SAAS,CAACzF,MAAf,EAAuB;AACnB,YAAIL,OAAO,GAAGhD,aAAa,CAAC8C,KAAD,EAAQgI,OAAR,EAAiB/G,KAAjB,CAA3B;AACAf,QAAAA,OAAO,CAACgG,YAAR,CAAqB,YAArB,EAAmClG,KAAK,CAAChC,UAAN,CAAiBrB,CAAjB,EAAoBqD,KAAK,CAACZ,KAA1B,IAAmC,KAAnC,GAA2CgE,MAAM,CAACzG,CAAD,CAAN,CAAUoI,IAAxF;AACH;AACJ;;AACD,SAAKlH,SAAL,CAAe6D,SAAf,CAAyBC,WAAzB,CAAqCV,KAArC;AACH,GA/BD;;AAgCArD,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4BsF,YAA5B,GAA2C,UAAUwB,MAAV,EAAkB;AACzD,QAAIpD,KAAK,GAAG,KAAKnC,SAAjB;AACA,QAAIsK,MAAM,GAAGnI,KAAK,CAACoI,cAAnB;;AACA,QAAKpI,KAAK,CAACe,IAAN,KAAe,KAAf,IAAwBf,KAAK,CAACe,IAAN,KAAe,SAAvC,IAAoD,CAACoH,MAAM,CAACE,OAAP,CAAezL,MAAzE,EAAkF;AAC9E;AACH;;AACD,QAAI6H,SAAS,GAAG5H,MAAM,CAAC,EAAD,EAAK,EAAL,EAASuG,MAAT,CAAtB;AACA,QAAInC,KAAK,GAAG,KAAKpD,SAAL,CAAeqD,QAAf,CAAwBC,WAAxB,CAAoC;AAC5ChB,MAAAA,EAAE,EAAEH,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,qBADqB;AAE5C,mBAAa,UAAU,KAAKF,MAAf,GAAwB;AAFO,KAApC,CAAZ;AAIA,QAAIoD,CAAJ;AACA,QAAI/D,IAAJ;AACA,QAAIa,EAAE,GAAGH,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,oBAA5B;AACA,QAAImG,MAAM,GAAG,IAAIjJ,YAAJ,CAAiB,EAAjB,EAAqB8K,MAAM,CAACzH,IAA5B,EAAkCyH,MAAM,CAAC1H,MAAzC,EAAiD0H,MAAM,CAACjF,OAAxD,EAAiE,CAAjE,EAAoE,CAApE,EAAuEiF,MAAM,CAACG,IAAP,GAAc,CAArF,EAAwF,EAAxF,CAAb;AACA,QAAInB,OAAJ;AACA,QAAID,MAAJ;AACA,QAAImB,OAAO,GAAGF,MAAM,CAACE,OAAP,CAAeE,IAAf,EAAd;;AACA,QAAKF,OAAO,CAACG,WAAR,GAAsB/L,OAAtB,CAA8B,MAA9B,IAAwC,CAAC,CAA1C,IAAiD4L,OAAO,CAACG,WAAR,GAAsB/L,OAAtB,CAA8B,KAA9B,IAAuC,CAAC,CAA7F,EAAiG;AAC7F,UAAI2K,UAAU,GAAG3C,SAAS,CAACI,GAAV,CAAc,UAAUC,CAAV,EAAa;AAAE,eAAOA,CAAC,CAACuC,cAAT;AAA0B,OAAvD,CAAjB;AACAF,MAAAA,OAAO,GAAGnC,IAAI,CAACrC,GAAL,CAASsC,KAAT,CAAe,IAAf,EAAqBmC,UAArB,CAAV;AACAF,MAAAA,MAAM,GAAGlC,IAAI,CAACE,GAAL,CAASD,KAAT,CAAe,IAAf,EAAqBmC,UAArB,CAAT;AACH;;AACD,SAAKjC,oBAAL,GAA4B,EAA5B;;AACA,QAAIsD,OAAO,GAAG,UAAU9L,CAAV,EAAa+L,QAAb,EAAuB;AACjCpJ,MAAAA,IAAI,GAAG8D,MAAM,CAACzG,CAAD,CAAb;AACA2J,MAAAA,MAAM,CAACnG,EAAP,GAAYA,EAAE,GAAGxD,CAAjB;AACA2J,MAAAA,MAAM,CAACqC,EAAP,GAAYrJ,IAAI,CAAC+G,QAAL,CAAcnH,CAA1B;AACAoH,MAAAA,MAAM,CAACsC,EAAP,GAAYtJ,IAAI,CAAC+G,QAAL,CAAclH,CAA1B;AACAmH,MAAAA,MAAM,CAAC5F,IAAP,GAAcyH,MAAM,CAACzH,IAArB;AACA,UAAImI,MAAM,GAAIR,OAAO,CAACG,WAAR,GAAsB/L,OAAtB,CAA8B,KAA9B,IAAuC,CAAC,CAAtD;AACAoM,MAAAA,MAAM,GAAGC,MAAM,CAACnB,eAAP,CAAuBkB,MAAvB,EAA+BvJ,IAA/B,EAAqCU,KAArC,EAA4CsG,MAA5C,EAAoD3J,CAApD,EAAuDwK,OAAvD,EAAgED,MAAhE,EAAwEwB,QAAxE,EAAkFL,OAAO,CAACG,WAAR,EAAlF,CAAT;AACAlC,MAAAA,MAAM,CAACnC,MAAP,GAAgBgE,MAAM,CAAC1H,MAAP,CAAcoC,KAAd,IAAuByD,MAAM,CAAC5F,IAA9C;AACA,UAAIqI,UAAU,GAAG;AACbzI,QAAAA,IAAI,EAAE,iBADO;AACYC,QAAAA,MAAM,EAAE,KADpB;AAEbE,QAAAA,MAAM,EAAE;AAAEoC,UAAAA,KAAK,EAAEyD,MAAM,CAACnC,MAAhB;AAAwB9B,UAAAA,KAAK,EAAE8F,MAAM,CAAC1H,MAAP,CAAc4B;AAA7C,SAFK;AAGb3B,QAAAA,IAAI,EAAE4F,MAAM,CAAC5F,IAHA;AAGMkH,QAAAA,UAAU,EAAEjL,CAHlB;AAIbkB,QAAAA,SAAS,EAAE,CAACiL,MAAM,CAACjL,SAAP,CAAiB8C,QAAlB,GAA6BmI,MAAM,CAACjL,SAApC,GAAgD,IAJ9C;AAKbqB,QAAAA,CAAC,EAAEoH,MAAM,CAACqC,EALG;AAKCxJ,QAAAA,CAAC,EAAEmH,MAAM,CAACsC,EALX;AAKeN,QAAAA,IAAI,EAAEH,MAAM,CAACG;AAL5B,OAAjB;;AAOA,UAAIQ,MAAM,CAACjL,SAAP,CAAiB8C,QAArB,EAA+B;AAC3B,YAAIqI,gBAAgB,GAAGhN,MAAM,CAAC+M,UAAD,EAAa,EAAb,CAA7B;;AACAA,QAAAA,UAAU,GAAGC,gBAAb;AACH;;AACDF,MAAAA,MAAM,CAACjL,SAAP,CAAiBkE,OAAjB,CAAyB,iBAAzB,EAA4CgH,UAA5C,EAAwD,UAAUlI,IAAV,EAAgB;AACpE,YAAIgI,MAAM,IAAI,CAACE,UAAU,CAACxI,MAA1B,EAAkC;AAC9B+F,UAAAA,MAAM,CAACnG,EAAP,GAAYA,EAAE,GAAGxD,CAAjB;AACA2J,UAAAA,MAAM,CAACqC,EAAP,GAAYI,UAAU,CAAC7J,CAAvB;AACAoH,UAAAA,MAAM,CAACsC,EAAP,GAAYG,UAAU,CAAC5J,CAAvB;AACAmH,UAAAA,MAAM,CAAC5F,IAAP,GAAcqI,UAAU,CAACrI,IAAzB;AACA4F,UAAAA,MAAM,CAACnC,MAAP,GAAgB4E,UAAU,CAACtI,MAAX,CAAkBoC,KAAlC;AACAyD,UAAAA,MAAM,CAAC,cAAD,CAAN,GAAyByC,UAAU,CAACtI,MAAX,CAAkB4B,KAA3C;AACAiE,UAAAA,MAAM,CAAC2C,CAAP,GAAWF,UAAU,CAACT,IAAX,GAAkB,CAA7B;AACA,cAAIpI,OAAO,GAAG5C,UAAU,CAAC0C,KAAD,EAAQsG,MAAR,EAAgBrF,KAAhB,CAAxB;AACAf,UAAAA,OAAO,CAACgG,YAAR,CAAqB,YAArB,EAAmClG,KAAK,CAAChC,UAAN,CAAiBrB,CAAjB,EAAoBqD,KAAK,CAACZ,KAA1B,IAAmC,KAAnC,GAA2CgE,MAAM,CAACzG,CAAD,CAAN,CAAUoI,IAAxF;AACA9D,UAAAA,KAAK,CAACU,WAAN,CAAkBzB,OAAlB;AACH;AACJ,OAbD;AAcH,KAlCD;;AAmCA,QAAI4I,MAAM,GAAG,IAAb;;AACA,SAAK,IAAInM,CAAC,GAAG,CAAR,EAAW+L,QAAQ,GAAGtF,MAAM,CAACxG,MAAlC,EAA0CD,CAAC,GAAG+L,QAA9C,EAAwD/L,CAAC,EAAzD,EAA6D;AACzD8L,MAAAA,OAAO,CAAC9L,CAAD,EAAI+L,QAAJ,CAAP;AACH;;AACD,SAAK7K,SAAL,CAAe6D,SAAf,CAAyBC,WAAzB,CAAqCV,KAArC;AACH,GAhED;AAiEA;AACJ;AACA;;;AACIrD,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4BqL,eAA5B,GAA8C,UAAUkB,MAAV,EAAkBvJ,IAAlB,EAAwBU,KAAxB,EAA+BsG,MAA/B,EAAuC3J,CAAvC,EAA0CwK,OAA1C,EAAmDD,MAAnD,EAA2DtK,MAA3D,EAAmEyL,OAAnE,EAA4E;AACtH,QAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,MAAAA,OAAO,GAAG,EAAV;AAAe;;AACzC,QAAI/I,IAAI,CAAC+H,cAAL,GAAsB,KAAKL,UAA/B,EAA2C;AACvCV,MAAAA,MAAM,CAAC5F,IAAP,GAAcV,KAAK,CAACuG,kBAAN,IAA4BD,MAAM,CAAC5F,IAAjD;AACA,WAAKyE,oBAAL,CAA0BxF,IAA1B,CAA+BhD,CAA/B;AACAkM,MAAAA,MAAM,GAAGA,MAAM,IAAKR,OAAO,CAAC5L,OAAR,CAAgB,UAAhB,IAA8B,CAAC,CAAnD;AACH;;AACD,QAAIE,CAAC,KAAK,CAAV,EAAa;AACT2J,MAAAA,MAAM,CAAC5F,IAAP,GAAcV,KAAK,CAACwG,eAAN,IAAyBF,MAAM,CAAC5F,IAA9C;AACA,WAAK+F,eAAL,GAAuB9J,CAAvB;AACAkM,MAAAA,MAAM,GAAGA,MAAM,IAAKR,OAAO,CAAC5L,OAAR,CAAgB,OAAhB,IAA2B,CAAC,CAAhD;AACH,KAJD,MAKK,IAAKE,CAAC,KAAMC,MAAM,GAAG,CAArB,EAA0B;AAC3B0J,MAAAA,MAAM,CAAC5F,IAAP,GAAcV,KAAK,CAAC0G,aAAN,IAAuBJ,MAAM,CAAC5F,IAA5C;AACA,WAAKiG,aAAL,GAAqBhK,CAArB;AACAkM,MAAAA,MAAM,GAAGA,MAAM,IAAKR,OAAO,CAAC5L,OAAR,CAAgB,KAAhB,IAAyB,CAAC,CAA9C;AACH;;AACD,QAAI6C,IAAI,CAAC+H,cAAL,KAAwBF,OAA5B,EAAqC;AACjCb,MAAAA,MAAM,CAAC5F,IAAP,GAAcV,KAAK,CAAC0E,cAAN,IAAwB4B,MAAM,CAAC5F,IAA7C;AACA,WAAKkG,cAAL,GAAsBjK,CAAtB;AACAkM,MAAAA,MAAM,GAAGA,MAAM,IAAKR,OAAO,CAAC5L,OAAR,CAAgB,MAAhB,IAA0B,CAAC,CAA/C;AACH,KAJD,MAKK,IAAI6C,IAAI,CAAC+H,cAAL,KAAwBH,MAA5B,EAAoC;AACrCZ,MAAAA,MAAM,CAAC5F,IAAP,GAAcV,KAAK,CAAC2E,aAAN,IAAuB2B,MAAM,CAAC5F,IAA5C;AACA,WAAKmG,aAAL,GAAqBlK,CAArB;AACAkM,MAAAA,MAAM,GAAGA,MAAM,IAAKR,OAAO,CAAC5L,OAAR,CAAgB,KAAhB,IAAyB,CAAC,CAA9C;AACH;;AACD,QAAI4L,OAAO,CAAC5L,OAAR,CAAgB,MAAhB,IAA0B,CAAC,CAA/B,EAAkC;AAC9BoM,MAAAA,MAAM,GAAG,KAAT;AACH;;AACD,WAAOA,MAAP;AACH,GA/BD;AAgCA;AACJ;AACA;;;AACIjL,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4BuF,WAA5B,GAA0C,UAAUuB,MAAV,EAAkB;AACxD,QAAI5E,KAAK,GAAG,IAAZ;;AACA,QAAIwB,KAAK,GAAG,KAAKnC,SAAjB;AACA,QAAIqL,SAAS,GAAGlJ,KAAK,CAACmJ,iBAAtB;AACA,QAAItG,KAAK,GAAGqG,SAAS,CAACE,SAAV,CAAoBvG,KAApB,IAA6B7C,KAAK,CAAC8C,UAAN,CAAiBuG,cAA1D;;AACA,QAAKrJ,KAAK,CAACe,IAAN,KAAe,SAAf,IAA4B,CAACmI,SAAS,CAACb,OAAV,CAAkBzL,MAApD,EAA6D;AACzD;AACH;;AACD,QAAI6H,SAAS,GAAG5H,MAAM,CAAC,EAAD,EAAK,EAAL,EAASuG,MAAT,CAAtB;AACA,QAAIjD,EAAE,GAAGH,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,mBAA5B;AACA,QAAIc,KAAK,GAAG,KAAKpD,SAAL,CAAeqD,QAAf,CAAwBC,WAAxB,CAAoC;AAC5ChB,MAAAA,EAAE,EAAEH,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,oBADqB;AAE5CmJ,MAAAA,KAAK,EAAE;AAFqC,KAApC,CAAZ;AAIA,QAAIjG,CAAJ;AACA,QAAI/D,IAAJ;AACA,QAAIiK,MAAM,GAAGpJ,EAAE,GAAG,OAAlB;AACA,QAAIqJ,MAAM,GAAGrJ,EAAE,GAAG,OAAlB;AACA,QAAImG,MAAM,GAAG,IAAI7I,UAAJ,CAAe,EAAf,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,QAAzB,EAAmC,EAAnC,EAAuC,QAAvC,CAAb;AACA,QAAIgM,UAAU,GAAGP,SAAS,CAACE,SAA3B;AACA,QAAIhC,UAAU,GAAG3C,SAAS,CAACI,GAAV,CAAc,UAAUC,CAAV,EAAa;AAAE,aAAOA,CAAC,CAACuC,cAAT;AAA0B,KAAvD,CAAjB;AACA,QAAIF,OAAO,GAAGnC,IAAI,CAACrC,GAAL,CAASsC,KAAT,CAAe,IAAf,EAAqBmC,UAArB,CAAd;AACA,QAAIF,MAAM,GAAGlC,IAAI,CAACE,GAAL,CAASD,KAAT,CAAe,IAAf,EAAqBmC,UAArB,CAAb;AACA,QAAIsC,KAAK,GAAG,CAAZ;AACA,QAAIvH,OAAO,GAAI+G,SAAS,CAACxI,IAAV,KAAmB,aAAnB,IAAoCwI,SAAS,CAACzI,MAAV,CAAiB4B,KAAtD,GAA+D,CAA/D,GAAmE,CAAjF;AACA,QAAIiG,IAAI,GAAG/K,WAAW,CAAC,wBAAD,EAA2BkM,UAA3B,CAAtB;AACA,QAAInC,WAAW,GAAG,IAAInK,UAAJ,CAAe,EAAf,EAAmB+L,SAAS,CAACxI,IAA7B,EAAmCwI,SAAS,CAACzI,MAA7C,EAAqDyI,SAAS,CAAChG,OAA/D,EAAwE,IAAxE,CAAlB;AACA,QAAIyG,eAAJ;AACAF,IAAAA,UAAU,CAACG,UAAX,GAAwB5J,KAAK,CAAC8C,UAAN,CAAiB+G,eAAjB,IAAoCJ,UAAU,CAACG,UAAvE;;AACA,QAAIE,OAAO,GAAG,UAAUnN,CAAV,EAAaoN,QAAb,EAAuB;AACjCzK,MAAAA,IAAI,GAAG8D,MAAM,CAACzG,CAAD,CAAb;AACA2J,MAAAA,MAAM,CAACnG,EAAP,GAAYoJ,MAAM,GAAG5M,CAArB;AACA2J,MAAAA,MAAM,CAACpH,CAAP,GAAWI,IAAI,CAAC+G,QAAL,CAAcnH,CAAd,GAAkBgK,SAAS,CAACc,MAAV,CAAiB9K,CAA9C;AACAoH,MAAAA,MAAM,CAACnH,CAAP,GAAW,CAAEa,KAAK,CAACe,IAAN,KAAe,KAAhB,GAAyBzB,IAAI,CAAC+G,QAAL,CAAclH,CAAvC,GAA6CG,IAAI,CAAC+H,cAAL,GAAsB4C,MAAM,CAACjD,UAA9B,GAA6C1H,IAAI,CAAC+G,QAAL,CAAclH,CAAd,GAChGmJ,IAAI,CAACrG,MAAL,GAAc,CADkF,GAC7EyH,KAD6E,GACrE,CADqE,GACjEvH,OADoB,GACR7C,IAAI,CAAC+G,QAAL,CAAclH,CAAd,GAAmBmJ,IAAI,CAACrG,MAAL,GAAc,CAAjC,GAAsCyH,KAAtC,GAA8CvH,OADnF,IACgG+G,SAAS,CAACc,MAAV,CAAiB7K,CAD5H;AAEAmH,MAAAA,MAAM,CAAC4D,IAAP,GAAehB,SAAS,CAACiB,MAAV,KAAqB,EAAtB,GAA4BF,MAAM,CAACG,SAAP,CAAiBlB,SAAS,CAACiB,MAA3B,EAAmCF,MAAM,CAACpM,SAAP,CAAiBG,UAAjB,CAA4BrB,CAA5B,CAAnC,CAA5B,GACV2C,IAAI,CAACyF,IAAL,CAAUsF,QAAV,EADJ;AAEA,UAAIC,SAAS,GAAG;AACZhK,QAAAA,IAAI,EAAE,oBADM;AACgBC,QAAAA,MAAM,EAAE,KADxB;AAEZE,QAAAA,MAAM,EAAEyI,SAAS,CAACzI,MAFN;AAEcC,QAAAA,IAAI,EAAEwI,SAAS,CAACxI,IAF9B;AAEoCkH,QAAAA,UAAU,EAAEjL,CAFhD;AAGZkB,QAAAA,SAAS,EAAE,CAACoM,MAAM,CAACpM,SAAP,CAAiB8C,QAAlB,GAA6BsJ,MAAM,CAACpM,SAApC,GAAgD,IAH/C;AAIZqB,QAAAA,CAAC,EAAEoH,MAAM,CAACpH,CAJE;AAICC,QAAAA,CAAC,EAAEmH,MAAM,CAACnH,CAJX;AAIc+K,QAAAA,IAAI,EAAE5D,MAAM,CAAC4D,IAJ3B;AAIiCrH,QAAAA,KAAK,EAAEA;AAJxC,OAAhB;;AAMA,UAAIoH,MAAM,CAACpM,SAAP,CAAiB8C,QAArB,EAA+B;AAC3B,YAAI4J,mBAAmB,GAAGvO,MAAM,CAACsO,SAAD,EAAY,EAAZ,CAAhC;;AACAA,QAAAA,SAAS,GAAGC,mBAAZ;AACH;;AACDN,MAAAA,MAAM,CAACpM,SAAP,CAAiBkE,OAAjB,CAAyB,oBAAzB,EAA+CuI,SAA/C,EAA0D,UAAUzJ,IAAV,EAAgB;AACtEyH,QAAAA,IAAI,GAAG/K,WAAW,CAAC+M,SAAS,CAACJ,IAAX,EAAiBT,UAAjB,CAAlB;AACAnD,QAAAA,MAAM,CAAC4D,IAAP,GAAcI,SAAS,CAACJ,IAAxB;AACA,YAAIrI,WAAW,GAAIqH,SAAS,CAACb,OAAV,CAAkBE,IAAlB,GAAyBC,WAAzB,GAAuC/L,OAAvC,CAA+C,KAA/C,IAAwD,CAAC,CAA5E;AACAoF,QAAAA,WAAW,GAAGrD,KAAK,CAACgM,eAAN,CAAsB3I,WAAtB,EAAmCvC,IAAnC,EAAyC3C,CAAzC,EAA4CuM,SAA5C,EAAuDa,QAAvD,EAAiE5C,OAAjE,EAA0ED,MAA1E,CAAd;AACAyC,QAAAA,eAAe,GAAGnL,KAAK,CAACiM,oBAAN,CAA2BvB,SAAS,CAACwB,aAArC,EAAoD7I,WAApD,EAAiEyI,SAAS,CAACpL,CAA3E,EAA8EvC,CAA9E,EAAiFoN,QAAjF,EAA2FzB,IAA3F,EAAiGnG,OAAjG,CAAlB;;AACA,YAAIN,WAAW,IAAI,CAACyI,SAAS,CAAC/J,MAA1B,IAAoCoJ,eAAe,CAACd,MAAxD,EAAgE;AAC5DvB,UAAAA,WAAW,CAACnH,EAAZ,GAAiBqJ,MAAM,GAAG7M,CAA1B;AACA2K,UAAAA,WAAW,CAAC5G,IAAZ,GAAmB4J,SAAS,CAAC5J,IAA7B;AACA4G,UAAAA,WAAW,CAACnD,MAAZ,GAAqBmG,SAAS,CAAC7J,MAAV,CAAiBoC,KAAtC;AACAyE,UAAAA,WAAW,CAAC,cAAD,CAAX,GAA8BgD,SAAS,CAAC7J,MAAV,CAAiB4B,KAA/C;AACAiE,UAAAA,MAAM,CAACnH,CAAP,GAAWmL,SAAS,CAACnL,CAArB;AACAmH,UAAAA,MAAM,CAACpH,CAAP,GAAWyK,eAAe,CAACzK,CAA3B;AACAoI,UAAAA,WAAW,CAACG,IAAZ,GAAmB,IAAIrK,IAAJ,CAASkJ,MAAM,CAACpH,CAAP,IAAaoJ,IAAI,CAACjG,KAAL,GAAa,CAAd,GAAmBF,OAA/B,CAAT,EAAmDmE,MAAM,CAACnH,CAAP,GAAWgD,OAAX,GAAsBmG,IAAI,CAACrG,MAAL,GAAc,IAAvF,EAA+FqG,IAAI,CAACjG,KAAL,GAAcF,OAAO,GAAG,CAAvH,EAA2HmG,IAAI,CAACrG,MAAL,GAAeE,OAAO,GAAG,CAApJ,CAAnB;AACAkB,UAAAA,CAAC,GAAG7E,KAAK,CAACX,SAAN,CAAgBqD,QAAhB,CAAyBC,WAAzB,CAAqC;AAAEhB,YAAAA,EAAE,EAAEA,EAAE,GAAG,GAAL,GAAWxD;AAAjB,WAArC,CAAJ;AACAO,UAAAA,aAAa,CAAC8C,KAAD,EAAQsH,WAAR,EAAqBjE,CAArB,CAAb;AACA7F,UAAAA,iBAAiB,CAAC8I,MAAD,EAASmD,UAAT,EAAqBa,SAAS,CAACzH,KAA/B,EAAsCQ,CAAtC,CAAjB;AACApC,UAAAA,KAAK,CAACU,WAAN,CAAkB0B,CAAlB;AACH;AACJ,OAnBD;AAoBH,KAtCD;;AAuCA,QAAI4G,MAAM,GAAG,IAAb;;AACA,SAAK,IAAItN,CAAC,GAAG,CAAR,EAAWoN,QAAQ,GAAG3G,MAAM,CAACxG,MAAlC,EAA0CD,CAAC,GAAGoN,QAA9C,EAAwDpN,CAAC,EAAzD,EAA6D;AACzDmN,MAAAA,OAAO,CAACnN,CAAD,EAAIoN,QAAJ,CAAP;AACH;;AACD,SAAKlM,SAAL,CAAe6D,SAAf,CAAyBC,WAAzB,CAAqCV,KAArC;AACH,GAzED;;AA0EArD,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4BmO,oBAA5B,GAAmD,UAAUE,SAAV,EAAqB9B,MAArB,EAA6B3J,CAA7B,EAAgCQ,KAAhC,EAAuC9C,MAAvC,EAA+C0L,IAA/C,EAAqDnG,OAArD,EAA8D;AAC7G,QAAIwI,SAAS,KAAK,MAAlB,EAA0B;AACtB,aAAO;AAAEzL,QAAAA,CAAC,EAAEA,CAAL;AAAQ2J,QAAAA,MAAM,EAAEA;AAAhB,OAAP;AACH;;AACD,QAAInJ,KAAK,KAAK,CAAV,IAAiBR,CAAC,GAAIoJ,IAAI,CAACjG,KAAL,GAAa,CAAlB,GAAuBF,OAAxB,IAAoC,CAAxD,EAA4D;AACxD,UAAIwI,SAAS,KAAK,MAAlB,EAA0B;AACtB9B,QAAAA,MAAM,GAAG,KAAT;AACH,OAFD,MAGK;AACD3J,QAAAA,CAAC,GAAG,KAAKrB,SAAL,CAAesE,OAAf,CAAuBG,IAAvB,GAA8BH,OAA9B,GAAyCmG,IAAI,CAACjG,KAAL,GAAa,CAA1D;AACH;AACJ,KAPD,MAQK,IAAI3C,KAAK,KAAK9C,MAAM,GAAG,CAAnB,IAA0BsC,CAAC,GAAIoJ,IAAI,CAACjG,KAAL,GAAa,CAAlB,GAAuBF,OAAxB,IAAoC,KAAKtE,SAAL,CAAeqE,aAAf,CAA6BG,KAA9F,EAAsG;AACvG,UAAIsI,SAAS,KAAK,MAAlB,EAA0B;AACtB9B,QAAAA,MAAM,GAAG,KAAT;AACH,OAFD,MAGK;AACD3J,QAAAA,CAAC,IAAKoJ,IAAI,CAACjG,KAAL,GAAa,CAAb,GAAiBF,OAAvB;AACH;AACJ;;AACD,WAAO;AAAEjD,MAAAA,CAAC,EAAEA,CAAL;AAAQ2J,MAAAA,MAAM,EAAEA;AAAhB,KAAP;AACH,GArBD;AAsBA;AACJ;AACA;;;AACIjL,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4BkO,eAA5B,GAA8C,UAAU3B,MAAV,EAAkBvJ,IAAlB,EAAwB3C,CAAxB,EAA2BiO,KAA3B,EAAkChO,MAAlC,EAA0CuK,OAA1C,EAAmDD,MAAnD,EAA2D;AACrG,QAAI2D,YAAY,GAAGD,KAAK,CAACvC,OAAN,CAAcE,IAAd,GAAqBC,WAArB,EAAnB;;AACA,QAAIlJ,IAAI,CAAC+H,cAAL,GAAsB,KAAKL,UAA/B,EAA2C;AACvC6B,MAAAA,MAAM,GAAGA,MAAM,IAAKgC,YAAY,CAACpO,OAAb,CAAqB,UAArB,IAAmC,CAAC,CAAxD;AACH;;AACD,QAAIE,CAAC,KAAK,CAAV,EAAa;AACTkM,MAAAA,MAAM,GAAGA,MAAM,IAAKgC,YAAY,CAACpO,OAAb,CAAqB,OAArB,IAAgC,CAAC,CAArD;AACH,KAFD,MAGK,IAAKE,CAAC,KAAMC,MAAM,GAAG,CAArB,EAA0B;AAC3BiM,MAAAA,MAAM,GAAGA,MAAM,IAAKgC,YAAY,CAACpO,OAAb,CAAqB,KAArB,IAA8B,CAAC,CAAnD;AACH;;AACD,QAAI6C,IAAI,CAAC+H,cAAL,KAAwBF,OAA5B,EAAqC;AACjC0B,MAAAA,MAAM,GAAGA,MAAM,IAAKgC,YAAY,CAACpO,OAAb,CAAqB,MAArB,IAA+B,CAAC,CAApD;AACH,KAFD,MAGK,IAAI6C,IAAI,CAAC+H,cAAL,KAAwBH,MAA5B,EAAoC;AACrC2B,MAAAA,MAAM,GAAGA,MAAM,IAAKgC,YAAY,CAACpO,OAAb,CAAqB,KAArB,IAA8B,CAAC,CAAnD;AACH;;AACD,QAAImO,KAAK,CAACvC,OAAN,CAAcE,IAAd,GAAqBC,WAArB,GAAmC/L,OAAnC,CAA2C,MAA3C,IAAqD,CAAC,CAA1D,EAA6D;AACzDoM,MAAAA,MAAM,GAAG,KAAT;AACH;;AACD,WAAOA,MAAP;AACH,GArBD;AAsBA;AACJ;AACA;;;AACIjL,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4B8N,SAA5B,GAAwC,UAAUD,MAAV,EAAkBpM,IAAlB,EAAwB;AAC5D,QAAIjB,iBAAiB,CAACqN,MAAD,CAArB,EAA+B;AAC3B,aAAO,IAAP;AACH;;AACD,QAAIW,IAAI,GAAGzO,MAAM,CAACyO,IAAP,CAAY/M,IAAZ,CAAX;;AACA,SAAK,IAAIgN,EAAE,GAAG,CAAT,EAAYC,MAAM,GAAGF,IAA1B,EAAgCC,EAAE,GAAGC,MAAM,CAACpO,MAA5C,EAAoDmO,EAAE,EAAtD,EAA0D;AACtD,UAAIE,GAAG,GAAGD,MAAM,CAACD,EAAD,CAAhB;AACAZ,MAAAA,MAAM,GAAGA,MAAM,CAACe,KAAP,CAAa,OAAOD,GAAP,GAAa,GAA1B,EAA+B1C,IAA/B,CAAoCxK,IAAI,CAACkN,GAAD,CAAxC,CAAT;AACH;;AACD,WAAOd,MAAP;AACH,GAVD;AAWA;AACJ;AACA;;;AACIvM,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4BgC,eAA5B,GAA8C,YAAY;AACtD,SAAK6M,UAAL,CAAgB,KAAKtN,SAAL,CAAeQ,aAA/B;AACH,GAFD;AAGA;AACJ;AACA;;;AACIT,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4B8O,WAA5B,GAA0C,UAAUrN,IAAV,EAAgBmB,CAAhB,EAAmB6B,IAAnB,EAAyB;AAC/D,QAAIsK,QAAQ,GAAG,CAAf;AACA,QAAIC,EAAE,GAAGvN,IAAI,CAAC,CAAD,CAAJ,CAAQmB,CAAR,CAAT;AACA,QAAIqM,EAAE,GAAGzO,iBAAiB,CAACiB,IAAI,CAAC,CAAD,CAAL,CAAjB,GAA6ByN,SAA7B,GAAyCzN,IAAI,CAAC,CAAD,CAAJ,CAAQmB,CAAR,CAAlD;;AACA,QAAI,CAACpC,iBAAiB,CAACwO,EAAD,CAAlB,IAA0B,CAACxO,iBAAiB,CAACyO,EAAD,CAAhD,EAAsD;AAClD,UAAIjM,IAAI,GAAGzC,MAAM,CAAC,EAAD,EAAKkB,IAAL,CAAjB;AACA,UAAI0N,WAAW,GAAG,EAAlB;AACAnM,MAAAA,IAAI,CAACE,OAAL,CAAa,UAAUC,KAAV,EAAiB;AAC1B,YAAI,CAAC3C,iBAAiB,CAAC2C,KAAK,CAACP,CAAD,CAAN,CAAtB,EAAkC;AAC9BuM,UAAAA,WAAW,CAAC9L,IAAZ,CAAiBF,KAAjB;AACH;AACJ,OAJD;AAKAgM,MAAAA,WAAW,CAACC,IAAZ,CAAiB,UAAU5G,CAAV,EAAa6G,CAAb,EAAgB;AAC7B,YAAI7O,iBAAiB,CAACgI,CAAC,CAAC5F,CAAD,CAAF,CAAjB,IAA2BpC,iBAAiB,CAAC6O,CAAC,CAACzM,CAAD,CAAF,CAAhD,EAAwD;AACpD,iBAAO,CAAP;AACH;;AACD,eAAO4F,CAAC,CAAC5F,CAAD,CAAD,GAAOyM,CAAC,CAACzM,CAAD,CAAf;AACH,OALD;AAMAuM,MAAAA,WAAW,GAAI,KAAK5N,SAAL,CAAeM,SAAhB,GAA6BsN,WAAW,CAACrN,OAAZ,EAA7B,GAAqDqN,WAAnE;AACAJ,MAAAA,QAAQ,GAAGI,WAAW,CAAC,CAAD,CAAX,CAAevM,CAAf,IAAoBuM,WAAW,CAAC,CAAD,CAAX,CAAevM,CAAf,CAA/B;AACH;;AACD,WAAOmM,QAAP;AACH,GAtBD;AAuBA;AACJ;AACA;;;AACIzN,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4BsP,kBAA5B,GAAiD,UAAU7N,IAAV,EAAgBmB,CAAhB,EAAmB6B,IAAnB,EAAyB8K,KAAzB,EAAgC;AAC7E,QAAIR,QAAQ,GAAG,CAAf;AACA,QAAI/C,IAAI,GAAG,KAAKzK,SAAL,CAAeqE,aAAf,CAA6BD,MAAxC;AACA,QAAI6J,aAAa,GAAGT,QAAQ,GAAGtN,IAAI,CAACnB,MAApC;AACAkP,IAAAA,aAAa,GAAG9G,IAAI,CAACE,GAAL,CAAUoD,IAAI,IAAIwD,aAAa,GAAG,GAApB,CAAd,EAAyC,CAAzC,CAAhB;AACA,QAAIC,YAAY,GAAGF,KAAK,GAAGC,aAA3B;AACA,QAAIE,WAAW,GAAGhH,IAAI,CAACiH,GAAL,CAAS,EAAT,EAAajH,IAAI,CAACkH,KAAL,CAAWnP,OAAO,CAACgP,YAAD,EAAe,EAAf,CAAlB,CAAb,CAAlB;;AACA,SAAK,IAAIhB,EAAE,GAAG,CAAT,EAAYoB,EAAE,GAAG,KAAKtO,SAAL,CAAeuO,YAArC,EAAmDrB,EAAE,GAAGoB,EAAE,CAACvP,MAA3D,EAAmEmO,EAAE,EAArE,EAAyE;AACrE,UAAIsB,WAAW,GAAGF,EAAE,CAACpB,EAAD,CAApB;AACA,UAAIuB,eAAe,GAAGjB,QAAQ,GAAGgB,WAAjC;;AACA,UAAIP,aAAa,GAAID,KAAK,GAAGS,eAA7B,EAA+C;AAC3C;AACH;;AACDP,MAAAA,YAAY,GAAGO,eAAf;AACH;;AACD,WAAOP,YAAP;AACH,GAhBD;AAiBA;AACJ;AACA;AACI;;;AACAnO,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4B6O,UAA5B,GAAyC,UAAUpN,IAAV,EAAgB;AACrD,QAAIiE,KAAK,GAAG,KAAKnE,SAAjB;AACA,QAAIqH,GAAJ;AACA,QAAIvC,GAAJ;AACA,QAAI4J,IAAJ;AACA,QAAIC,IAAJ;AACA,QAAIC,eAAe,GAAG1O,IAAI,CAACnB,MAA3B;AACA,QAAI0C,IAAJ;AACA,QAAIoN,WAAW,GAAG,CAAlB;AACA,QAAIC,cAAc,GAAGC,KAAK,CAACC,OAAN,CAAc9O,IAAd,KAAuB,OAAOA,IAAI,CAAC,CAAD,CAAX,KAAmB,QAA/D;;AACA,QAAI4O,cAAJ,EAAoB;AAChB,UAAI3K,KAAK,CAACjB,IAAN,KAAe,KAAnB,EAA0B;AACtB,aAAK,IAAIpE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8P,eAApB,EAAqC9P,CAAC,EAAtC,EAA0C;AACtC+P,UAAAA,WAAW,IAAI1H,IAAI,CAAC8H,GAAL,CAAS/O,IAAI,CAACpB,CAAD,CAAb,CAAf;AACH;AACJ,OAJD,MAKK;AACDuI,QAAAA,GAAG,GAAGF,IAAI,CAACE,GAAL,CAASD,KAAT,CAAe,IAAf,EAAqBlH,IAArB,CAAN;AACA4E,QAAAA,GAAG,GAAGqC,IAAI,CAACrC,GAAL,CAASsC,KAAT,CAAe,IAAf,EAAqBlH,IAArB,CAAN;AACAwO,QAAAA,IAAI,GAAG,CAAP;AACAC,QAAAA,IAAI,GAAGC,eAAe,GAAG,CAAzB;AACH;AACJ,KAZD,MAaK;AACD,UAAIzK,KAAK,CAACjB,IAAN,KAAe,KAAnB,EAA0B;AACtB,aAAK,IAAIpE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8P,eAApB,EAAqC9P,CAAC,EAAtC,EAA0C;AACtC+P,UAAAA,WAAW,IAAI1H,IAAI,CAAC8H,GAAL,CAAS/O,IAAI,CAACpB,CAAD,CAAJ,CAAQqF,KAAK,CAAC3C,KAAd,CAAT,CAAf;AACH;AACJ,OAJD,MAKK;AACD,YAAIvC,iBAAiB,CAACiB,IAAI,CAAC,CAAD,CAAJ,CAAQiE,KAAK,CAAC5C,KAAd,CAAD,CAArB,EAA6C;AACzC,cAAI2N,GAAG,GAAGhP,IAAI,CAAC8G,GAAL,CAAS,UAAUmI,CAAV,EAAa;AAAE,mBAAOA,CAAC,CAAChL,KAAK,CAAC3C,KAAP,CAAR;AAAwB,WAAhD,CAAV;AACA6F,UAAAA,GAAG,GAAGF,IAAI,CAACE,GAAL,CAASD,KAAT,CAAe,IAAf,EAAqB8H,GAArB,CAAN;AACApK,UAAAA,GAAG,GAAGqC,IAAI,CAACrC,GAAL,CAASsC,KAAT,CAAe,IAAf,EAAqB8H,GAArB,CAAN;AACH,SAJD,MAKK;AACDzN,UAAAA,IAAI,GAAGzC,MAAM,CAAC,EAAD,EAAKkB,IAAL,CAAb;AACAuB,UAAAA,IAAI,GAAGA,IAAI,CAACoM,IAAL,CAAU,UAAU5G,CAAV,EAAa6G,CAAb,EAAgB;AAAE,mBAAO7G,CAAC,CAAC9C,KAAK,CAAC3C,KAAP,CAAD,GAAiBsM,CAAC,CAAC3J,KAAK,CAAC3C,KAAP,CAAzB;AAAyC,WAArE,CAAP;AACA6F,UAAAA,GAAG,GAAG5F,IAAI,CAACA,IAAI,CAAC1C,MAAL,GAAc,CAAf,CAAJ,CAAsBoF,KAAK,CAAC3C,KAA5B,CAAN;AACAsD,UAAAA,GAAG,GAAGrD,IAAI,CAAC,CAAD,CAAJ,CAAQ0C,KAAK,CAAC3C,KAAd,CAAN;AACH;;AACD,YAAI,CAACvC,iBAAiB,CAACiB,IAAI,CAAC,CAAD,CAAJ,CAAQiE,KAAK,CAAC5C,KAAd,CAAD,CAAtB,EAA8C;AAC1CE,UAAAA,IAAI,GAAGA,IAAI,CAACoM,IAAL,CAAU,UAAU5G,CAAV,EAAa6G,CAAb,EAAgB;AAAE,mBAAO7G,CAAC,CAAC9C,KAAK,CAAC5C,KAAP,CAAD,GAAiBuM,CAAC,CAAC3J,KAAK,CAAC5C,KAAP,CAAzB;AAAyC,WAArE,CAAP;AACAE,UAAAA,IAAI,GAAI,KAAKzB,SAAL,CAAeM,SAAhB,GAA6BmB,IAAI,CAAClB,OAAL,EAA7B,GAA8CkB,IAArD;AACAkN,UAAAA,IAAI,GAAGlN,IAAI,CAACA,IAAI,CAAC1C,MAAL,GAAc,CAAf,CAAJ,CAAsBoF,KAAK,CAAC5C,KAA5B,CAAP;AACAmN,UAAAA,IAAI,GAAGjN,IAAI,CAAC,CAAD,CAAJ,CAAQ0C,KAAK,CAAC5C,KAAd,CAAP;AACH,SALD,MAMK;AACDmN,UAAAA,IAAI,GAAG,CAAP;AACAC,UAAAA,IAAI,GAAGC,eAAe,GAAG,CAAzB;AACH;AACJ;AACJ;;AACD,QAAIQ,EAAJ;AACA,QAAIhL,MAAJ;AACA,QAAII,KAAJ;AACA,QAAIiJ,EAAE,GAAG,CAAT;AACA,QAAI4B,EAAJ;AACA,QAAI/K,OAAO,GAAGH,KAAK,CAACG,OAApB;AACA,QAAIgL,KAAJ;AACA,QAAIC,IAAI,GAAGpL,KAAK,CAACZ,YAAjB;AACA,QAAI3B,KAAK,GAAG2N,IAAI,CAAC3N,KAAjB;AACA,QAAI6D,KAAK,GAAGtB,KAAK,CAACsB,KAAN,CAAYkF,WAAZ,EAAZ;;AACA,QAAIxG,KAAK,CAACjB,IAAN,KAAe,KAAnB,EAA0B;AACtB,WAAKsM,SAAL,GAAiBZ,eAAjB;AACAxK,MAAAA,MAAM,GAAGD,KAAK,CAACE,aAAN,CAAoBD,MAApB,IAA8BE,OAAO,CAACwB,MAAR,GAAiBxB,OAAO,CAACC,GAAvD,CAAT;AACAC,MAAAA,KAAK,GAAGL,KAAK,CAACE,aAAN,CAAoBG,KAApB,IAA6BF,OAAO,CAACG,IAAR,GAAeH,OAAO,CAACyB,KAApD,CAAR;AACA4I,MAAAA,IAAI,GAAG1P,iBAAiB,CAACsQ,IAAI,CAACZ,IAAN,CAAjB,GAA+BA,IAA/B,GAAsCY,IAAI,CAACZ,IAAlD;AACAD,MAAAA,IAAI,GAAGzP,iBAAiB,CAACsQ,IAAI,CAACb,IAAN,CAAjB,GAA+BA,IAA/B,GAAsCa,IAAI,CAACb,IAAlD;AACArH,MAAAA,GAAG,GAAGpI,iBAAiB,CAACsQ,IAAI,CAAC7L,IAAN,CAAjB,GAA+B2D,GAA/B,GAAqCkI,IAAI,CAAC7L,IAAhD;AACAoB,MAAAA,GAAG,GAAG7F,iBAAiB,CAACsQ,IAAI,CAAC/L,IAAN,CAAjB,GAA+BsB,GAA/B,GAAqCyK,IAAI,CAAC/L,IAAhD;AACA,UAAIwB,KAAK,GAAGuK,IAAI,CAACE,YAAL,CAAkBzK,KAAlB,IAA2B,KAAKhF,SAAL,CAAeiF,UAAf,CAA0BS,aAAjE;AACA,UAAIuE,SAAS,GAAG;AACZxH,QAAAA,IAAI,EAAE,eADM;AACWC,QAAAA,MAAM,EAAE,KADnB;AAC0B1C,QAAAA,SAAS,EAAE,CAAC,KAAKA,SAAL,CAAe8C,QAAhB,GAA2BqB,KAA3B,GAAmC,IADxE;AAEZwK,QAAAA,IAAI,EAAEA,IAFM;AAEAD,QAAAA,IAAI,EAAEA,IAFN;AAEYhL,QAAAA,IAAI,EAAE2D,GAFlB;AAEuB7D,QAAAA,IAAI,EAAEsB,GAF7B;AAEkClD,QAAAA,KAAK,EAAE2N,IAAI,CAAC3N,KAF9C;AAGZ8N,QAAAA,SAAS,EAAE1K,KAHC;AAGMrC,QAAAA,SAAS,EAAE4M,IAAI,CAACE,YAAL,CAAkBjL;AAHnC,OAAhB;AAKAL,MAAAA,KAAK,CAACD,OAAN,CAAc,eAAd,EAA+B+F,SAA/B;;AACA,UAAIA,SAAS,CAACvH,MAAd,EAAsB;AAClB,aAAKO,aAAL,GAAqB,EAArB;AACA;AACH;;AACD0L,MAAAA,IAAI,GAAG1E,SAAS,CAAC0E,IAAjB;AACAD,MAAAA,IAAI,GAAGzE,SAAS,CAACyE,IAAjB;AACArH,MAAAA,GAAG,GAAG4C,SAAS,CAACvG,IAAhB;AACAoB,MAAAA,GAAG,GAAGmF,SAAS,CAACzG,IAAhB;AACA5B,MAAAA,KAAK,GAAG,KAAKwI,SAAL,GAAiBH,SAAS,CAACrI,KAAnC;AACA,WAAK+N,SAAL,GAAiB1F,SAAS,CAACyF,SAA3B;AACA,WAAKE,SAAL,GAAiB3F,SAAS,CAACtH,SAA3B;AACH;;AACD,QAAIkN,KAAK,GAAGlB,IAAI,GAAGD,IAAnB;AACA,QAAI7J,KAAK,GAAGwC,GAAG,GAAGvC,GAAlB;AACA+K,IAAAA,KAAK,GAAIA,KAAK,KAAK,CAAX,GAAgB,CAAhB,GAAoBA,KAA5B;AACAhL,IAAAA,KAAK,GAAIA,KAAK,KAAK,CAAX,GAAgB,CAAhB,GAAoBA,KAA5B;AACA,SAAKgL,KAAL,GAAaA,KAAb;AACA,SAAKhL,KAAL,GAAaA,KAAb;AACA,SAAKC,GAAL,GAAWA,GAAX;AACA2I,IAAAA,EAAE,GAAG,CAAL;AACA4B,IAAAA,EAAE,GAAGjL,MAAM,GAAKA,MAAM,GAAGS,KAAV,GAAoB,CAACC,GAApC;AACAuK,IAAAA,EAAE,GAAIvK,GAAG,GAAG,CAAN,IAAWuC,GAAG,IAAI,CAAnB,GAAwB,CAAxB,GAA6BvC,GAAG,GAAG,CAAN,IAAWuC,GAAG,GAAG,CAAlB,GAAuBgI,EAAvB,GAA4BjL,MAA7D;;AACA,QAAIxC,KAAK,IAAIkD,GAAT,IAAgBlD,KAAK,IAAIyF,GAA7B,EAAkC;AAC9BgI,MAAAA,EAAE,GAAGjL,MAAM,GAAG+C,IAAI,CAAC2I,KAAL,CAAW1L,MAAM,IAAI,CAACxC,KAAK,GAAGkD,GAAT,IAAgB,KAAKD,KAAzB,CAAjB,CAAd;AACH;;AACD,SAAKsE,UAAL,GAAkBkG,EAAE,GAAG/K,OAAO,CAACC,GAA/B;AACA,QAAIwL,OAAJ;AACA,QAAI1O,CAAJ;AACA,QAAIC,CAAJ;AACA,QAAI2B,aAAa,GAAG,EAApB;AACA,QAAI+K,KAAK,GAAG3G,GAAG,GAAGvC,GAAlB;AACA,QAAI0I,QAAQ,GAAG,KAAKD,WAAL,CAAiBrN,IAAjB,EAAuBiE,KAAK,CAAC5C,KAA7B,EAAoC4C,KAAK,CAAC9D,SAA1C,CAAf;AACA,QAAI2P,QAAQ,GAAG,KAAKjC,kBAAL,CAAwB7N,IAAxB,EAA8BiE,KAAK,CAAC5C,KAApC,EAA2C4C,KAAK,CAAC9D,SAAjD,EAA4D2N,KAA5D,CAAf;;AACA,SAAK,IAAIlP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8P,eAApB,EAAqC9P,CAAC,EAAtC,EAA0C;AACtC,UAAIG,iBAAiB,CAACiB,IAAI,CAACpB,CAAD,CAAJ,CAAQqF,KAAK,CAAC5C,KAAd,CAAD,CAAjB,IAA2CtC,iBAAiB,CAACiB,IAAI,CAACpB,CAAD,CAAJ,CAAQqF,KAAK,CAAC3C,KAAd,CAAD,CAA5D,IAAwFtB,IAAI,CAACpB,CAAD,CAAJ,CAAQqF,KAAK,CAAC3C,KAAd,CAAD,KAA2B,CAAlH,IACGsN,cADP,EACuB;AACnBzN,QAAAA,CAAC,GAAGvC,CAAJ;AACAwC,QAAAA,CAAC,GAAGpB,IAAI,CAACpB,CAAD,CAAR;AACH,OAJD,MAKK,IAAIG,iBAAiB,CAACiB,IAAI,CAACpB,CAAD,CAAJ,CAAQqF,KAAK,CAAC5C,KAAd,CAAD,CAArB,EAA6C;AAC9CF,QAAAA,CAAC,GAAGvC,CAAJ;AACAwC,QAAAA,CAAC,GAAGpB,IAAI,CAACpB,CAAD,CAAJ,CAAQqF,KAAK,CAAC3C,KAAd,CAAJ;AACH,OAHI,MAIA;AACDH,QAAAA,CAAC,GAAGnB,IAAI,CAACpB,CAAD,CAAJ,CAAQqF,KAAK,CAAC5C,KAAd,CAAJ;AACAD,QAAAA,CAAC,GAAGpB,IAAI,CAACpB,CAAD,CAAJ,CAAQqF,KAAK,CAAC3C,KAAd,CAAJ;AACH;;AACD,UAAIvC,iBAAiB,CAACoC,CAAD,CAAjB,IAAwBpC,iBAAiB,CAACqC,CAAD,CAA7C,EAAkD;AAC9C;AACH;;AACD,UAAI6C,KAAK,CAACjB,IAAN,KAAe,MAAf,IAAyBiB,KAAK,CAACjB,IAAN,KAAe,MAA5C,EAAoD;AAChDkM,QAAAA,EAAE,GAAItK,GAAG,KAAKuC,GAAR,IAAeuH,eAAe,KAAK,CAApC,GAAyCxK,MAAM,GAAG+C,IAAI,CAAC2I,KAAL,CAAW1L,MAAM,IAAI,CAAC9C,CAAC,GAAGwD,GAAL,IAAY,KAAKD,KAArB,CAAjB,CAAlD,GAAkGP,OAAO,CAACC,GAA/G;AACA+K,QAAAA,KAAK,GAAG;AAAEjO,UAAAA,CAAC,EAAGqN,IAAI,KAAKC,IAAV,GAAkBxH,IAAI,CAAC2I,KAAL,CAAWtL,KAAK,IAAI,CAACnD,CAAC,GAAGqN,IAAL,IAAa,KAAKmB,KAAtB,CAAhB,CAAlB,GAAkErL,KAAK,GAAG,CAA/E;AAAkFlD,UAAAA,CAAC,EAAE8N,EAArF;AAAyF5F,UAAAA,cAAc,EAAE4F;AAAzG,SAAR;AACH,OAHD,MAIK,IAAIjL,KAAK,CAACjB,IAAN,KAAe,QAAf,IAA2BiB,KAAK,CAACjB,IAAN,KAAe,SAA9C,EAAyD;AAC1D,YAAI+M,QAAQ,GAAGzL,KAAK,IAAK,CAACmK,IAAI,GAAGD,IAAR,IAAgBlB,QAAjB,GAA6B,CAAjC,CAApB;AACA,YAAI0C,QAAQ,GAAG,GAAf;AACA,YAAIrE,KAAK,GAAIqE,QAAQ,GAAG,CAAxB,CAH0D,CAG9B;;AAC5BD,QAAAA,QAAQ,IAAKpE,KAAb;AACA4B,QAAAA,EAAE,GAAK,CAACpM,CAAC,GAAGqN,IAAL,IAAalB,QAAd,IAA2ByC,QAAQ,GAAGpE,KAAtC,CAAD,GAAkDA,KAAK,GAAG,CAA/D;;AACA,YAAI1H,KAAK,CAACjB,IAAN,KAAe,SAAnB,EAA8B;AAC1B;AACA,cAAIiN,aAAa,GAAG,GAApB;AACA,cAAIC,gBAAgB,GAAG,EAAvB;AACAhB,UAAAA,EAAE,GAAI9N,CAAC,GAAGM,KAAL,GAAewC,MAAM,GAAG,CAAxB,GAA8B9C,CAAC,GAAGM,KAAL,GAAewC,MAAM,GAAG+L,aAAxB,GAC5B/L,MAAM,GAAG+L,aAAV,GAA4B/L,MAAM,GAAGgM,gBAD1C;AAEAd,UAAAA,KAAK,GAAG;AACJjO,YAAAA,CAAC,EAAEoM,EADC;AACGnM,YAAAA,CAAC,EAAE8N,EADN;AACUhL,YAAAA,MAAM,EAAG9C,CAAC,KAAKM,KAAP,GAAiBwC,MAAM,GAAG,CAA1B,GAA+BA,MAAM,GAAG,EAD1D;AAC8DI,YAAAA,KAAK,EAAEyL,QADrE;AAEJzG,YAAAA,cAAc,EAAG4F,EAAE,GAAGC,EAAN,GAAaA,EAAE,GAAGlI,IAAI,CAAC8H,GAAL,CAASG,EAAE,GAAGC,EAAd,CAAlB,GAAuCD;AAFnD,WAAR;AAIH,SAVD,MAWK;AACD,cAAItQ,CAAC,KAAK,CAAN,IAAWqF,KAAK,CAACkM,YAAN,KAAuB,MAAtC,EAA8C;AAC1CvL,YAAAA,GAAG,IAAIX,KAAK,CAACkM,YAAN,KAAuB,YAAvB,GAAuCL,QAAQ,GAAG1L,OAAO,CAACC,GAA1D,GAAiEyL,QAAxE;AACA3I,YAAAA,GAAG,IAAIlD,KAAK,CAACkM,YAAN,KAAuB,YAAvB,GAAuCL,QAAQ,GAAG1L,OAAO,CAACC,GAA1D,GAAiEyL,QAAxE;AACAH,YAAAA,KAAK,GAAGlB,IAAI,GAAGD,IAAf;AACA7J,YAAAA,KAAK,GAAGwC,GAAG,GAAGvC,GAAd;AACA+K,YAAAA,KAAK,GAAIA,KAAK,KAAK,CAAX,GAAgB,CAAhB,GAAoBA,KAA5B;AACAhL,YAAAA,KAAK,GAAIA,KAAK,KAAK,CAAX,GAAgB,CAAhB,GAAoBA,KAA5B;AACA,iBAAKgL,KAAL,GAAaA,KAAb;AACA,iBAAKhL,KAAL,GAAaA,KAAb;AACA,iBAAKC,GAAL,GAAWA,GAAX;AACH;;AACD,cAAIqK,CAAC,GAAK/K,MAAM,GAAG,KAAKS,KAAf,IAAyBvD,CAAC,GAAGwD,GAA7B,CAAT;AACA,cAAIwL,EAAE,GAAIhP,CAAC,KAAKwD,GAAN,IAAaxD,CAAC,GAAGM,KAAlB,GAA6BgN,eAAe,KAAK,CAApB,IAAyB,KAAK/J,KAAL,KAAe,CAAzC,GAChCT,MAAM,GAAG,KAAKS,KAAf,IAAyBC,GAAG,GAAG,CAA/B,CADiC,GACIqK,CAAC,GAAG,CADpC,GAEJ7N,CAAC,KAAK+F,GAAN,IAAa/F,CAAC,GAAGM,KAAjB,IAA0BgN,eAAe,KAAK,CAA9C,IAAmD,KAAK/J,KAAL,KAAe,CAAnE,GAAyET,MAAM,GAAG,KAAKS,KAAf,IAAyB,CAACwC,GAAD,GAAO,CAAhC,CAAxE,GAA6G8H,CAFjH;AAGAC,UAAAA,EAAE,GAAGjI,IAAI,CAAC8H,GAAL,CAAS7K,MAAM,GAAGkM,EAAlB,CAAL;AACAhB,UAAAA,KAAK,GAAG;AACJjO,YAAAA,CAAC,EAAEoM,EADC;AACGnM,YAAAA,CAAC,EAAG8N,EAAE,GAAGC,EAAN,GAAYA,EAAZ,GAAiBD,EADvB;AAC2BhL,YAAAA,MAAM,EAAE+C,IAAI,CAAC8H,GAAL,CAASG,EAAE,GAAGC,EAAd,CADnC;AAEJ7K,YAAAA,KAAK,EAAEyL,QAFH;AAEazG,YAAAA,cAAc,EAAG4F,EAAE,GAAGC,EAAN,GAAaA,EAAE,GAAGlI,IAAI,CAAC8H,GAAL,CAASG,EAAE,GAAGC,EAAd,CAAlB,GAAuCD;AAFpE,WAAR;AAIH;AACJ,OAvCI,MAwCA,IAAIjL,KAAK,CAACjB,IAAN,KAAe,KAAnB,EAA0B;AAC3B6M,QAAAA,OAAO,GAAI5I,IAAI,CAAC8H,GAAL,CAAS3N,CAAT,IAAcuN,WAAf,GAA8B,GAAxC;AACAS,QAAAA,KAAK,GAAG;AACJS,UAAAA,OAAO,EAAEA,OADL;AACcQ,UAAAA,MAAM,EAAIpJ,IAAI,CAAC8H,GAAL,CAAS3N,CAAT,IAAcuN,WAAf,GAA8B;AADrD,SAAR;AAGH;;AACD,UAAI1K,KAAK,CAACjB,IAAN,KAAe,KAAnB,EAA0B;AACtBoM,QAAAA,KAAK,CAACjO,CAAN,IAAWiD,OAAO,CAACG,IAAnB;AACA6K,QAAAA,KAAK,CAAChO,CAAN,IAAWgD,OAAO,CAACC,GAAnB;AACH;;AACD,UAAIJ,KAAK,CAACjB,IAAN,KAAe,SAAnB,EAA8B;AAC1BoM,QAAAA,KAAK,CAAC9F,cAAN,IAAwBlF,OAAO,CAACC,GAAhC;AACH;;AACD+K,MAAAA,KAAK,CAAC9G,QAAN,GAAiB;AAAEnH,QAAAA,CAAC,EAAEiO,KAAK,CAACjO,CAAX;AAAcC,QAAAA,CAAC,EAAEgO,KAAK,CAAChO;AAAvB,OAAjB;AACAgO,MAAAA,KAAK,CAACkB,IAAN,GAAanP,CAAb;AACAiO,MAAAA,KAAK,CAACpI,IAAN,GAAa5F,CAAb;AACA2B,MAAAA,aAAa,CAACnB,IAAd,CAAmBwN,KAAnB;AACH;;AACDrM,IAAAA,aAAa,CAAC4K,IAAd,CAAmB,UAAU5G,CAAV,EAAa6G,CAAb,EAAgB;AAC/B,aAAO7G,CAAC,CAAC5F,CAAF,GAAMyM,CAAC,CAACzM,CAAf;AACH,KAFD;AAGA,SAAK4B,aAAL,GAAqBA,aAArB;AACH,GAlMD;AAmMA;AACJ;AACA;;;AACIlD,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4B8D,QAA5B,GAAuC,YAAY;AAC/C,QAAIJ,KAAK,GAAG,KAAKnC,SAAjB;AACA,QAAIoE,MAAM,GAAG,KAAK+E,UAAlB;;AACA,QAAKhH,KAAK,CAACe,IAAN,KAAe,SAAhB,IAA+Bf,KAAK,CAACe,IAAN,KAAe,KAA9C,IAAwDf,KAAK,CAACoB,YAAN,CAAmBkM,YAAnB,CAAgCjF,OAA5F,EAAqG;AACjG,UAAIiG,KAAK,GAAG;AACR,cAAMtO,KAAK,CAACE,OAAN,CAAcC,EAAd,GAAmB,kBADjB;AAER,cAAMH,KAAK,CAACmC,OAAN,CAAcG,IAFZ;AAEkB,cAAML,MAFxB;AAGR,cAAMjC,KAAK,CAACkC,aAAN,CAAoBG,KAApB,GAA4BrC,KAAK,CAACmC,OAAN,CAAcyB,KAHxC;AAG+C,cAAM3B,MAHrD;AAIR,kBAAU,KAAKuL,SAJP;AAKR,mBAAWxN,KAAK,CAACoB,YAAN,CAAmBkM,YAAnB,CAAgCpK,OALnC;AAMR,4BAAoBlD,KAAK,CAACoB,YAAN,CAAmBkM,YAAnB,CAAgCiB,SAN5C;AAOR,wBAAgB,KAAKd,SAPb;AAQR,qBAAa,UAAU,KAAKxN,MAAf,GAAwB;AAR7B,OAAZ;AAUAD,MAAAA,KAAK,CAAC0B,SAAN,CAAgBC,WAAhB,CAA4B3B,KAAK,CAACkB,QAAN,CAAesN,QAAf,CAAwBF,KAAxB,CAA5B;AACH;AACJ,GAhBD;AAiBA;AACJ;AACA;;;AACI1Q,EAAAA,iBAAiB,CAACtB,SAAlB,CAA4B2J,kBAA5B,GAAiD,UAAU3F,IAAV,EAAgB3D,CAAhB,EAAmB+D,IAAnB,EAAyBD,MAAzB,EAAiC;AAC9E,QAAII,IAAI,GAAG;AACPP,MAAAA,IAAI,EAAEA,IADC;AACKC,MAAAA,MAAM,EAAE,KADb;AAEPE,MAAAA,MAAM,EAAEA,MAFD;AAESC,MAAAA,IAAI,EAAEA,IAFf;AAGP7C,MAAAA,SAAS,EAAE,CAAC,KAAKA,SAAL,CAAe8C,QAAhB,GAA2B,KAAK9C,SAAhC,GAA4C,IAHhD;AAIP+J,MAAAA,UAAU,EAAEjL;AAJL,KAAX;AAMA,SAAKkB,SAAL,CAAekE,OAAf,CAAuBzB,IAAvB,EAA6BO,IAA7B;AACA,WAAOA,IAAP;AACH,GATD;;AAUA,SAAOjD,iBAAP;AACH,CAn6BsC,EAAvC;;AAo6BA,SAASA,iBAAT","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { logBase } from '../../common/utils/helper';\nimport { PathOption, drawPath, drawRectangle, RectOption, Rect, CircleOption, drawCircle } from '../utils/helper';\nimport { measureText, renderTextElement, TextOption } from '../utils/helper';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\n/**\n * Sparkline rendering calculation file\n */\nvar SparklineRenderer = /** @class */ (function () {\n    /**\n     * Sparkline data calculations\n     * @param sparkline\n     */\n    function SparklineRenderer(sparkline) {\n        this.sparkline = sparkline;\n    }\n    /**\n     * To process the sparkline data\n     */\n    SparklineRenderer.prototype.processData = function () {\n        var data = this.sparkline.dataSource;\n        if (isNullOrUndefined(data) || !data.length) {\n            return;\n        }\n        else if (!isNaN(this.sparkline.dataSource[0]) || this.sparkline.valueType === 'Numeric') {\n            data = (this.sparkline.enableRtl) ? data.reverse() : data;\n            this.sparkline.sparklineData = data; // extend([], data) as Object[];\n        }\n        else {\n            this['process' + this.sparkline.valueType]();\n        }\n        this.axisCalculation();\n    };\n    /* tslint:disable:no-string-literal */\n    /* tslint:disable:no-eval */\n    SparklineRenderer.prototype.processDataManager = function () {\n        var _this = this;\n        var dataModule;\n        var queryModule;\n        if (this.sparkline.dataSource instanceof DataManager) {\n            dataModule = this.sparkline.dataSource;\n            queryModule = this.sparkline.query instanceof Query ? this.sparkline.query : new Query();\n            var dataManager = dataModule.executeQuery(queryModule);\n            dataManager.then(function (e) {\n                _this.sparkline.setProperties({ dataSource: e['result'] }, true);\n                _this.sparkline.sparklineData = _this.sparkline.dataSource;\n                _this.sparkline.processSparklineData();\n            });\n        }\n        else {\n            this.sparkline.processSparklineData();\n        }\n    };\n    /**\n     * To process sparkline category data.\n     */\n    SparklineRenderer.prototype.processCategory = function (data, x, y) {\n        var _this = this;\n        if (data === void 0) { data = this.sparkline.dataSource; }\n        if (x === void 0) { x = this.sparkline.xName; }\n        if (y === void 0) { y = this.sparkline.yName; }\n        var temp = [];\n        var xValues = [];\n        data.forEach(function (value, index) {\n            if (xValues.indexOf(value[x]) === -1) {\n                xValues.push(value[x]);\n            }\n            var currentData = {};\n            currentData[_this.sparkline.xName] = xValues.indexOf(value[x]);\n            currentData[_this.sparkline.yName] = value[y];\n            temp.push(currentData);\n        });\n        this.sparkline.sparklineData = temp;\n    };\n    /**\n     * To process sparkline DateTime data.\n     */\n    SparklineRenderer.prototype.processDateTime = function (data, x, y) {\n        if (data === void 0) { data = this.sparkline.dataSource; }\n        if (x === void 0) { x = this.sparkline.xName; }\n        if (y === void 0) { y = this.sparkline.yName; }\n        var temp = [];\n        data.forEach(function (value, index) {\n            var currentData = {};\n            currentData[x] = value[x].getTime();\n            currentData[y] = value[y];\n            temp.push(currentData);\n        });\n        this.sparkline.sparklineData = temp;\n    };\n    /**\n     * To render sparkline series.\n     * @private\n     */\n    SparklineRenderer.prototype.renderSeries = function () {\n        var _this = this;\n        var spark = this.sparkline;\n        this.clipId = spark.element.id + '_sparkline_clip_path';\n        this.drawAxis();\n        var argsData = {\n            name: 'seriesRendering',\n            cancel: false,\n            lineWidth: spark.lineWidth,\n            border: spark.border,\n            fill: spark.fill,\n            sparkline: !this.sparkline.isBlazor ? spark : null\n        };\n        var seriesRenderingSuccess = function (args) {\n            if (!_this.visiblePoints || args.cancel) {\n                return;\n            }\n            if (spark.type !== 'Pie' && spark.type !== 'WinLoss' && spark.rangeBandSettings.length) {\n                var group = _this.sparkline.renderer.createGroup({ id: _this.sparkline.element.id + '_sparkline_rangeband_g' });\n                for (var i = 0; i < spark.rangeBandSettings.length; i++) {\n                    if ((spark.axisSettings.minY <= spark.rangeBandSettings[i].startRange) ||\n                        (spark.axisSettings.maxY >= spark.rangeBandSettings[i].endRange)) {\n                        _this.rangeBand(spark.rangeBandSettings[i], group, i);\n                    }\n                }\n                _this.sparkline.svgObject.appendChild(group);\n            }\n            _this['render' + spark.type](_this.visiblePoints, args);\n            _this.renderMarker(_this.visiblePoints);\n            _this.renderLabel(_this.visiblePoints);\n        };\n        seriesRenderingSuccess.bind(this);\n        spark.trigger('seriesRendering', argsData, seriesRenderingSuccess);\n    };\n    /**\n     * To render a range band\n     */\n    SparklineRenderer.prototype.rangeBand = function (rangeBandSettings, group, index) {\n        var model = this.sparkline;\n        var height = (model.availableSize.height) - model.padding.top * 2;\n        var width = (model.availableSize.width) - model.padding.left * 2;\n        var stValue = rangeBandSettings.startRange;\n        var edValue = rangeBandSettings.endRange;\n        var stHeight = (height - ((height / this.unitY) * (stValue - this.min))) + model.padding.top;\n        var edHeight = (height - ((height / this.unitY) * (edValue - this.min))) + model.padding.top;\n        var color = rangeBandSettings.color || this.sparkline.sparkTheme.rangeBandColor;\n        if (edHeight > (height + model.padding.top)) {\n            edHeight = (height + model.padding.top);\n        }\n        else if (edHeight < (0 + model.padding.top)) {\n            edHeight = (0 + model.padding.top);\n        }\n        if (stHeight > (height + model.padding.top)) {\n            stHeight = (height + model.padding.top);\n        }\n        else if (stHeight < (0 + model.padding.top)) {\n            stHeight = (0 + model.padding.top);\n        }\n        var path = 'M ' + (model.padding.left) + ' ' + stHeight + ' L ' + (width + (model.padding.left)) + ' ' + stHeight +\n            ' L ' + (width + (model.padding.left)) + ' ' + edHeight + ' L ' + (model.padding.left) + ' ' + edHeight + ' Z ';\n        var pathOption = {\n            'id': model.element.id + '_rangeBand_' + index,\n            'fill': color,\n            'opacity': rangeBandSettings.opacity,\n            'stroke': 'transparent',\n            'stroke-width': model.lineWidth,\n            'd': path,\n            'stroke-dasharray': ''\n        };\n        drawPath(this.sparkline, pathOption, group);\n    };\n    /**\n     * To render line series\n     */\n    SparklineRenderer.prototype.renderLine = function (points, args) {\n        var spark = this.sparkline;\n        var g = this.sparkline.renderer.createGroup({\n            id: spark.element.id + '_sparkline_g',\n            'clip-path': 'url(#' + this.clipId + ')'\n        });\n        var color = this.sparkline.fill;\n        color = (this.sparkline.fill === '#00bdae' && this.sparkline.theme === 'Bootstrap4')\n            ? this.sparkline.sparkTheme.axisLineColor : color;\n        var pathOption = new PathOption(spark.element.id + '_sparkline_line', 'transparent', args.lineWidth, color, spark.opacity);\n        var d = '';\n        for (var i = 0, len = points.length; i < len; i++) {\n            if (i === 0) {\n                d = 'M ' + points[0].x + ' ' + points[i].y + ' ';\n            }\n            d += 'L ' + points[i].x + ' ' + points[i].y + ' ';\n        }\n        pathOption.d = d;\n        drawPath(this.sparkline, pathOption, g);\n        this.sparkline.svgObject.appendChild(g);\n    };\n    /**\n     * To render pie series\n     */\n    /* tslint:disable:no-string-literal */\n    SparklineRenderer.prototype.renderPie = function (points, args) {\n        var spark = this.sparkline;\n        var height = spark.availableSize.height - (spark.padding.top + spark.padding.bottom);\n        var width = spark.availableSize.width - (spark.padding.left + spark.padding.right);\n        var area = (height <= width) ? height / 2 : width / 2;\n        var X = spark.availableSize.width / 2; // center position of x\n        var Y = spark.availableSize.height / 2; // center position of y\n        var deg = 0;\n        var stRad;\n        var edRad;\n        var stroke = args.border.color;\n        var opacity = spark.opacity;\n        var strokeWidth = args.border.width;\n        var colors = (spark.palette.length) ? spark.palette : ['#00bdae', '#404041', '#357cd2', '#e56590', '#f8b883',\n            '#70ad47', '#dd8abd', '#7f84e8', '#7bb4eb', '#ea7a57'];\n        var group = this.sparkline.renderer.createGroup({ id: spark.element.id + '_sparkline_g' });\n        var low;\n        var high;\n        var locations = extend([], [], points);\n        if (spark.highPointColor || spark.lowPointColor) {\n            var pointsYvalues = locations.map(function (a) { return a.yVal; });\n            low = Math.min.apply(null, pointsYvalues);\n            high = Math.max.apply(null, pointsYvalues);\n        }\n        this.negativePointIndexes = [];\n        for (var i = 0, stDeg = 90, edDeg = void 0, flag = void 0; i < points.length; i++) {\n            stDeg += deg;\n            deg = points[i]['degree'];\n            edDeg = stDeg + deg;\n            stRad = (stDeg - 90) * Math.PI / 180.0;\n            edRad = (edDeg - 90) * Math.PI / 180.0;\n            points[i]['stAng'] = stRad;\n            points[i]['endAng'] = edRad;\n            flag = (deg < 180) ? '0' : '1';\n            var temp = points[i]['coordinates'] = {\n                sX: X + (area * Math.cos(stRad)), sY: Y +\n                    (area * Math.sin(stRad)), eX: X + (area * Math.cos(edRad)), eY: Y + (area * Math.sin(edRad))\n            };\n            var pathArc = 'M ' + X + ' ' + Y + ' L ' + temp['eX'] + ' ' + temp['eY'] + ' A ' + area + ' ' +\n                area + ' 0 ' + flag + ',0 ' + temp['sX'] + ' ' + temp['sY'] + ' Z';\n            var pathOption = {\n                'id': spark.element.id + '_sparkline_pie_' + i,\n                'opacity': opacity,\n                'fill': colors[i % colors.length],\n                'stroke': stroke,\n                'stroke-width': strokeWidth,\n                'd': pathArc,\n                'stroke-dasharray': ''\n            };\n            this.getPieSpecialPoint(points[i], spark, pathOption, i, high, low, points.length);\n            var pointArgs = this.triggerPointRender('pointRendering', i, pathOption.fill, { color: stroke, width: strokeWidth });\n            pathOption.fill = pointArgs.fill;\n            pathOption.stroke = pointArgs.border.color;\n            pathOption['stroke-width'] = pointArgs.border.width;\n            if (!pointArgs.cancel) {\n                var element = drawPath(this.sparkline, pathOption, group);\n                element.setAttribute('aria-label', spark.dataSource[i][spark.xName] + ' : ' + points[i].yVal);\n            }\n            var diffRadian = edRad - stRad;\n            var mid = {\n                x: X + ((area / 2) * Math.cos(stRad + (diffRadian / 2))),\n                y: Y + ((area / 2) * Math.sin(stRad + (diffRadian / 2)))\n            };\n            points[i].location.x = mid.x;\n            points[i].location.y = mid.y;\n        }\n        this.sparkline.svgObject.appendChild(group);\n    };\n    /**\n     * To get special point color and option for Pie series.\n     */\n    SparklineRenderer.prototype.getPieSpecialPoint = function (temp, spark, option, i, high, low, length) {\n        if (temp.yVal < 0 && spark.negativePointColor) {\n            option.fill = spark.negativePointColor;\n            this.negativePointIndexes.push(i);\n        }\n        if (i === 0 && spark.startPointColor) {\n            option.fill = spark.startPointColor;\n            this.startPointIndex = i;\n        }\n        else if ((i === (length - 1)) && spark.endPointColor) {\n            option.fill = spark.endPointColor;\n            this.endPointIndex = i;\n        }\n        if (temp.yVal === high && spark.highPointColor) {\n            option.fill = spark.highPointColor;\n            this.highPointIndex = i;\n        }\n        else if (temp.yVal === low && spark.lowPointColor) {\n            option.fill = spark.lowPointColor;\n            this.lowPointIndex = i;\n        }\n    };\n    /**\n     * To render area series\n     */\n    SparklineRenderer.prototype.renderArea = function (points, args) {\n        var spark = this.sparkline;\n        var group = this.sparkline.renderer.createGroup({\n            id: spark.element.id + '_sparkline_g',\n            'clip-path': 'url(#' + this.clipId + ')'\n        });\n        var pathOption = new PathOption(spark.element.id + '_sparkline_area', args.fill, 0, 'transparent', spark.opacity);\n        var d = '';\n        var str = '';\n        for (var i = 0, len = points.length; i < len; i++) {\n            if (i !== 0) {\n                str += 'L ' + points[i].x + ' ' + points[i].y + ' ';\n            }\n            else {\n                d = 'M ' + points[i].x + ' ' + this.axisHeight + ' ';\n                str = 'M ' + points[i].x + ' ' + points[i].y + ' ';\n            }\n            d += 'L ' + points[i].x + ' ' + points[i].y + ' ';\n            if (i === (len - 1)) {\n                d += 'L ' + points[i].x + ' ' + this.axisHeight + ' Z';\n            }\n        }\n        pathOption.d = d;\n        drawPath(this.sparkline, pathOption, group);\n        pathOption = new PathOption(spark.element.id + '_sparkline_area_str', 'transparent', args.border.width, args.border.color, spark.opacity, '', str);\n        drawPath(this.sparkline, pathOption, group);\n        this.sparkline.svgObject.appendChild(group);\n    };\n    /**\n     * To render column series\n     */\n    SparklineRenderer.prototype.renderColumn = function (points, args) {\n        var _this = this;\n        var spark = this.sparkline;\n        var locations = extend([], [], points);\n        var group = this.sparkline.renderer.createGroup({\n            id: spark.element.id + '_sparkline_g',\n            'clip-path': 'url(#' + this.clipId + ')'\n        });\n        var lowPos;\n        var highPos;\n        if (this.sparkline.highPointColor || this.sparkline.lowPointColor) {\n            var pointsYPos = locations.map(function (a) { return a.markerPosition; });\n            highPos = Math.min.apply(null, pointsYPos);\n            lowPos = Math.max.apply(null, pointsYPos);\n        }\n        var id = spark.element.id + '_sparkline_column_';\n        var rectOptions = new RectOption(id, '', args.border, spark.opacity, null);\n        var paletteLength = spark.palette.length;\n        var temp;\n        var len = points.length;\n        this.negativePointIndexes = [];\n        var _loop_1 = function (i) {\n            temp = points[i];\n            rectOptions.id = id + i;\n            rectOptions.fill = (paletteLength) ? spark.palette[i % paletteLength] : args.fill;\n            rectOptions.rect = new Rect(temp.x, temp.y, temp.width, temp.height);\n            this_1.getSpecialPoint(true, temp, spark, rectOptions, i, highPos, lowPos, len);\n            temp.location.y = (temp.markerPosition <= this_1.axisHeight) ? temp.y : (temp.y + temp.height);\n            temp.location.x = temp.x + (temp.width / 2);\n            rectOptions.stroke = args.border.color ? (args.border.color) : rectOptions.fill;\n            var pointArgs = {\n                name: 'pointRendering', cancel: false, pointIndex: i, fill: rectOptions.fill,\n                border: { color: rectOptions.stroke, width: args.border.width }\n            };\n            if (this_1.sparkline.isBlazor) {\n                var blazorpointArgs = __rest(pointArgs, []);\n                pointArgs = blazorpointArgs;\n            }\n            this_1.sparkline.trigger('pointRendering', pointArgs, function (eventArgs) {\n                temp = points[i];\n                rectOptions.id = id + i;\n                rectOptions.rect = new Rect(temp.x, temp.y, temp.width, temp.height);\n                _this.getSpecialPoint(true, temp, spark, rectOptions, i, highPos, lowPos, len);\n                rectOptions.fill = pointArgs.fill;\n                rectOptions.stroke = pointArgs.border.color;\n                temp.location.y = (temp.markerPosition <= _this.axisHeight) ? temp.y : (temp.y + temp.height);\n                rectOptions['stroke-width'] = pointArgs.border.width;\n                temp.location.x = temp.x + (temp.width / 2);\n                if (!pointArgs.cancel) {\n                    var element = drawRectangle(spark, rectOptions, group);\n                    element.setAttribute('aria-label', spark.dataSource[i][spark.xName] + ' : ' + points[i].yVal);\n                    group.appendChild(element);\n                }\n            });\n        };\n        var this_1 = this;\n        for (var i = 0; i < len; i++) {\n            _loop_1(i);\n        }\n        this.sparkline.svgObject.appendChild(group);\n    };\n    /**\n     * To render WinLoss series\n     */\n    SparklineRenderer.prototype.renderWinLoss = function (points, args) {\n        var spark = this.sparkline;\n        var group = this.sparkline.renderer.createGroup({\n            id: spark.element.id + '_sparkline_g',\n            'clip-path': 'url(#' + this.clipId + ')'\n        });\n        var id = spark.element.id + '_sparkline_winloss_';\n        var options = new RectOption(id, '', args.border, spark.opacity, null);\n        var temp;\n        var len = points.length;\n        var paletteLength = spark.palette.length;\n        for (var i = 0; i < len; i++) {\n            temp = points[i];\n            options.id = id + i;\n            options.fill = (paletteLength) ? spark.palette[i % paletteLength] : ((temp.yVal === this.axisValue) ?\n                (this.sparkline.tiePointColor || '#a216f3') : ((temp.yVal > this.axisValue) ? args.fill :\n                (spark.negativePointColor || '#e20f07')));\n            options.stroke = (args.border.color) ? (args.border.color) : options.fill;\n            options.rect = new Rect(temp.x, temp.y, temp.width, temp.height);\n            temp.location.x = temp.x + (temp.width / 2);\n            temp.location.y = (temp.yVal >= this.axisValue) ? (temp.y) : (temp.y + temp.height);\n            var pointArgs = this.triggerPointRender('pointRendering', i, options.fill, { color: options.stroke, width: args.border.width });\n            options.fill = pointArgs.fill;\n            options.stroke = pointArgs.border.color;\n            options['stroke-width'] = pointArgs.border.width;\n            if (!pointArgs.cancel) {\n                var element = drawRectangle(spark, options, group);\n                element.setAttribute('aria-label', spark.dataSource[i][spark.xName] + ' : ' + points[i].yVal);\n            }\n        }\n        this.sparkline.svgObject.appendChild(group);\n    };\n    SparklineRenderer.prototype.renderMarker = function (points) {\n        var spark = this.sparkline;\n        var marker = spark.markerSettings;\n        if ((spark.type === 'Pie' || spark.type === 'WinLoss' || !marker.visible.length)) {\n            return;\n        }\n        var locations = extend([], [], points);\n        var group = this.sparkline.renderer.createGroup({\n            id: spark.element.id + '_sparkline_marker_g',\n            'clip-path': 'url(#' + this.clipId + ')'\n        });\n        var g;\n        var temp;\n        var id = spark.element.id + '_sparkline_marker_';\n        var option = new CircleOption('', marker.fill, marker.border, marker.opacity, 0, 0, marker.size / 2, '');\n        var highPos;\n        var lowPos;\n        var visible = marker.visible.join();\n        if ((visible.toLowerCase().indexOf('high') > -1) || (visible.toLowerCase().indexOf('low') > -1)) {\n            var pointsYPos = locations.map(function (a) { return a.markerPosition; });\n            highPos = Math.min.apply(null, pointsYPos);\n            lowPos = Math.max.apply(null, pointsYPos);\n        }\n        this.negativePointIndexes = [];\n        var _loop_2 = function (i, length_1) {\n            temp = points[i];\n            option.id = id + i;\n            option.cx = temp.location.x;\n            option.cy = temp.location.y;\n            option.fill = marker.fill;\n            var render = (visible.toLowerCase().indexOf('all') > -1);\n            render = this_2.getSpecialPoint(render, temp, spark, option, i, highPos, lowPos, length_1, visible.toLowerCase());\n            option.stroke = marker.border.color || option.fill;\n            var markerArgs = {\n                name: 'markerRendering', cancel: false,\n                border: { color: option.stroke, width: marker.border.width },\n                fill: option.fill, pointIndex: i,\n                sparkline: !this_2.sparkline.isBlazor ? this_2.sparkline : null,\n                x: option.cx, y: option.cy, size: marker.size\n            };\n            if (this_2.sparkline.isBlazor) {\n                var blazormarkerArgs = __rest(markerArgs, []);\n                markerArgs = blazormarkerArgs;\n            }\n            this_2.sparkline.trigger('markerRendering', markerArgs, function (args) {\n                if (render && !markerArgs.cancel) {\n                    option.id = id + i;\n                    option.cx = markerArgs.x;\n                    option.cy = markerArgs.y;\n                    option.fill = markerArgs.fill;\n                    option.stroke = markerArgs.border.color;\n                    option['stroke-width'] = markerArgs.border.width;\n                    option.r = markerArgs.size / 2;\n                    var element = drawCircle(spark, option, group);\n                    element.setAttribute('aria-label', spark.dataSource[i][spark.xName] + ' : ' + points[i].yVal);\n                    group.appendChild(element);\n                }\n            });\n        };\n        var this_2 = this;\n        for (var i = 0, length_1 = points.length; i < length_1; i++) {\n            _loop_2(i, length_1);\n        }\n        this.sparkline.svgObject.appendChild(group);\n    };\n    /**\n     * To get special point color and option.\n     */\n    SparklineRenderer.prototype.getSpecialPoint = function (render, temp, spark, option, i, highPos, lowPos, length, visible) {\n        if (visible === void 0) { visible = ''; }\n        if (temp.markerPosition > this.axisHeight) {\n            option.fill = spark.negativePointColor || option.fill;\n            this.negativePointIndexes.push(i);\n            render = render || (visible.indexOf('negative') > -1);\n        }\n        if (i === 0) {\n            option.fill = spark.startPointColor || option.fill;\n            this.startPointIndex = i;\n            render = render || (visible.indexOf('start') > -1);\n        }\n        else if ((i === (length - 1))) {\n            option.fill = spark.endPointColor || option.fill;\n            this.endPointIndex = i;\n            render = render || (visible.indexOf('end') > -1);\n        }\n        if (temp.markerPosition === highPos) {\n            option.fill = spark.highPointColor || option.fill;\n            this.highPointIndex = i;\n            render = render || (visible.indexOf('high') > -1);\n        }\n        else if (temp.markerPosition === lowPos) {\n            option.fill = spark.lowPointColor || option.fill;\n            this.lowPointIndex = i;\n            render = render || (visible.indexOf('low') > -1);\n        }\n        if (visible.indexOf('none') > -1) {\n            render = false;\n        }\n        return render;\n    };\n    /**\n     * To render data label for sparkline.\n     */\n    SparklineRenderer.prototype.renderLabel = function (points) {\n        var _this = this;\n        var spark = this.sparkline;\n        var dataLabel = spark.dataLabelSettings;\n        var color = dataLabel.textStyle.color || spark.sparkTheme.dataLabelColor;\n        if ((spark.type === 'WinLoss' || !dataLabel.visible.length)) {\n            return;\n        }\n        var locations = extend([], [], points);\n        var id = spark.element.id + '_sparkline_label_';\n        var group = this.sparkline.renderer.createGroup({\n            id: spark.element.id + '_sparkline_label_g',\n            style: 'pointer-events: none;'\n        });\n        var g;\n        var temp;\n        var textId = id + 'text_';\n        var rectId = id + 'rect_';\n        var option = new TextOption('', 0, 0, 'middle', '', 'middle');\n        var labelStyle = dataLabel.textStyle;\n        var pointsYPos = locations.map(function (a) { return a.markerPosition; });\n        var highPos = Math.min.apply(null, pointsYPos);\n        var lowPos = Math.max.apply(null, pointsYPos);\n        var space = 1;\n        var padding = (dataLabel.fill !== 'transparent' || dataLabel.border.width) ? 2 : 0;\n        var size = measureText('sparkline_measure_text', labelStyle);\n        var rectOptions = new RectOption('', dataLabel.fill, dataLabel.border, dataLabel.opacity, null);\n        var edgeLabelOption;\n        labelStyle.fontFamily = spark.sparkTheme.labelFontFamily || labelStyle.fontFamily;\n        var _loop_3 = function (i, length_2) {\n            temp = points[i];\n            option.id = textId + i;\n            option.x = temp.location.x + dataLabel.offset.x;\n            option.y = ((spark.type === 'Pie') ? temp.location.y : ((temp.markerPosition > this_3.axisHeight) ? (temp.location.y +\n                (size.height / 2) + space + 2 + padding) : (temp.location.y - (size.height / 2) - space - padding))) + dataLabel.offset.y;\n            option.text = (dataLabel.format !== '') ? this_3.formatter(dataLabel.format, this_3.sparkline.dataSource[i]) :\n                temp.yVal.toString();\n            var labelArgs = {\n                name: 'dataLabelRendering', cancel: false,\n                border: dataLabel.border, fill: dataLabel.fill, pointIndex: i,\n                sparkline: !this_3.sparkline.isBlazor ? this_3.sparkline : null,\n                x: option.x, y: option.y, text: option.text, color: color\n            };\n            if (this_3.sparkline.isBlazor) {\n                var blazordataLabelArgs = __rest(labelArgs, []);\n                labelArgs = blazordataLabelArgs;\n            }\n            this_3.sparkline.trigger('dataLabelRendering', labelArgs, function (args) {\n                size = measureText(labelArgs.text, labelStyle);\n                option.text = labelArgs.text;\n                var renderLabel = (dataLabel.visible.join().toLowerCase().indexOf('all') > -1);\n                renderLabel = _this.getLabelVisible(renderLabel, temp, i, dataLabel, length_2, highPos, lowPos);\n                edgeLabelOption = _this.arrangeLabelPosition(dataLabel.edgeLabelMode, renderLabel, labelArgs.x, i, length_2, size, padding);\n                if (renderLabel && !labelArgs.cancel && edgeLabelOption.render) {\n                    rectOptions.id = rectId + i;\n                    rectOptions.fill = labelArgs.fill;\n                    rectOptions.stroke = labelArgs.border.color;\n                    rectOptions['stroke-width'] = labelArgs.border.width;\n                    option.y = labelArgs.y;\n                    option.x = edgeLabelOption.x;\n                    rectOptions.rect = new Rect(option.x - ((size.width / 2) + padding), (option.y - padding - (size.height / 1.75)), size.width + (padding * 2), size.height + (padding * 2));\n                    g = _this.sparkline.renderer.createGroup({ id: id + 'g' + i });\n                    drawRectangle(spark, rectOptions, g);\n                    renderTextElement(option, labelStyle, labelArgs.color, g);\n                    group.appendChild(g);\n                }\n            });\n        };\n        var this_3 = this;\n        for (var i = 0, length_2 = points.length; i < length_2; i++) {\n            _loop_3(i, length_2);\n        }\n        this.sparkline.svgObject.appendChild(group);\n    };\n    SparklineRenderer.prototype.arrangeLabelPosition = function (edgeLabel, render, x, index, length, size, padding) {\n        if (edgeLabel === 'None') {\n            return { x: x, render: render };\n        }\n        if (index === 0 && ((x - (size.width / 2) - padding) <= 0)) {\n            if (edgeLabel === 'Hide') {\n                render = false;\n            }\n            else {\n                x = this.sparkline.padding.left + padding + (size.width / 2);\n            }\n        }\n        else if (index === length - 1 && ((x + (size.width / 2) + padding) >= this.sparkline.availableSize.width)) {\n            if (edgeLabel === 'Hide') {\n                render = false;\n            }\n            else {\n                x -= (size.width / 2 + padding);\n            }\n        }\n        return { x: x, render: render };\n    };\n    /**\n     * To get special point color and option.\n     */\n    SparklineRenderer.prototype.getLabelVisible = function (render, temp, i, label, length, highPos, lowPos) {\n        var labelVisible = label.visible.join().toLowerCase();\n        if (temp.markerPosition > this.axisHeight) {\n            render = render || (labelVisible.indexOf('negative') > -1);\n        }\n        if (i === 0) {\n            render = render || (labelVisible.indexOf('start') > -1);\n        }\n        else if ((i === (length - 1))) {\n            render = render || (labelVisible.indexOf('end') > -1);\n        }\n        if (temp.markerPosition === highPos) {\n            render = render || (labelVisible.indexOf('high') > -1);\n        }\n        else if (temp.markerPosition === lowPos) {\n            render = render || (labelVisible.indexOf('low') > -1);\n        }\n        if (label.visible.join().toLowerCase().indexOf('none') > -1) {\n            render = false;\n        }\n        return render;\n    };\n    /**\n     * To format text\n     */\n    SparklineRenderer.prototype.formatter = function (format, data) {\n        if (isNullOrUndefined(format)) {\n            return null;\n        }\n        var keys = Object.keys(data);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            format = format.split('${' + key + '}').join(data[key]);\n        }\n        return format;\n    };\n    /**\n     * To calculate min max for x and y axis\n     */\n    SparklineRenderer.prototype.axisCalculation = function () {\n        this.findRanges(this.sparkline.sparklineData);\n    };\n    /**\n     * To find x axis interval.\n     */\n    SparklineRenderer.prototype.getInterval = function (data, x, type) {\n        var interval = 1;\n        var x1 = data[0][x];\n        var x2 = isNullOrUndefined(data[1]) ? undefined : data[1][x];\n        if (!isNullOrUndefined(x1) && !isNullOrUndefined(x2)) {\n            var temp = extend([], data);\n            var validData_1 = [];\n            temp.forEach(function (value) {\n                if (!isNullOrUndefined(value[x])) {\n                    validData_1.push(value);\n                }\n            });\n            validData_1.sort(function (a, b) {\n                if (isNullOrUndefined(a[x]) || isNullOrUndefined(b[x])) {\n                    return 0;\n                }\n                return a[x] - b[x];\n            });\n            validData_1 = (this.sparkline.enableRtl) ? validData_1.reverse() : validData_1;\n            interval = validData_1[1][x] - validData_1[0][x];\n        }\n        return interval;\n    };\n    /**\n     * To find x axis interval.\n     */\n    SparklineRenderer.prototype.getPaddingInterval = function (data, x, type, delta) {\n        var interval = 1;\n        var size = this.sparkline.availableSize.height;\n        var intervalCount = interval * data.length;\n        intervalCount = Math.max((size * (intervalCount / 100)), 1);\n        var niceInterval = delta / intervalCount;\n        var minInterval = Math.pow(10, Math.floor(logBase(niceInterval, 10)));\n        for (var _i = 0, _a = this.sparkline.intervalDivs; _i < _a.length; _i++) {\n            var intervalVal = _a[_i];\n            var currentInterval = interval * intervalVal;\n            if (intervalCount < (delta / currentInterval)) {\n                break;\n            }\n            niceInterval = currentInterval;\n        }\n        return niceInterval;\n    };\n    /**\n     * To calculate axis ranges internally.\n     */\n    // tslint:disable-next-line:max-func-body-length\n    SparklineRenderer.prototype.findRanges = function (data) {\n        var model = this.sparkline;\n        var max;\n        var min;\n        var minX;\n        var maxX;\n        var maxPointsLength = data.length;\n        var temp;\n        var sumofValues = 0;\n        var isNumericArray = Array.isArray(data) && typeof data[0] !== 'object';\n        if (isNumericArray) {\n            if (model.type === 'Pie') {\n                for (var i = 0; i < maxPointsLength; i++) {\n                    sumofValues += Math.abs(data[i]);\n                }\n            }\n            else {\n                max = Math.max.apply(null, data);\n                min = Math.min.apply(null, data);\n                minX = 0;\n                maxX = maxPointsLength - 1;\n            }\n        }\n        else {\n            if (model.type === 'Pie') {\n                for (var i = 0; i < maxPointsLength; i++) {\n                    sumofValues += Math.abs(data[i][model.yName]);\n                }\n            }\n            else {\n                if (isNullOrUndefined(data[0][model.xName])) {\n                    var x_1 = data.map(function (z) { return z[model.yName]; });\n                    max = Math.max.apply(null, x_1);\n                    min = Math.min.apply(null, x_1);\n                }\n                else {\n                    temp = extend([], data);\n                    temp = temp.sort(function (a, b) { return a[model.yName] - b[model.yName]; });\n                    max = temp[temp.length - 1][model.yName];\n                    min = temp[0][model.yName];\n                }\n                if (!isNullOrUndefined(data[0][model.xName])) {\n                    temp = temp.sort(function (a, b) { return a[model.xName] - b[model.xName]; });\n                    temp = (this.sparkline.enableRtl) ? temp.reverse() : temp;\n                    maxX = temp[temp.length - 1][model.xName];\n                    minX = temp[0][model.xName];\n                }\n                else {\n                    minX = 0;\n                    maxX = maxPointsLength - 1;\n                }\n            }\n        }\n        var y2;\n        var height;\n        var width;\n        var x1 = 0;\n        var y1;\n        var padding = model.padding;\n        var point;\n        var axis = model.axisSettings;\n        var value = axis.value;\n        var theme = model.theme.toLowerCase();\n        if (model.type !== 'Pie') {\n            this.maxLength = maxPointsLength;\n            height = model.availableSize.height - (padding.bottom + padding.top);\n            width = model.availableSize.width - (padding.left + padding.right);\n            maxX = isNullOrUndefined(axis.maxX) ? maxX : axis.maxX;\n            minX = isNullOrUndefined(axis.minX) ? minX : axis.minX;\n            max = isNullOrUndefined(axis.maxY) ? max : axis.maxY;\n            min = isNullOrUndefined(axis.minY) ? min : axis.minY;\n            var color = axis.lineSettings.color || this.sparkline.sparkTheme.axisLineColor;\n            var eventArgs = {\n                name: 'axisRendering', cancel: false, sparkline: !this.sparkline.isBlazor ? model : null,\n                maxX: maxX, minX: minX, maxY: max, minY: min, value: axis.value,\n                lineColor: color, lineWidth: axis.lineSettings.width\n            };\n            model.trigger('axisRendering', eventArgs);\n            if (eventArgs.cancel) {\n                this.visiblePoints = [];\n                return;\n            }\n            maxX = eventArgs.maxX;\n            minX = eventArgs.minX;\n            max = eventArgs.maxY;\n            min = eventArgs.minY;\n            value = this.axisValue = eventArgs.value;\n            this.axisColor = eventArgs.lineColor;\n            this.axisWidth = eventArgs.lineWidth;\n        }\n        var unitX = maxX - minX;\n        var unitY = max - min;\n        unitX = (unitX === 0) ? 1 : unitX;\n        unitY = (unitY === 0) ? 1 : unitY;\n        this.unitX = unitX;\n        this.unitY = unitY;\n        this.min = min;\n        x1 = 0;\n        y1 = height - ((height / unitY) * (-min));\n        y1 = (min < 0 && max <= 0) ? 0 : (min < 0 && max > 0) ? y1 : height;\n        if (value >= min && value <= max) {\n            y1 = height - Math.round(height * ((value - min) / this.unitY));\n        }\n        this.axisHeight = y1 + padding.top;\n        var percent;\n        var x;\n        var y;\n        var visiblePoints = [];\n        var delta = max - min;\n        var interval = this.getInterval(data, model.xName, model.valueType);\n        var interVal = this.getPaddingInterval(data, model.xName, model.valueType, delta);\n        for (var i = 0; i < maxPointsLength; i++) {\n            if (isNullOrUndefined(data[i][model.xName]) && isNullOrUndefined(data[i][model.yName]) && ((data[i][model.yName]) !== 0)\n                && isNumericArray) {\n                x = i;\n                y = data[i];\n            }\n            else if (isNullOrUndefined(data[i][model.xName])) {\n                x = i;\n                y = data[i][model.yName];\n            }\n            else {\n                x = data[i][model.xName];\n                y = data[i][model.yName];\n            }\n            if (isNullOrUndefined(x) || isNullOrUndefined(y)) {\n                continue;\n            }\n            if (model.type === 'Line' || model.type === 'Area') {\n                y2 = (min !== max && maxPointsLength !== 1) ? height - Math.round(height * ((y - min) / this.unitY)) : padding.top;\n                point = { x: (minX !== maxX) ? Math.round(width * ((x - minX) / this.unitX)) : width / 2, y: y2, markerPosition: y2 };\n            }\n            else if (model.type === 'Column' || model.type === 'WinLoss') {\n                var colWidth = width / (((maxX - minX) / interval) + 1);\n                var calSpace = 0.5;\n                var space = (calSpace * 2); //calspace is default space for column and winloss\n                colWidth -= (space);\n                x1 = (((x - minX) / interval) * (colWidth + space)) + (space / 2);\n                if (model.type === 'WinLoss') {\n                    // win or gain column height half of the height , draw(zero) height factor\n                    var winLossFactor = 0.5;\n                    var drawHeightFactor = 40;\n                    y2 = (y > value) ? (height / 4) : (y < value) ? (height * winLossFactor) :\n                        ((height * winLossFactor) - (height / drawHeightFactor));\n                    point = {\n                        x: x1, y: y2, height: (y !== value) ? (height / 4) : height / 20, width: colWidth,\n                        markerPosition: (y2 > y1) ? (y1 + Math.abs(y2 - y1)) : y2\n                    };\n                }\n                else {\n                    if (i === 0 && model.rangePadding !== 'None') {\n                        min -= model.rangePadding === 'Additional' ? (interVal + padding.top) : interVal;\n                        max += model.rangePadding === 'Additional' ? (interVal + padding.top) : interVal;\n                        unitX = maxX - minX;\n                        unitY = max - min;\n                        unitX = (unitX === 0) ? 1 : unitX;\n                        unitY = (unitY === 0) ? 1 : unitY;\n                        this.unitX = unitX;\n                        this.unitY = unitY;\n                        this.min = min;\n                    }\n                    var z = ((height / this.unitY) * (y - min));\n                    var z1 = (y === min && y > value) ? ((maxPointsLength !== 1 && this.unitY !== 1) ?\n                        (height / this.unitY) * (min / 2) : (z | 1)) :\n                        (y === max && y < value && maxPointsLength !== 1 && this.unitY !== 1) ? (height / this.unitY) * (-max / 2) : z;\n                    y2 = Math.abs(height - z1);\n                    point = {\n                        x: x1, y: (y2 > y1) ? y1 : y2, height: Math.abs(y2 - y1),\n                        width: colWidth, markerPosition: (y2 > y1) ? (y1 + Math.abs(y2 - y1)) : y2\n                    };\n                }\n            }\n            else if (model.type === 'Pie') {\n                percent = (Math.abs(y) / sumofValues) * 100;\n                point = {\n                    percent: percent, degree: ((Math.abs(y) / sumofValues) * 360)\n                };\n            }\n            if (model.type !== 'Pie') {\n                point.x += padding.left;\n                point.y += padding.top;\n            }\n            if (model.type !== 'WinLoss') {\n                point.markerPosition += padding.top;\n            }\n            point.location = { x: point.x, y: point.y };\n            point.xVal = x;\n            point.yVal = y;\n            visiblePoints.push(point);\n        }\n        visiblePoints.sort(function (a, b) {\n            return a.x - b.x;\n        });\n        this.visiblePoints = visiblePoints;\n    };\n    /**\n     * To render the sparkline axis\n     */\n    SparklineRenderer.prototype.drawAxis = function () {\n        var spark = this.sparkline;\n        var height = this.axisHeight;\n        if ((spark.type !== 'WinLoss') && (spark.type !== 'Pie') && spark.axisSettings.lineSettings.visible) {\n            var xAxis = {\n                'id': spark.element.id + '_Sparkline_XAxis',\n                'x1': spark.padding.left, 'y1': height,\n                'x2': spark.availableSize.width - spark.padding.right, 'y2': height,\n                'stroke': this.axisColor,\n                'opacity': spark.axisSettings.lineSettings.opacity,\n                'stroke-dasharray': spark.axisSettings.lineSettings.dashArray,\n                'stroke-width': this.axisWidth,\n                'clip-path': 'url(#' + this.clipId + ')'\n            };\n            spark.svgObject.appendChild(spark.renderer.drawLine(xAxis));\n        }\n    };\n    /**\n     * To trigger point render event\n     */\n    SparklineRenderer.prototype.triggerPointRender = function (name, i, fill, border) {\n        var args = {\n            name: name, cancel: false,\n            border: border, fill: fill,\n            sparkline: !this.sparkline.isBlazor ? this.sparkline : null,\n            pointIndex: i\n        };\n        this.sparkline.trigger(name, args);\n        return args;\n    };\n    return SparklineRenderer;\n}());\nexport { SparklineRenderer };\n"]},"metadata":{},"sourceType":"module"}