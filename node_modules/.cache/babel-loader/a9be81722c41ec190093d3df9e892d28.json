{"ast":null,"code":"import { Series, Points } from '../series/chart-series';\nimport { findClipRect, RectOption } from '../../common/utils/helper';\n/**\n * `Trendline` module is used to render 6 types of trendlines in chart.\n */\n\nvar Trendlines =\n/** @class */\nfunction () {\n  function Trendlines() {}\n  /**\n   * Defines the collection of series, that are used to represent a trendline\n   * @private\n   */\n\n\n  Trendlines.prototype.initSeriesCollection = function (trendline, chart) {\n    var trendLineSeries = new Series(trendline, 'targetSeries', {}, true);\n\n    if (trendline.type === 'Linear' || trendline.type === 'MovingAverage') {\n      trendLineSeries.type = 'Line';\n    } else {\n      trendLineSeries.type = 'Spline';\n    }\n\n    this.setSeriesProperties(trendLineSeries, trendline, trendline.type, trendline.fill, trendline.width, chart);\n  };\n  /**\n   * Initializes the properties of the trendline series\n   */\n\n\n  Trendlines.prototype.setSeriesProperties = function (series, trendline, name, fill, width, chart) {\n    series.name = trendline.name;\n    series.xName = 'x';\n    series.yName = 'y';\n    series.fill = fill || 'blue';\n    series.width = width;\n    series.dashArray = trendline.dashArray;\n    series.clipRectElement = trendline.clipRectElement;\n    series.points = [];\n    series.enableTooltip = trendline.enableTooltip;\n    series.index = trendline.index;\n    series.sourceIndex = trendline.sourceIndex;\n    series.interior = series.fill;\n    series.animation = trendline.animation;\n    series.legendShape = 'HorizontalLine';\n    series.marker = trendline.marker;\n    series.category = 'TrendLine';\n    series.chart = chart;\n    series.xMin = Infinity;\n    series.xMax = -Infinity;\n    series.yMin = Infinity;\n    series.yMax = -Infinity;\n    series.xData = [];\n    series.yData = [];\n    trendline.targetSeries = series;\n\n    if (chart.isBlazor) {\n      trendline.targetSeries.border = {}; // To avoid console error in blazor\n\n      trendline.targetSeries.connector = {}; // To avoid console error in blazor\n    }\n  };\n  /**\n   * Creates the elements of a trendline\n   */\n\n\n  Trendlines.prototype.createTrendLineElements = function (chart, trendline, index, element, clipRectElement) {\n    trendline.trendLineElement = element;\n    trendline.targetSeries.clipRectElement = clipRectElement;\n    trendline.targetSeries.seriesElement = element;\n\n    if (chart.trendLineElements) {\n      chart.trendLineElements.appendChild(trendline.trendLineElement);\n    }\n  };\n  /**\n   * Defines the data point of trendline\n   */\n\n\n  Trendlines.prototype.getDataPoint = function (x, y, series, index) {\n    var trendPoint = new Points();\n    trendPoint.x = series.xAxis.valueType === 'DateTime' ? new Date(Number(x)) : x;\n    trendPoint.y = y;\n    trendPoint.xValue = Number(x);\n    trendPoint.color = series.fill;\n    trendPoint.index = index;\n    trendPoint.yValue = Number(y);\n    trendPoint.visible = true;\n    series.xMin = Math.min(series.xMin, trendPoint.xValue);\n    series.yMin = Math.min(series.yMin, trendPoint.yValue);\n    series.xMax = Math.max(series.xMax, trendPoint.xValue);\n    series.yMax = Math.max(series.yMax, trendPoint.yValue);\n    series.xData.push(trendPoint.xValue);\n    return trendPoint;\n  };\n  /**\n   * Finds the slope and intercept of trendline\n   */\n\n\n  Trendlines.prototype.findSlopeIntercept = function (xValues, yValues, trendline, points) {\n    var xAvg = 0;\n    var yAvg = 0;\n    var xyAvg = 0;\n    var xxAvg = 0;\n    var yyAvg = 0;\n    var index = 0;\n    var slope = 0;\n    var intercept = 0;\n\n    while (index < points.length) {\n      // To fix trendline not rendered issue while Nan Value is provided for y values.\n      if (isNaN(yValues[index])) {\n        yValues[index] = (yValues[index - 1] + yValues[index + 1]) / 2;\n      }\n\n      xAvg += xValues[index];\n      yAvg += yValues[index];\n      xyAvg += xValues[index] * yValues[index];\n      xxAvg += xValues[index] * xValues[index];\n      yyAvg += yValues[index] * yValues[index];\n      index++;\n    }\n\n    var type = trendline.type;\n\n    if (trendline.intercept && (type === 'Linear' || type === 'Exponential')) {\n      intercept = trendline.intercept;\n\n      switch (type) {\n        case 'Linear':\n          slope = (xyAvg - trendline.intercept * xAvg) / xxAvg;\n          break;\n\n        case 'Exponential':\n          slope = (xyAvg - Math.log(Math.abs(trendline.intercept)) * xAvg) / xxAvg;\n          break;\n      }\n    } else {\n      slope = (points.length * xyAvg - xAvg * yAvg) / (points.length * xxAvg - xAvg * xAvg);\n      slope = type === 'Linear' ? slope : Math.abs(slope);\n\n      if (type === 'Exponential' || type === 'Power') {\n        intercept = Math.exp((yAvg - slope * xAvg) / points.length);\n      } else {\n        intercept = (yAvg - slope * xAvg) / points.length;\n      }\n    }\n\n    return {\n      slope: slope,\n      intercept: intercept\n    };\n  };\n  /**\n   * Defines the points to draw the trendlines\n   */\n\n\n  Trendlines.prototype.initDataSource = function (trendline, chart) {\n    var points = trendline.points;\n\n    if (points && points.length) {\n      //prepare data\n      var trendlineSeries = trendline.targetSeries;\n\n      switch (trendline.type) {\n        case 'Linear':\n          this.setLinearRange(points, trendline, trendlineSeries);\n          break;\n\n        case 'Exponential':\n          this.setExponentialRange(points, trendline, trendlineSeries);\n          break;\n\n        case 'MovingAverage':\n          this.setMovingAverageRange(points, trendline, trendlineSeries);\n          break;\n\n        case 'Polynomial':\n          this.setPolynomialRange(points, trendline, trendlineSeries);\n          break;\n\n        case 'Power':\n          this.setPowerRange(points, trendline, trendlineSeries);\n          break;\n\n        case 'Logarithmic':\n          this.setLogarithmicRange(points, trendline, trendlineSeries);\n          break;\n      }\n\n      if (trendline.type !== 'Linear' && trendline.type !== 'MovingAverage') {\n        trendlineSeries.chart.splineSeriesModule.findSplinePoint(trendlineSeries);\n      }\n    }\n  };\n  /**\n   * Calculation of exponential points\n   */\n\n\n  Trendlines.prototype.setExponentialRange = function (points, trendline, series) {\n    var xValue = [];\n    var yValue = [];\n    var index = 0;\n    var slopeIntercept;\n\n    while (index < points.length) {\n      var point = points[index];\n      var yDataValue = point.yValue ? Math.log(point.yValue) : 0;\n      xValue.push(point.xValue);\n      yValue.push(yDataValue);\n      index++;\n    }\n\n    slopeIntercept = this.findSlopeIntercept(xValue, yValue, trendline, points);\n    series.points = this.getExponentialPoints(trendline, points, xValue, yValue, series, slopeIntercept);\n  };\n  /**\n   * Calculation of logarithmic points\n   */\n\n\n  Trendlines.prototype.setLogarithmicRange = function (points, trendline, series) {\n    var xLogValue = [];\n    var yLogValue = [];\n    var xPointsLgr = [];\n    var slopeIntercept;\n    var index = 0;\n\n    while (index < points.length) {\n      var point = points[index];\n      var xDataValue = point.xValue ? Math.log(point.xValue) : 0;\n      xPointsLgr.push(point.xValue);\n      xLogValue.push(xDataValue);\n      yLogValue.push(point.yValue);\n      index++;\n    }\n\n    slopeIntercept = this.findSlopeIntercept(xLogValue, yLogValue, trendline, points);\n    series.points = this.getLogarithmicPoints(trendline, points, xPointsLgr, yLogValue, series, slopeIntercept);\n  };\n  /**\n   * Calculation of polynomial points\n   */\n\n\n  Trendlines.prototype.setPolynomialRange = function (points, trendline, series) {\n    var xPolyValues = [];\n    var yPolyValues = [];\n    var index = 0;\n\n    while (index < points.length) {\n      var point = points[index];\n      xPolyValues.push(point.xValue);\n      yPolyValues.push(point.yValue);\n      index++;\n    }\n\n    series.points = this.getPolynomialPoints(trendline, points, xPolyValues, yPolyValues, series);\n  };\n  /**\n   * Calculation of power points\n   */\n\n\n  Trendlines.prototype.setPowerRange = function (points, trendline, series) {\n    var xValues = [];\n    var yValues = [];\n    var powerPoints = [];\n    var slopeIntercept;\n    var index = 0;\n\n    while (index < points.length) {\n      var point = points[index];\n      var xDataValue = point.xValue ? Math.log(point.xValue) : 0;\n      var yDataValue = point.yValue ? Math.log(point.yValue) : 0;\n      powerPoints.push(point.xValue);\n      xValues.push(xDataValue);\n      yValues.push(yDataValue);\n      index++;\n    }\n\n    slopeIntercept = this.findSlopeIntercept(xValues, yValues, trendline, points);\n    series.points = this.getPowerPoints(trendline, points, powerPoints, yValues, series, slopeIntercept);\n  };\n  /**\n   * Calculation of linear points\n   */\n\n\n  Trendlines.prototype.setLinearRange = function (points, trendline, series) {\n    var xValues = [];\n    var yValues = [];\n    var slopeIntercept;\n    var index = 0;\n\n    while (index < points.length) {\n      var point = points[index];\n      xValues.push(point.xValue);\n      yValues.push(point.yValue);\n      index++;\n    }\n\n    slopeIntercept = this.findSlopeIntercept(xValues, yValues, trendline, points);\n    series.points = this.getLinearPoints(trendline, points, xValues, yValues, series, slopeIntercept);\n  };\n  /**\n   * Calculation of moving average points\n   */\n\n\n  Trendlines.prototype.setMovingAverageRange = function (points, trendline, series) {\n    var xValues = [];\n    var yValues = [];\n    var xAvgValues = [];\n    var index = 0;\n\n    while (index < points.length) {\n      var point = points[index];\n      xAvgValues.push(point.xValue);\n      xValues.push(index + 1);\n      yValues.push(point.yValue);\n      index++;\n    }\n\n    series.points = this.getMovingAveragePoints(trendline, points, xAvgValues, yValues, series);\n  };\n  /**\n   * Calculation of logarithmic points\n   */\n\n\n  Trendlines.prototype.getLogarithmicPoints = function (trendline, points, xValues, yValues, series, slopeInterceptLog) {\n    var midPoint = Math.round(points.length / 2);\n    var pts = [];\n    var x1Log = xValues[0] - trendline.backwardForecast;\n    var x1 = x1Log ? Math.log(x1Log) : 0;\n    var y1Log = slopeInterceptLog.intercept + slopeInterceptLog.slope * x1;\n    var x2Log = xValues[midPoint - 1];\n    var x2 = x2Log ? Math.log(x2Log) : 0;\n    var y2Log = slopeInterceptLog.intercept + slopeInterceptLog.slope * x2;\n    var x3Log = xValues[xValues.length - 1] + trendline.forwardForecast;\n    var x3 = x3Log ? Math.log(x3Log) : 0;\n    var y3Log = slopeInterceptLog.intercept + slopeInterceptLog.slope * x3;\n    pts.push(this.getDataPoint(x1Log, y1Log, series, pts.length));\n    pts.push(this.getDataPoint(x2Log, y2Log, series, pts.length));\n    pts.push(this.getDataPoint(x3Log, y3Log, series, pts.length));\n    return pts;\n  };\n  /**\n   * Defines the points based on data point\n   */\n\n\n  Trendlines.prototype.getPowerPoints = function (trendline, points, xValues, yValues, series, slopeInterceptPower) {\n    var midPoint = Math.round(points.length / 2);\n    var pts = [];\n    var x1 = xValues[0] - trendline.backwardForecast;\n    x1 = x1 > -1 ? x1 : 0;\n    var y1 = slopeInterceptPower.intercept * Math.pow(x1, slopeInterceptPower.slope);\n    var x2 = xValues[midPoint - 1];\n    var y2 = slopeInterceptPower.intercept * Math.pow(x2, slopeInterceptPower.slope);\n    var x3 = xValues[xValues.length - 1] + trendline.forwardForecast;\n    var y3 = slopeInterceptPower.intercept * Math.pow(x3, slopeInterceptPower.slope);\n    pts.push(this.getDataPoint(x1, y1, series, pts.length));\n    pts.push(this.getDataPoint(x2, y2, series, pts.length));\n    pts.push(this.getDataPoint(x3, y3, series, pts.length));\n    return pts;\n  };\n  /**\n   * Get the polynomial points based on polynomial slopes\n   */\n\n\n  Trendlines.prototype.getPolynomialPoints = function (trendline, points, xValues, yValues, series) {\n    var midPoint = Math.round(points.length / 2);\n    var pts = [];\n    var polynomialOrder = points.length <= trendline.polynomialOrder ? points.length : trendline.polynomialOrder;\n    polynomialOrder = Math.max(2, polynomialOrder);\n    polynomialOrder = Math.min(6, polynomialOrder);\n    trendline.polynomialOrder = polynomialOrder;\n    trendline.polynomialSlopes = [];\n    trendline.polynomialSlopes.length = trendline.polynomialOrder + 1;\n    var index = 0;\n\n    while (index < xValues.length) {\n      var xVal = xValues[index];\n      var yVal = yValues[index];\n      var subIndex = 0;\n\n      while (subIndex <= trendline.polynomialOrder) {\n        if (!trendline.polynomialSlopes[subIndex]) {\n          trendline.polynomialSlopes[subIndex] = 0;\n        }\n\n        trendline.polynomialSlopes[subIndex] += Math.pow(xVal, subIndex) * yVal;\n        ++subIndex;\n      }\n\n      index++;\n    }\n\n    var numArray = [];\n    numArray.length = 1 + 2 * trendline.polynomialOrder;\n    var matrix = [];\n    matrix.length = trendline.polynomialOrder + 1;\n    var newIndex = 0;\n\n    while (newIndex < trendline.polynomialOrder + 1) {\n      matrix[newIndex] = [];\n      matrix[newIndex].length = 3;\n      newIndex++;\n    }\n\n    var nIndex = 0;\n    var num1 = 0;\n\n    while (nIndex < xValues.length) {\n      var d = xValues[nIndex];\n      var num2 = 1.0;\n      var nIndex2 = 0;\n\n      while (nIndex2 < numArray.length) {\n        if (!numArray[nIndex2]) {\n          numArray[nIndex2] = 0;\n        }\n\n        numArray[nIndex2] += num2;\n        num2 *= d;\n        ++num1;\n        ++nIndex2;\n      }\n\n      ++nIndex;\n    }\n\n    var nnIndex = 0;\n\n    while (nnIndex <= trendline.polynomialOrder) {\n      var nnIndex2 = 0;\n\n      while (nnIndex2 <= trendline.polynomialOrder) {\n        matrix[nnIndex][nnIndex2] = numArray[nnIndex + nnIndex2];\n        ++nnIndex2;\n      }\n\n      ++nnIndex;\n    }\n\n    if (!this.gaussJordanElimination(matrix, trendline.polynomialSlopes)) {\n      trendline.polynomialSlopes = null;\n    }\n\n    pts = this.getPoints(trendline, points, xValues, series);\n    return pts;\n  };\n  /**\n   * Defines the moving average points\n   */\n\n\n  Trendlines.prototype.getMovingAveragePoints = function (trendline, points, xValues, yValues, series) {\n    var pts = [];\n    var period = trendline.period >= points.length ? points.length - 1 : trendline.period;\n    period = Math.max(2, period);\n    var index = 0;\n    var y;\n    var x;\n    var count;\n    var nullCount;\n\n    while (index < points.length - 1) {\n      y = count = nullCount = 0;\n\n      for (var j = index; count < period; j++) {\n        count++;\n\n        if (!yValues[j]) {\n          nullCount++;\n        }\n\n        y += yValues[j];\n      }\n\n      y = period - nullCount <= 0 ? null : y / (period - nullCount);\n\n      if (y && !isNaN(y)) {\n        x = xValues[period - 1 + index];\n        pts.push(this.getDataPoint(x, y, series, pts.length));\n      }\n\n      index++;\n    }\n\n    return pts;\n  };\n  /**\n   * Defines the linear points\n   */\n\n\n  Trendlines.prototype.getLinearPoints = function (trendline, points, xValues, yValues, series, slopeInterceptLinear) {\n    var pts = [];\n    var max = xValues.indexOf(Math.max.apply(null, xValues));\n    var min = xValues.indexOf(Math.min.apply(null, xValues));\n    var x1Linear = xValues[min] - trendline.backwardForecast;\n    var y1Linear = slopeInterceptLinear.slope * x1Linear + slopeInterceptLinear.intercept;\n    var x2Linear = xValues[max] + trendline.forwardForecast;\n    var y2Linear = slopeInterceptLinear.slope * x2Linear + slopeInterceptLinear.intercept;\n    pts.push(this.getDataPoint(x1Linear, y1Linear, series, pts.length));\n    pts.push(this.getDataPoint(x2Linear, y2Linear, series, pts.length));\n    return pts;\n  };\n  /**\n   * Defines the exponential points\n   */\n\n\n  Trendlines.prototype.getExponentialPoints = function (trendline, points, xValues, yValues, series, slopeInterceptExp) {\n    var midPoint = Math.round(points.length / 2);\n    var ptsExp = [];\n    var x1 = xValues[0] - trendline.backwardForecast;\n    var y1 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x1);\n    var x2 = xValues[midPoint - 1];\n    var y2 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x2);\n    var x3 = xValues[xValues.length - 1] + trendline.forwardForecast;\n    var y3 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x3);\n    ptsExp.push(this.getDataPoint(x1, y1, series, ptsExp.length));\n    ptsExp.push(this.getDataPoint(x2, y2, series, ptsExp.length));\n    ptsExp.push(this.getDataPoint(x3, y3, series, ptsExp.length));\n    return ptsExp;\n  };\n  /**\n   * Defines the points based on data point\n   */\n\n\n  Trendlines.prototype.getPoints = function (trendline, points, xValues, series) {\n    var polynomialSlopes = trendline.polynomialSlopes;\n    var pts = [];\n    var x1 = 1;\n    var index = 1;\n    var xValue;\n    var yValue; // We have to sort the points in ascending order. Because, the data source of the series may be random order.\n\n    points.sort(function (a, b) {\n      return a.xValue - b.xValue;\n    });\n    xValues.sort(function (a, b) {\n      return a - b;\n    });\n\n    while (index <= polynomialSlopes.length) {\n      if (index === 1) {\n        xValue = xValues[0] - trendline.backwardForecast;\n        yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n        pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n      } else if (index === polynomialSlopes.length) {\n        xValue = xValues[points.length - 1] + trendline.forwardForecast;\n        yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n        pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n      } else {\n        x1 += (points.length + trendline.forwardForecast) / polynomialSlopes.length;\n        xValue = xValues[parseInt(x1.toString(), 10) - 1];\n        yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n        pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n      }\n\n      index++;\n    }\n\n    return pts;\n  };\n  /**\n   * Defines the polynomial value of y\n   */\n\n\n  Trendlines.prototype.getPolynomialYValue = function (slopes, x) {\n    var sum = 0;\n    var index = 0;\n\n    while (index < slopes.length) {\n      sum += slopes[index] * Math.pow(x, index);\n      index++;\n    }\n\n    return sum;\n  };\n  /**\n   * Defines the gauss jordan elimination\n   */\n\n\n  Trendlines.prototype.gaussJordanElimination = function (matrix, polynomialSlopes) {\n    var length = matrix.length;\n    var numArray1 = [];\n    var numArray2 = [];\n    var numArray3 = [];\n    numArray1.length = length;\n    numArray2.length = length;\n    numArray3.length = length;\n    var index = 0;\n\n    while (index < length) {\n      numArray3[index] = 0;\n      ++index;\n    }\n\n    var index1 = 0;\n\n    while (index1 < length) {\n      var num1 = 0;\n      var index2 = 0;\n      var index3 = 0;\n      var index4 = 0;\n\n      while (index4 < length) {\n        if (numArray3[index4] !== 1) {\n          var index5 = 0;\n\n          while (index5 < length) {\n            if (numArray3[index5] === 0 && Math.abs(matrix[index4][index5]) >= num1) {\n              num1 = Math.abs(matrix[index4][index5]);\n              index2 = index4;\n              index3 = index5;\n            }\n\n            ++index5;\n          }\n        }\n\n        ++index4;\n      }\n\n      ++numArray3[index3];\n\n      if (index2 !== index3) {\n        var index4_1 = 0;\n\n        while (index4_1 < length) {\n          var num2 = matrix[index2][index4_1];\n          matrix[index2][index4_1] = matrix[index3][index4_1];\n          matrix[index3][index4_1] = num2;\n          ++index4_1;\n        }\n\n        var num3 = polynomialSlopes[index2];\n        polynomialSlopes[index2] = polynomialSlopes[index3];\n        polynomialSlopes[index3] = num3;\n      }\n\n      numArray2[index1] = index2;\n      numArray1[index1] = index3;\n\n      if (matrix[index3][index3] === 0.0) {\n        return false;\n      }\n\n      var num4 = 1.0 / matrix[index3][index3];\n      matrix[index3][index3] = 1.0;\n      var iindex4 = 0;\n\n      while (iindex4 < length) {\n        matrix[index3][iindex4] *= num4;\n        ++iindex4;\n      }\n\n      polynomialSlopes[index3] *= num4;\n      var iandex4 = 0;\n\n      while (iandex4 < length) {\n        if (iandex4 !== index3) {\n          var num2 = matrix[iandex4][index3];\n          matrix[iandex4][index3] = 0.0;\n          var index5 = 0;\n\n          while (index5 < length) {\n            matrix[iandex4][index5] -= matrix[index3][index5] * num2;\n            ++index5;\n          }\n\n          polynomialSlopes[iandex4] -= polynomialSlopes[index3] * num2;\n        }\n\n        ++iandex4;\n      }\n\n      ++index1;\n    }\n\n    var iindex1 = length - 1;\n\n    while (iindex1 >= 0) {\n      if (numArray2[iindex1] !== numArray1[iindex1]) {\n        var iindex2 = 0;\n\n        while (iindex2 < length) {\n          var num = matrix[iindex2][numArray2[iindex1]];\n          matrix[iindex2][numArray2[iindex1]] = matrix[iindex2][numArray1[iindex1]];\n          matrix[iindex2][numArray1[iindex1]] = num;\n          ++iindex2;\n        }\n      }\n\n      --iindex1;\n    }\n\n    return true;\n  };\n  /**\n   * Defines the trendline elements\n   */\n\n\n  Trendlines.prototype.getTrendLineElements = function (series, chart) {\n    findClipRect(series);\n    var clipRect = series.clipRect;\n    var clipRectElement = chart.renderer.drawClipPath(new RectOption(chart.element.id + '_ChartTrendlineClipRect_' + series.index, 'transparent', {\n      width: 1,\n      color: 'Gray'\n    }, 1, {\n      x: 0,\n      y: 0,\n      width: clipRect.width,\n      height: clipRect.height\n    }));\n    var element;\n    element = chart.renderer.createGroup({\n      'id': chart.element.id + 'TrendlineSeriesGroup' + series.index,\n      'transform': 'translate(' + clipRect.x + ',' + clipRect.y + ')',\n      'clip-path': 'url(#' + chart.element.id + '_ChartTrendlineClipRect_' + series.index + ')'\n    }); //defines the clip rect element\n\n    if (element) {\n      element.appendChild(clipRectElement);\n    }\n\n    for (var _i = 0, _a = series.trendlines; _i < _a.length; _i++) {\n      var trendline = _a[_i];\n      this.createTrendLineElements(chart, trendline, trendline.index, element, clipRectElement);\n    }\n  };\n  /**\n   * To destroy the trendline\n   */\n\n\n  Trendlines.prototype.destroy = function (chart) {\n    /**\n     * Destroys the Linear Trendline\n     */\n  };\n  /**\n   * Get module name\n   */\n\n\n  Trendlines.prototype.getModuleName = function () {\n    /**\n     * Returns the module name of the series\n     */\n    return 'TrendLine';\n  };\n\n  return Trendlines;\n}();\n\nexport { Trendlines };","map":{"version":3,"sources":["C:/Users/Power GSM/Desktop/React-Fito-v1.0-9-April-2021V/React-Fito-v1.0-9-April-2021V/react-fito/node_modules/@syncfusion/ej2-charts/src/chart/trend-lines/trend-line.js"],"names":["Series","Points","findClipRect","RectOption","Trendlines","prototype","initSeriesCollection","trendline","chart","trendLineSeries","type","setSeriesProperties","fill","width","series","name","xName","yName","dashArray","clipRectElement","points","enableTooltip","index","sourceIndex","interior","animation","legendShape","marker","category","xMin","Infinity","xMax","yMin","yMax","xData","yData","targetSeries","isBlazor","border","connector","createTrendLineElements","element","trendLineElement","seriesElement","trendLineElements","appendChild","getDataPoint","x","y","trendPoint","xAxis","valueType","Date","Number","xValue","color","yValue","visible","Math","min","max","push","findSlopeIntercept","xValues","yValues","xAvg","yAvg","xyAvg","xxAvg","yyAvg","slope","intercept","length","isNaN","log","abs","exp","initDataSource","trendlineSeries","setLinearRange","setExponentialRange","setMovingAverageRange","setPolynomialRange","setPowerRange","setLogarithmicRange","splineSeriesModule","findSplinePoint","slopeIntercept","point","yDataValue","getExponentialPoints","xLogValue","yLogValue","xPointsLgr","xDataValue","getLogarithmicPoints","xPolyValues","yPolyValues","getPolynomialPoints","powerPoints","getPowerPoints","getLinearPoints","xAvgValues","getMovingAveragePoints","slopeInterceptLog","midPoint","round","pts","x1Log","backwardForecast","x1","y1Log","x2Log","x2","y2Log","x3Log","forwardForecast","x3","y3Log","slopeInterceptPower","y1","pow","y2","y3","polynomialOrder","polynomialSlopes","xVal","yVal","subIndex","numArray","matrix","newIndex","nIndex","num1","d","num2","nIndex2","nnIndex","nnIndex2","gaussJordanElimination","getPoints","period","count","nullCount","j","slopeInterceptLinear","indexOf","apply","x1Linear","y1Linear","x2Linear","y2Linear","slopeInterceptExp","ptsExp","sort","a","b","getPolynomialYValue","parseInt","toString","slopes","sum","numArray1","numArray2","numArray3","index1","index2","index3","index4","index5","index4_1","num3","num4","iindex4","iandex4","iindex1","iindex2","num","getTrendLineElements","clipRect","renderer","drawClipPath","id","height","createGroup","_i","_a","trendlines","destroy","getModuleName"],"mappings":"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","sourcesContent":["import { Series, Points } from '../series/chart-series';\nimport { findClipRect, RectOption } from '../../common/utils/helper';\n/**\n * `Trendline` module is used to render 6 types of trendlines in chart.\n */\nvar Trendlines = /** @class */ (function () {\n    function Trendlines() {\n    }\n    /**\n     * Defines the collection of series, that are used to represent a trendline\n     * @private\n     */\n    Trendlines.prototype.initSeriesCollection = function (trendline, chart) {\n        var trendLineSeries = new Series(trendline, 'targetSeries', {}, true);\n        if (trendline.type === 'Linear' || trendline.type === 'MovingAverage') {\n            trendLineSeries.type = 'Line';\n        }\n        else {\n            trendLineSeries.type = 'Spline';\n        }\n        this.setSeriesProperties(trendLineSeries, trendline, trendline.type, trendline.fill, trendline.width, chart);\n    };\n    /**\n     * Initializes the properties of the trendline series\n     */\n    Trendlines.prototype.setSeriesProperties = function (series, trendline, name, fill, width, chart) {\n        series.name = trendline.name;\n        series.xName = 'x';\n        series.yName = 'y';\n        series.fill = fill || 'blue';\n        series.width = width;\n        series.dashArray = trendline.dashArray;\n        series.clipRectElement = trendline.clipRectElement;\n        series.points = [];\n        series.enableTooltip = trendline.enableTooltip;\n        series.index = trendline.index;\n        series.sourceIndex = trendline.sourceIndex;\n        series.interior = series.fill;\n        series.animation = trendline.animation;\n        series.legendShape = 'HorizontalLine';\n        series.marker = trendline.marker;\n        series.category = 'TrendLine';\n        series.chart = chart;\n        series.xMin = Infinity;\n        series.xMax = -Infinity;\n        series.yMin = Infinity;\n        series.yMax = -Infinity;\n        series.xData = [];\n        series.yData = [];\n        trendline.targetSeries = series;\n        if (chart.isBlazor) {\n            trendline.targetSeries.border = {}; // To avoid console error in blazor\n            trendline.targetSeries.connector = {}; // To avoid console error in blazor\n        }\n    };\n    /**\n     * Creates the elements of a trendline\n     */\n    Trendlines.prototype.createTrendLineElements = function (chart, trendline, index, element, clipRectElement) {\n        trendline.trendLineElement = element;\n        trendline.targetSeries.clipRectElement = clipRectElement;\n        trendline.targetSeries.seriesElement = element;\n        if (chart.trendLineElements) {\n            chart.trendLineElements.appendChild(trendline.trendLineElement);\n        }\n    };\n    /**\n     * Defines the data point of trendline\n     */\n    Trendlines.prototype.getDataPoint = function (x, y, series, index) {\n        var trendPoint = new Points();\n        trendPoint.x = series.xAxis.valueType === 'DateTime' ? new Date(Number(x)) : x;\n        trendPoint.y = y;\n        trendPoint.xValue = Number(x);\n        trendPoint.color = series.fill;\n        trendPoint.index = index;\n        trendPoint.yValue = Number(y);\n        trendPoint.visible = true;\n        series.xMin = Math.min(series.xMin, trendPoint.xValue);\n        series.yMin = Math.min(series.yMin, trendPoint.yValue);\n        series.xMax = Math.max(series.xMax, trendPoint.xValue);\n        series.yMax = Math.max(series.yMax, trendPoint.yValue);\n        series.xData.push(trendPoint.xValue);\n        return trendPoint;\n    };\n    /**\n     * Finds the slope and intercept of trendline\n     */\n    Trendlines.prototype.findSlopeIntercept = function (xValues, yValues, trendline, points) {\n        var xAvg = 0;\n        var yAvg = 0;\n        var xyAvg = 0;\n        var xxAvg = 0;\n        var yyAvg = 0;\n        var index = 0;\n        var slope = 0;\n        var intercept = 0;\n        while (index < points.length) {\n            // To fix trendline not rendered issue while Nan Value is provided for y values.\n            if (isNaN(yValues[index])) {\n                yValues[index] = ((yValues[index - 1] + yValues[index + 1]) / 2);\n            }\n            xAvg += xValues[index];\n            yAvg += yValues[index];\n            xyAvg += xValues[index] * yValues[index];\n            xxAvg += xValues[index] * xValues[index];\n            yyAvg += yValues[index] * yValues[index];\n            index++;\n        }\n        var type = trendline.type;\n        if (trendline.intercept && (type === 'Linear' || type === 'Exponential')) {\n            intercept = trendline.intercept;\n            switch (type) {\n                case 'Linear':\n                    slope = ((xyAvg) - (trendline.intercept * xAvg)) / xxAvg;\n                    break;\n                case 'Exponential':\n                    slope = ((xyAvg) - (Math.log(Math.abs(trendline.intercept)) * xAvg)) / xxAvg;\n                    break;\n            }\n        }\n        else {\n            slope = ((points.length * xyAvg) - (xAvg * yAvg)) / ((points.length * xxAvg) - (xAvg * xAvg));\n            slope = (type === 'Linear' ? slope : Math.abs(slope));\n            if (type === 'Exponential' || type === 'Power') {\n                intercept = Math.exp((yAvg - (slope * xAvg)) / points.length);\n            }\n            else {\n                intercept = (yAvg - (slope * xAvg)) / points.length;\n            }\n        }\n        return { slope: slope, intercept: intercept };\n    };\n    /**\n     * Defines the points to draw the trendlines\n     */\n    Trendlines.prototype.initDataSource = function (trendline, chart) {\n        var points = trendline.points;\n        if (points && points.length) {\n            //prepare data\n            var trendlineSeries = trendline.targetSeries;\n            switch (trendline.type) {\n                case 'Linear':\n                    this.setLinearRange(points, trendline, trendlineSeries);\n                    break;\n                case 'Exponential':\n                    this.setExponentialRange(points, trendline, trendlineSeries);\n                    break;\n                case 'MovingAverage':\n                    this.setMovingAverageRange(points, trendline, trendlineSeries);\n                    break;\n                case 'Polynomial':\n                    this.setPolynomialRange(points, trendline, trendlineSeries);\n                    break;\n                case 'Power':\n                    this.setPowerRange(points, trendline, trendlineSeries);\n                    break;\n                case 'Logarithmic':\n                    this.setLogarithmicRange(points, trendline, trendlineSeries);\n                    break;\n            }\n            if (trendline.type !== 'Linear' && trendline.type !== 'MovingAverage') {\n                trendlineSeries.chart.splineSeriesModule.findSplinePoint(trendlineSeries);\n            }\n        }\n    };\n    /**\n     * Calculation of exponential points\n     */\n    Trendlines.prototype.setExponentialRange = function (points, trendline, series) {\n        var xValue = [];\n        var yValue = [];\n        var index = 0;\n        var slopeIntercept;\n        while (index < points.length) {\n            var point = points[index];\n            var yDataValue = point.yValue ? Math.log(point.yValue) : 0;\n            xValue.push(point.xValue);\n            yValue.push(yDataValue);\n            index++;\n        }\n        slopeIntercept = this.findSlopeIntercept(xValue, yValue, trendline, points);\n        series.points = this.getExponentialPoints(trendline, points, xValue, yValue, series, slopeIntercept);\n    };\n    /**\n     * Calculation of logarithmic points\n     */\n    Trendlines.prototype.setLogarithmicRange = function (points, trendline, series) {\n        var xLogValue = [];\n        var yLogValue = [];\n        var xPointsLgr = [];\n        var slopeIntercept;\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            var xDataValue = point.xValue ? Math.log(point.xValue) : 0;\n            xPointsLgr.push(point.xValue);\n            xLogValue.push(xDataValue);\n            yLogValue.push(point.yValue);\n            index++;\n        }\n        slopeIntercept = this.findSlopeIntercept(xLogValue, yLogValue, trendline, points);\n        series.points = this.getLogarithmicPoints(trendline, points, xPointsLgr, yLogValue, series, slopeIntercept);\n    };\n    /**\n     * Calculation of polynomial points\n     */\n    Trendlines.prototype.setPolynomialRange = function (points, trendline, series) {\n        var xPolyValues = [];\n        var yPolyValues = [];\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            xPolyValues.push(point.xValue);\n            yPolyValues.push(point.yValue);\n            index++;\n        }\n        series.points = this.getPolynomialPoints(trendline, points, xPolyValues, yPolyValues, series);\n    };\n    /**\n     * Calculation of power points\n     */\n    Trendlines.prototype.setPowerRange = function (points, trendline, series) {\n        var xValues = [];\n        var yValues = [];\n        var powerPoints = [];\n        var slopeIntercept;\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            var xDataValue = point.xValue ? Math.log(point.xValue) : 0;\n            var yDataValue = point.yValue ? Math.log(point.yValue) : 0;\n            powerPoints.push(point.xValue);\n            xValues.push(xDataValue);\n            yValues.push(yDataValue);\n            index++;\n        }\n        slopeIntercept = this.findSlopeIntercept(xValues, yValues, trendline, points);\n        series.points = this.getPowerPoints(trendline, points, powerPoints, yValues, series, slopeIntercept);\n    };\n    /**\n     * Calculation of linear points\n     */\n    Trendlines.prototype.setLinearRange = function (points, trendline, series) {\n        var xValues = [];\n        var yValues = [];\n        var slopeIntercept;\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            xValues.push(point.xValue);\n            yValues.push(point.yValue);\n            index++;\n        }\n        slopeIntercept = this.findSlopeIntercept(xValues, yValues, trendline, points);\n        series.points = this.getLinearPoints(trendline, points, xValues, yValues, series, slopeIntercept);\n    };\n    /**\n     * Calculation of moving average points\n     */\n    Trendlines.prototype.setMovingAverageRange = function (points, trendline, series) {\n        var xValues = [];\n        var yValues = [];\n        var xAvgValues = [];\n        var index = 0;\n        while (index < points.length) {\n            var point = points[index];\n            xAvgValues.push(point.xValue);\n            xValues.push(index + 1);\n            yValues.push(point.yValue);\n            index++;\n        }\n        series.points = this.getMovingAveragePoints(trendline, points, xAvgValues, yValues, series);\n    };\n    /**\n     * Calculation of logarithmic points\n     */\n    Trendlines.prototype.getLogarithmicPoints = function (trendline, points, xValues, yValues, series, slopeInterceptLog) {\n        var midPoint = Math.round((points.length / 2));\n        var pts = [];\n        var x1Log = xValues[0] - trendline.backwardForecast;\n        var x1 = x1Log ? Math.log(x1Log) : 0;\n        var y1Log = slopeInterceptLog.intercept + (slopeInterceptLog.slope * x1);\n        var x2Log = xValues[midPoint - 1];\n        var x2 = x2Log ? Math.log(x2Log) : 0;\n        var y2Log = slopeInterceptLog.intercept + (slopeInterceptLog.slope * x2);\n        var x3Log = xValues[xValues.length - 1] + trendline.forwardForecast;\n        var x3 = x3Log ? Math.log(x3Log) : 0;\n        var y3Log = slopeInterceptLog.intercept + (slopeInterceptLog.slope * x3);\n        pts.push(this.getDataPoint(x1Log, y1Log, series, pts.length));\n        pts.push(this.getDataPoint(x2Log, y2Log, series, pts.length));\n        pts.push(this.getDataPoint(x3Log, y3Log, series, pts.length));\n        return pts;\n    };\n    /**\n     * Defines the points based on data point\n     */\n    Trendlines.prototype.getPowerPoints = function (trendline, points, xValues, yValues, series, slopeInterceptPower) {\n        var midPoint = Math.round((points.length / 2));\n        var pts = [];\n        var x1 = xValues[0] - trendline.backwardForecast;\n        x1 = x1 > -1 ? x1 : 0;\n        var y1 = slopeInterceptPower.intercept * Math.pow(x1, slopeInterceptPower.slope);\n        var x2 = xValues[midPoint - 1];\n        var y2 = slopeInterceptPower.intercept * Math.pow(x2, slopeInterceptPower.slope);\n        var x3 = xValues[xValues.length - 1] + trendline.forwardForecast;\n        var y3 = slopeInterceptPower.intercept * Math.pow(x3, slopeInterceptPower.slope);\n        pts.push(this.getDataPoint(x1, y1, series, pts.length));\n        pts.push(this.getDataPoint(x2, y2, series, pts.length));\n        pts.push(this.getDataPoint(x3, y3, series, pts.length));\n        return pts;\n    };\n    /**\n     * Get the polynomial points based on polynomial slopes\n     */\n    Trendlines.prototype.getPolynomialPoints = function (trendline, points, xValues, yValues, series) {\n        var midPoint = Math.round((points.length / 2));\n        var pts = [];\n        var polynomialOrder = points.length <= trendline.polynomialOrder ? points.length : trendline.polynomialOrder;\n        polynomialOrder = Math.max(2, polynomialOrder);\n        polynomialOrder = Math.min(6, polynomialOrder);\n        trendline.polynomialOrder = polynomialOrder;\n        trendline.polynomialSlopes = [];\n        trendline.polynomialSlopes.length = trendline.polynomialOrder + 1;\n        var index = 0;\n        while (index < xValues.length) {\n            var xVal = xValues[index];\n            var yVal = yValues[index];\n            var subIndex = 0;\n            while (subIndex <= trendline.polynomialOrder) {\n                if (!trendline.polynomialSlopes[subIndex]) {\n                    trendline.polynomialSlopes[subIndex] = 0;\n                }\n                trendline.polynomialSlopes[subIndex] += Math.pow(xVal, subIndex) * yVal;\n                ++subIndex;\n            }\n            index++;\n        }\n        var numArray = [];\n        numArray.length = 1 + 2 * trendline.polynomialOrder;\n        var matrix = [];\n        matrix.length = trendline.polynomialOrder + 1;\n        var newIndex = 0;\n        while (newIndex < (trendline.polynomialOrder + 1)) {\n            matrix[newIndex] = [];\n            matrix[newIndex].length = 3;\n            newIndex++;\n        }\n        var nIndex = 0;\n        var num1 = 0;\n        while (nIndex < xValues.length) {\n            var d = xValues[nIndex];\n            var num2 = 1.0;\n            var nIndex2 = 0;\n            while (nIndex2 < numArray.length) {\n                if (!numArray[nIndex2]) {\n                    numArray[nIndex2] = 0;\n                }\n                numArray[nIndex2] += num2;\n                num2 *= d;\n                ++num1;\n                ++nIndex2;\n            }\n            ++nIndex;\n        }\n        var nnIndex = 0;\n        while (nnIndex <= trendline.polynomialOrder) {\n            var nnIndex2 = 0;\n            while (nnIndex2 <= trendline.polynomialOrder) {\n                matrix[nnIndex][nnIndex2] = numArray[nnIndex + nnIndex2];\n                ++nnIndex2;\n            }\n            ++nnIndex;\n        }\n        if (!this.gaussJordanElimination(matrix, trendline.polynomialSlopes)) {\n            trendline.polynomialSlopes = null;\n        }\n        pts = this.getPoints(trendline, points, xValues, series);\n        return pts;\n    };\n    /**\n     * Defines the moving average points\n     */\n    Trendlines.prototype.getMovingAveragePoints = function (trendline, points, xValues, yValues, series) {\n        var pts = [];\n        var period = trendline.period >= points.length ? points.length - 1 : trendline.period;\n        period = Math.max(2, period);\n        var index = 0;\n        var y;\n        var x;\n        var count;\n        var nullCount;\n        while (index < points.length - 1) {\n            y = count = nullCount = 0;\n            for (var j = index; count < period; j++) {\n                count++;\n                if (!yValues[j]) {\n                    nullCount++;\n                }\n                y += yValues[j];\n            }\n            y = period - nullCount <= 0 ? null : y / (period - nullCount);\n            if (y && !isNaN(y)) {\n                x = xValues[period - 1 + index];\n                pts.push(this.getDataPoint(x, y, series, pts.length));\n            }\n            index++;\n        }\n        return pts;\n    };\n    /**\n     * Defines the linear points\n     */\n    Trendlines.prototype.getLinearPoints = function (trendline, points, xValues, yValues, series, slopeInterceptLinear) {\n        var pts = [];\n        var max = xValues.indexOf(Math.max.apply(null, xValues));\n        var min = xValues.indexOf(Math.min.apply(null, xValues));\n        var x1Linear = xValues[min] - trendline.backwardForecast;\n        var y1Linear = slopeInterceptLinear.slope * x1Linear + slopeInterceptLinear.intercept;\n        var x2Linear = xValues[max] + trendline.forwardForecast;\n        var y2Linear = slopeInterceptLinear.slope * x2Linear + slopeInterceptLinear.intercept;\n        pts.push(this.getDataPoint(x1Linear, y1Linear, series, pts.length));\n        pts.push(this.getDataPoint(x2Linear, y2Linear, series, pts.length));\n        return pts;\n    };\n    /**\n     * Defines the exponential points\n     */\n    Trendlines.prototype.getExponentialPoints = function (trendline, points, xValues, yValues, series, slopeInterceptExp) {\n        var midPoint = Math.round((points.length / 2));\n        var ptsExp = [];\n        var x1 = xValues[0] - trendline.backwardForecast;\n        var y1 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x1);\n        var x2 = xValues[midPoint - 1];\n        var y2 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x2);\n        var x3 = xValues[xValues.length - 1] + trendline.forwardForecast;\n        var y3 = slopeInterceptExp.intercept * Math.exp(slopeInterceptExp.slope * x3);\n        ptsExp.push(this.getDataPoint(x1, y1, series, ptsExp.length));\n        ptsExp.push(this.getDataPoint(x2, y2, series, ptsExp.length));\n        ptsExp.push(this.getDataPoint(x3, y3, series, ptsExp.length));\n        return ptsExp;\n    };\n    /**\n     * Defines the points based on data point\n     */\n    Trendlines.prototype.getPoints = function (trendline, points, xValues, series) {\n        var polynomialSlopes = trendline.polynomialSlopes;\n        var pts = [];\n        var x1 = 1;\n        var index = 1;\n        var xValue;\n        var yValue;\n        // We have to sort the points in ascending order. Because, the data source of the series may be random order.\n        points.sort(function (a, b) { return a.xValue - b.xValue; });\n        xValues.sort(function (a, b) { return a - b; });\n        while (index <= polynomialSlopes.length) {\n            if (index === 1) {\n                xValue = xValues[0] - trendline.backwardForecast;\n                yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n                pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n            }\n            else if (index === polynomialSlopes.length) {\n                xValue = xValues[points.length - 1] + trendline.forwardForecast;\n                yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n                pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n            }\n            else {\n                x1 += (points.length + trendline.forwardForecast) / polynomialSlopes.length;\n                xValue = xValues[parseInt(x1.toString(), 10) - 1];\n                yValue = this.getPolynomialYValue(polynomialSlopes, xValue);\n                pts.push(this.getDataPoint(xValue, yValue, series, pts.length));\n            }\n            index++;\n        }\n        return pts;\n    };\n    /**\n     * Defines the polynomial value of y\n     */\n    Trendlines.prototype.getPolynomialYValue = function (slopes, x) {\n        var sum = 0;\n        var index = 0;\n        while (index < slopes.length) {\n            sum += slopes[index] * Math.pow(x, index);\n            index++;\n        }\n        return sum;\n    };\n    /**\n     * Defines the gauss jordan elimination\n     */\n    Trendlines.prototype.gaussJordanElimination = function (matrix, polynomialSlopes) {\n        var length = matrix.length;\n        var numArray1 = [];\n        var numArray2 = [];\n        var numArray3 = [];\n        numArray1.length = length;\n        numArray2.length = length;\n        numArray3.length = length;\n        var index = 0;\n        while (index < length) {\n            numArray3[index] = 0;\n            ++index;\n        }\n        var index1 = 0;\n        while (index1 < length) {\n            var num1 = 0;\n            var index2 = 0;\n            var index3 = 0;\n            var index4 = 0;\n            while (index4 < length) {\n                if (numArray3[index4] !== 1) {\n                    var index5 = 0;\n                    while (index5 < length) {\n                        if (numArray3[index5] === 0 && Math.abs(matrix[index4][index5]) >= num1) {\n                            num1 = Math.abs(matrix[index4][index5]);\n                            index2 = index4;\n                            index3 = index5;\n                        }\n                        ++index5;\n                    }\n                }\n                ++index4;\n            }\n            ++numArray3[index3];\n            if (index2 !== index3) {\n                var index4_1 = 0;\n                while (index4_1 < length) {\n                    var num2 = matrix[index2][index4_1];\n                    matrix[index2][index4_1] = matrix[index3][index4_1];\n                    matrix[index3][index4_1] = num2;\n                    ++index4_1;\n                }\n                var num3 = polynomialSlopes[index2];\n                polynomialSlopes[index2] = polynomialSlopes[index3];\n                polynomialSlopes[index3] = num3;\n            }\n            numArray2[index1] = index2;\n            numArray1[index1] = index3;\n            if (matrix[index3][index3] === 0.0) {\n                return false;\n            }\n            var num4 = 1.0 / matrix[index3][index3];\n            matrix[index3][index3] = 1.0;\n            var iindex4 = 0;\n            while (iindex4 < length) {\n                matrix[index3][iindex4] *= num4;\n                ++iindex4;\n            }\n            polynomialSlopes[index3] *= num4;\n            var iandex4 = 0;\n            while (iandex4 < length) {\n                if (iandex4 !== index3) {\n                    var num2 = matrix[iandex4][index3];\n                    matrix[iandex4][index3] = 0.0;\n                    var index5 = 0;\n                    while (index5 < length) {\n                        matrix[iandex4][index5] -= matrix[index3][index5] * num2;\n                        ++index5;\n                    }\n                    polynomialSlopes[iandex4] -= polynomialSlopes[index3] * num2;\n                }\n                ++iandex4;\n            }\n            ++index1;\n        }\n        var iindex1 = length - 1;\n        while (iindex1 >= 0) {\n            if (numArray2[iindex1] !== numArray1[iindex1]) {\n                var iindex2 = 0;\n                while (iindex2 < length) {\n                    var num = matrix[iindex2][numArray2[iindex1]];\n                    matrix[iindex2][numArray2[iindex1]] = matrix[iindex2][numArray1[iindex1]];\n                    matrix[iindex2][numArray1[iindex1]] = num;\n                    ++iindex2;\n                }\n            }\n            --iindex1;\n        }\n        return true;\n    };\n    /**\n     * Defines the trendline elements\n     */\n    Trendlines.prototype.getTrendLineElements = function (series, chart) {\n        findClipRect(series);\n        var clipRect = series.clipRect;\n        var clipRectElement = chart.renderer.drawClipPath(new RectOption(chart.element.id + '_ChartTrendlineClipRect_' + series.index, 'transparent', { width: 1, color: 'Gray' }, 1, {\n            x: 0, y: 0, width: clipRect.width,\n            height: clipRect.height,\n        }));\n        var element;\n        element = chart.renderer.createGroup({\n            'id': chart.element.id + 'TrendlineSeriesGroup' + series.index,\n            'transform': 'translate(' + clipRect.x + ',' + clipRect.y + ')',\n            'clip-path': 'url(#' + chart.element.id + '_ChartTrendlineClipRect_' + series.index + ')'\n        });\n        //defines the clip rect element\n        if (element) {\n            element.appendChild(clipRectElement);\n        }\n        for (var _i = 0, _a = series.trendlines; _i < _a.length; _i++) {\n            var trendline = _a[_i];\n            this.createTrendLineElements(chart, trendline, trendline.index, element, clipRectElement);\n        }\n    };\n    /**\n     * To destroy the trendline\n     */\n    Trendlines.prototype.destroy = function (chart) {\n        /**\n         * Destroys the Linear Trendline\n         */\n    };\n    /**\n     * Get module name\n     */\n    Trendlines.prototype.getModuleName = function () {\n        /**\n         * Returns the module name of the series\n         */\n        return 'TrendLine';\n    };\n    return Trendlines;\n}());\nexport { Trendlines };\n"]},"metadata":{},"sourceType":"module"}